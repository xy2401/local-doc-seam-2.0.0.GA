<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;27.&nbsp;Seam annotations</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Seam - Contextual Components"><link rel="up" href="index.html" title="Seam - Contextual Components"><link rel="previous" href="oc4j.html" title="Chapter&nbsp;26.&nbsp;Seam on OC4J"><link rel="next" href="components.html" title="Chapter&nbsp;28.&nbsp;Built-in Seam components"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;27.&nbsp;Seam annotations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="oc4j.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="components.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="annotations"></a>Chapter&nbsp;27.&nbsp;Seam annotations</h2></div></div><div></div></div><p> When you write a Seam application, you'll use a lot of annotations. Seam lets you use annotations to achieve
        a declarative style of programming. Most of the annotations you'll use are defined by the EJB 3.0 specification.
        The annotations for data validation are defined by the Hibernate Validator package. Finally, Seam defines its
        own set of annotations, which we'll describe in this chapter. </p><p> All of these annotations are defined in the package <tt class="literal">org.jboss.seam.annotations</tt>. </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14787"></a>27.1.&nbsp;Annotations for component definition</h2></div></div><div></div></div><p> The first group of annotations lets you define a Seam component. These annotations appear on the
            component class. </p><div class="variablelist"><dl><dt><a name="name-annotation"></a><span class="term">
                    <tt class="literal">@Name</tt>
                </span></dt><dd><pre class="programlisting">@Name("componentName")</pre><p> Defines the Seam component name for a class. This annotation is required for all Seam
                        components. </p></dd><dt><a name="scope-annotation"></a><span class="term">
                    <tt class="literal">@Scope</tt>
                </span></dt><dd><pre class="programlisting">@Scope(ScopeType.CONVERSATION)</pre><p> Defines the default context of the component. The possible values are defined by the
                            <tt class="literal">ScopeType</tt> enumeration: <tt class="literal">EVENT, PAGE, CONVERSATION, SESSION,
                            BUSINESS_PROCESS, APPLICATION, STATELESS</tt>. </p><p> When no scope is explicitly specified, the default depends upon the component type. For
                        stateless session beans, the default is <tt class="literal">STATELESS</tt>. For entity beans and
                        stateful session beans, the default is <tt class="literal">CONVERSATION</tt>. For JavaBeans, the
                        default is <tt class="literal">EVENT</tt>. </p></dd><dt><a name="role-annotation"></a><span class="term">
                    <tt class="literal">@Role</tt>
                </span></dt><dd><pre class="programlisting">@Role(name="roleName", scope=ScopeType.SESSION)</pre><p> Allows a Seam component to be bound to multiple contexts variables. The
                            <tt class="literal">@Name</tt>/<tt class="literal">@Scope</tt> annotations define a "default role". Each
                            <tt class="literal">@Role</tt> annotation defines an additional role. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">name</tt> &#8212; the context variable name. </p></li><li><p>
                                <tt class="literal">scope</tt> &#8212; the context variable scope. When no scope is
                                explicitly specified, the default depends upon the component type, as above. </p></li></ul></div></dd><dt><a name="roles-annotation"></a><span class="term">
                    <tt class="literal">@Roles</tt>
                </span></dt><dd><pre class="programlisting">@Roles({
        @Role(name="user", scope=ScopeType.CONVERSATION),
        @Role(name="currentUser", scope=ScopeType.SESSION)
    })</pre><p> Allows specification of multiple additional roles. </p></dd><dt><a name="intercept-annotation"></a><span class="term">
                    <tt class="literal">@BypassInterceptors</tt>
                </span></dt><dd><pre class="programlisting">@BypassInterceptors</pre><p>Disables Seam all interceptors on a particular component
                    or method of a component.</p></dd><dt><a name="jndiname-annotation"></a><span class="term">
                    <tt class="literal">@JndiName</tt>
                </span></dt><dd><pre class="programlisting">@JndiName("my/jndi/name")</pre><p> Specifies the JNDI name that Seam will use to look up the EJB component. If no JNDI name is
                        explicitly specified, Seam will use the JNDI pattern specified by
                            <tt class="literal">org.jboss.seam.core.init.jndiPattern</tt>. </p></dd><dt><a name="conversational-annotation"></a><span class="term">
                    <tt class="literal">@Conversational</tt>
                </span></dt><dd><pre class="programlisting">@Conversational</pre><p> Specifies that a conversation scope component is conversational, meaning that no method of
                        the component may be called unless a long-running conversation is active. </p></dd><dt><a name="startup-annotation"></a><span class="term">
                    <tt class="literal">@Startup</tt>
                </span></dt><dd><pre class="programlisting">@Scope(APPLICATION) @Startup(depends="org.jboss.seam.bpm.jbpm")</pre><p> Specifies that an application scope component is started immediately at initialization time.
                        This is mainly used for certain built-in components that bootstrap critical infrastructure such
                        as JNDI, datasources, etc. </p><pre class="programlisting">@Scope(SESSION) @Startup</pre><p> Specifies that a session scope component is started immediately at session creation time. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">depends</tt> &#8212; specifies that the named components must be
                                started first, if they are installed. </p></li></ul></div></dd><dt><a name="install-annotation"></a><span class="term">
                    <tt class="literal">@Install</tt>
                </span></dt><dd><pre class="programlisting">@Install(false)</pre><p>
                        Specifies whether or not a component should be installed by default. The lack of an @Install
                        annotation indicates a component should be installed.
                    </p><pre class="programlisting">@Install(dependencies="org.jboss.seam.bpm.jbpm")</pre><p>
                        Specifies that a component should only be stalled if the components listed as dependencies
                        are also installed.
                    </p><pre class="programlisting">@Install(genericDependencies=ManagedQueueSender.class)</pre><p>
                        Specifies that a component should only be installed if a component that is implemented by a
                        certain class is installed. This is useful when the dependency doesn't have a single well-known
                        name.
                    </p><pre class="programlisting">@Install(classDependencies="org.hibernate.Session")</pre><p>
                        Specifies that a component should only be installed if the named class is in the classpath.
                    </p><pre class="programlisting">@Install(precedence=BUILT_IN)</pre><p>
                        Specifies the precedence of the component. If multiple components with the same name exist,
                        the one with the higher precedence will be installed. The defined precendence values are
                        (in ascending order):
                    </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">BUILT_IN</tt> &#8212; Precedence of all built-in Seam
                            components</p></li><li><p><tt class="literal">FRAMEWORK</tt> &#8212; Precedence to use for components of
                                frameworks which extend Seam</p></li><li><p><tt class="literal">APPLICATION</tt> &#8212; Predence of application components (the
                                default precedence)</p></li><li><p><tt class="literal">DEPLOYMENT</tt> &#8212; Precedence to use for components which
                                override application components in a particular deployment</p></li><li><p><tt class="literal">MOCK</tt> &#8212; Precedence for mock objects used in testing</p></li></ul></div></dd><dt><a name="synchronized-annotation"></a><span class="term">
                    <tt class="literal">@Synchronized</tt>
                </span></dt><dd><pre class="programlisting">@Synchronized(timeout=1000)</pre><p> Specifies that a component is accessed concurrently by multiple clients, and that Seam should
                        serialize requests. If a request is not able to obtain its lock on the component in the given
                        timeout period, an exception will be raised. </p></dd><dt><a name="readonly-annotation"></a><span class="term">
                    <tt class="literal">@ReadOnly</tt>
                </span></dt><dd><pre class="programlisting">@ReadOnly</pre><p> Specifies that a JavaBean component or component method does not require state replication at
                        the end of the invocation. </p></dd><dt><a name="autocreate-annotation"></a><span class="term">
                    <tt class="literal">@AutoCreate</tt>
                </span></dt><dd><pre class="programlisting">@AutoCreate</pre><p> Specifies that a component will be automatically created, even if the client does not
                    specify <tt class="literal">create=true</tt>. </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15023"></a>27.2.&nbsp;Annotations for bijection</h2></div></div><div></div></div><p> The next two annotations control bijection. These attributes occur on component instance variables or
            property accessor methods. </p><div class="variablelist"><dl><dt><a name="in-annotation"></a><span class="term">
                    <tt class="literal">@In</tt>
                </span></dt><dd><pre class="programlisting">@In</pre><p> Specifies that a component attribute is to be injected from a context variable at the
                        beginning of each component invocation. If the context variable is null, an exception will be
                        thrown. </p><pre class="programlisting">@In(required=false)</pre><p> Specifies that a component attribute is to be injected from a context variable at the
                        beginning of each component invocation. The context variable may be null. </p><pre class="programlisting">@In(create=true)</pre><p> Specifies that a component attribute is to be injected from a context variable at the
                        beginning of each component invocation. If the context variable is null, an instance of the
                        component is instantiated by Seam. </p><pre class="programlisting">@In(value="contextVariableName")</pre><p> Specifies the name of the context variable explicitly, instead of using the annotated
                        instance variable name. </p><pre class="programlisting">@In(value="#{customer.addresses['shipping']}")</pre><p> Specifies that a component attribute is to be injected by evaluating a JSF EL expression at
                        the beginning of each component invocation. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">value</tt> &#8212; specifies the name of the context variable. Default
                                to the name of the component attribute. Alternatively, specifies a JSF EL expression,
                                surrounded by <tt class="literal">#{...}</tt>. </p></li><li><p>
                                <tt class="literal">create</tt> &#8212; specifies that Seam should instantiate the
                                component with the same name as the context variable if the context variable is
                                undefined (null) in all contexts. Default to false. </p></li><li><p>
                                <tt class="literal">required</tt> &#8212; specifies Seam should throw an exception if the
                                context variable is undefined in all contexts. </p></li></ul></div></dd><dt><a name="out-annotation"></a><span class="term">
                    <tt class="literal">@Out</tt>
                </span></dt><dd><pre class="programlisting">@Out</pre><p> Specifies that a component attribute that is a Seam component is to be outjected to its
                        context variable at the end of the invocation. If the attribute is null, an exception is thrown. </p><pre class="programlisting">@Out(required=false)</pre><p> Specifies that a component attribute that is a Seam component is to be outjected to its
                        context variable at the end of the invocation. The attribute may be null. </p><pre class="programlisting">@Out(scope=ScopeType.SESSION)</pre><p> Specifies that a component attribute that is <span class="emphasis"><em>not</em></span> a Seam component type
                        is to be outjected to a specific scope at the end of the invocation. </p><p> Alternatively, if no scope is explicitly specified, the scope of the component with the
                            <tt class="literal">@Out</tt> attribute is used (or the <tt class="literal">EVENT</tt> scope if the
                        component is stateless). </p><pre class="programlisting">@Out(value="contextVariableName")</pre><p> Specifies the name of the context variable explicitly, instead of using the annotated
                        instance variable name. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">value</tt> &#8212; specifies the name of the context variable. Default
                                to the name of the component attribute. </p></li><li><p>
                                <tt class="literal">required</tt> &#8212; specifies Seam should throw an exception if the
                                component attribute is null during outjection. </p></li></ul></div></dd></dl></div><p> Note that it is quite common for these annotations to occur together, for example: </p><pre class="programlisting">@In(create=true) @Out private User currentUser;</pre><p> The next annotation supports the <span class="emphasis"><em>manager component</em></span> pattern, where a Seam component
            that manages the lifecycle of an instance of some other class that is to be injected. It appears on a
            component getter method. </p><div class="variablelist"><dl><dt><a name="unwrap-annotation"></a><span class="term">
                    <tt class="literal">@Unwrap</tt>
                </span></dt><dd><pre class="programlisting">@Unwrap</pre><p> Specifies that the object returned by the annotated getter method is the thing that is
                        injected instead of the component instance itself. </p></dd></dl></div><p> The next annotation supports the <span class="emphasis"><em>factory component</em></span> pattern, where a Seam component
            is responsible for initializing the value of a context variable. This is especially useful for initializing
            any state needed for rendering the response to a non-faces request. It appears on a component method. </p><div class="variablelist"><dl><dt><a name="factory-annotation"></a><span class="term">
                    <tt class="literal">@Factory</tt>
                </span></dt><dd><pre class="programlisting">@Factory("processInstance") public void createProcessInstance() { ... }</pre><p> Specifies that the method of the component is used to initialize the value of the named
                        context variable, when the context variable has no value. This style is used with methods that
                        return <tt class="literal">void</tt>. </p><pre class="programlisting">@Factory("processInstance", scope=CONVERSATION) public ProcessInstance createProcessInstance() { ... }</pre><p> Specifies that the method returns a value that Seam should use to initialize the value of the
                        named context variable, when the context variable has no value. This style is used with methods
                        that return a value. If no scope is explicitly specified, the scope of the component with the
                            <tt class="literal">@Factory</tt> method is used (unless the component is stateless, in which case
                        the <tt class="literal">EVENT</tt> context is used). </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">value</tt> &#8212; specifies the name of the context variable. If the
                                method is a getter method, default to the JavaBeans property name. </p></li><li><p>
                                <tt class="literal">scope</tt> &#8212; specifies the scope that Seam should bind the
                                returned value to. Only meaningful for factory methods which return a value. </p></li><li><p>
                        		<tt class="literal">autoCreate</tt> &#8212; specifies that this factory method should be 
                        		automatically called whenever the variable is asked for, even if @In does not specify 
                        		create=true. 
                        	</p></li></ul></div></dd></dl></div><p> This annotation lets you inject a <tt class="literal">Log</tt>: </p><div class="variablelist"><dl><dt><a name="logger-annotation"></a><span class="term">
                    <tt class="literal">@Logger</tt>
                </span></dt><dd><pre class="programlisting">@Logger("categoryName")</pre><p> Specifies that a component field is to be injected with an instance of
                            <tt class="literal">org.jboss.seam.log.Log</tt>. For entity beans, the 
                            field must be declared as static.</p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">value</tt> &#8212; specifies the name of the log category. Default to
                                the name of the component class. </p></li></ul></div></dd></dl></div><p> The last annotation lets you inject a request parameter value: </p><div class="variablelist"><dl><dt><a name="requestparameter-annotation"></a><span class="term">
                    <tt class="literal">@RequestParameter</tt>
                </span></dt><dd><pre class="programlisting">@RequestParameter("parameterName")</pre><p> Specifies that a component attribute is to be injected with the value of a request parameter.
                        Basic type conversions are performed automatically. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">value</tt> &#8212; specifies the name of the request parameter.
                                Default to the name of the component attribute. </p></li></ul></div></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15243"></a>27.3.&nbsp;Annotations for component lifecycle methods</h2></div></div><div></div></div><p> These annotations allow a component to react to its own lifecycle events. They occur on methods of the
            component. There may be only one of each per component class. </p><div class="variablelist"><dl><dt><a name="create-annotation"></a><span class="term">
                    <tt class="literal">@Create</tt>
                </span></dt><dd><pre class="programlisting">@Create</pre><p> Specifies that the method should be called when an instance of the component is instantiated
                        by Seam. Note that create methods are only supported for JavaBeans and stateful session beans.
                    </p></dd><dt><a name="destroy-annotation"></a><span class="term">
                    <tt class="literal">@Destroy</tt>
                </span></dt><dd><pre class="programlisting">@Destroy</pre><p> Specifies that the method should be called when the context ends and its context variables
                        are destroyed. Note that destroy methods are only supported for JavaBeans and stateful session
                        beans. </p><p> Destroy methods should be used only for cleanup. <span class="emphasis"><em>Seam catches, logs and swallows
                            any exception that propagates out of a destroy method.</em></span>
                    </p></dd><dt><a name="observer-annotation"></a><span class="term">
                    <tt class="literal">@Observer</tt>
                </span></dt><dd><pre class="programlisting">@Observer("somethingChanged")</pre><p> Specifies that the method should be called when a component-driven event of the specified
                        type occurs. </p><pre class="programlisting">@Observer(value="somethingChanged",create=false)</pre><p>Specifies that the method should be called when an event of the specified type occurs but
                        that an instance should not be created if one doesn't exist.  If an instance does not exist
                        and create is false, the event will not be observed.  The default value for create is true.
                    </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15291"></a>27.4.&nbsp;Annotations for context demarcation</h2></div></div><div></div></div><p> These annotations provide declarative conversation demarcation. They appear on methods of Seam
            components, usually action listener methods. </p><p> Every web request has a conversation context associated with it. Most of these conversations end at the
            end of the request. If you want a conversation that span multiple requests, you must "promote" the current
            conversation to a <span class="emphasis"><em>long-running conversation</em></span> by calling a method marked with
                <tt class="literal">@Begin</tt>. </p><div class="variablelist"><dl><dt><a name="begin-annotation"></a><span class="term">
                    <tt class="literal">@Begin</tt>
                </span></dt><dd><pre class="programlisting">@Begin</pre><p> Specifies that a long-running conversation begins when this method returns a non-null outcome
                        without exception. </p><pre class="programlisting">@Begin(join=true)</pre><p> Specifies that if a long-running conversation is already in progress, the conversation
                        context is simply propagated. </p><pre class="programlisting">@Begin(nested=true)</pre><p> Specifies that if a long-running conversation is already in progress, a new
                        <span class="emphasis"><em>nested</em></span> conversation context begins. The nested conversation will end when
                        the next <tt class="literal">@End</tt> is encountered, and the outer conversation will resume. It is
                        perfectly legal for multiple nested conversations to exist concurrently in the same outer
                        conversation. </p><pre class="programlisting">@Begin(pageflow="process definition name")</pre><p> Specifies a jBPM process definition name that defines the pageflow for this conversation.
                    </p><pre class="programlisting">@Begin(flushMode=FlushModeType.MANUAL)</pre><p> Specify the flush mode of any Seam-managed persistence contexts.
                            <tt class="literal">flushMode=FlushModeType.MANUAL</tt> supports the use of <span class="emphasis"><em>atomic
                            conversations</em></span> where all write operations are queued in the conversation context
                        until an explicit call to <tt class="literal">flush()</tt> (which usually occurs at the end of the
                        conversation). </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">join</tt> &#8212; determines the behavior when a long-running
                                conversation is already in progress. If <tt class="literal">true</tt>, the context is
                                propagated. If <tt class="literal">false</tt>, an exception is thrown. Default to
                                    <tt class="literal">false</tt>. This setting is ignored when
                                <tt class="literal">nested=true</tt> is specified </p></li><li><p>
                                <tt class="literal">nested</tt> &#8212; specifies that a nested conversation should be
                                started if a long-running conversation is already in progress. </p></li><li><p>
                                <tt class="literal">flushMode</tt> &#8212; set the flush mode of any Seam-managed
                                Hibernate sessions or JPA persistence contexts that are created during this
                                conversation. </p></li><li><p>
                                <tt class="literal">pageflow</tt> &#8212; a process definition name of a jBPM process
                                definition deployed via <tt class="literal">org.jboss.seam.bpm.jbpm.pageflowDefinitions.</tt>
                            </p></li></ul></div></dd><dt><a name="end-annotation"></a><span class="term">
                    <tt class="literal">@End</tt>
                </span></dt><dd><pre class="programlisting">@End</pre><p> Specifies that a long-running conversation ends when this method returns a non-null outcome
                        without exception. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">beforeRedirect</tt> &#8212; by default, the conversation will not
                                actually be destroyed until after any redirect has occurred. Setting
                                    <tt class="literal">beforeRedirect=true</tt> specifies that the conversation should be
                                destroyed at the end of the current request, and that the redirect will be processed in
                                a new temporary conversation context. </p></li></ul></div></dd><dt><a name="starttask-annotation"></a><span class="term">
                    <tt class="literal">@StartTask</tt>
                </span></dt><dd><pre class="programlisting">@StartTask</pre><p> "Starts" a jBPM task. Specifies that a long-running conversation begins when this method
                        returns a non-null outcome without exception. This conversation is associated with the jBPM task
                        specified in the named request parameter. Within the context of this conversation, a business
                        process context is also defined, for the business process instance of the task instance. </p><p> The jBPM <tt class="literal">TaskInstance</tt> will be available in a request context variable
                        named <tt class="literal">taskInstance</tt>. The jPBM <tt class="literal">ProcessInstance</tt> will be
                        available in a request context variable named <tt class="literal">processInstance</tt>. (Of course,
                        these objects are available for injection via <tt class="literal">@In</tt>.) </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">taskIdParameter</tt> &#8212; the name of a request parameter which
                                holds the id of the task. Default to <tt class="literal">"taskId"</tt>, which is also the
                                default used by the Seam <tt class="literal">taskList</tt> JSF component. </p></li><li><p>
                                <tt class="literal">flushMode</tt> &#8212; set the flush mode of any Seam-managed
                                Hibernate sessions or JPA persistence contexts that are created during this
                                conversation. </p></li></ul></div></dd><dt><a name="begintask-annotation"></a><span class="term">
                    <tt class="literal">@BeginTask</tt>
                </span></dt><dd><pre class="programlisting">@BeginTask</pre><p> Resumes work on an incomplete jBPM task. Specifies that a long-running conversation begins
                        when this method returns a non-null outcome without exception. This conversation is associated
                        with the jBPM task specified in the named request parameter. Within the context of this
                        conversation, a business process context is also defined, for the business process instance of
                        the task instance. </p><p> The jBPM <tt class="literal">org.jbpm.taskmgmt.exe.TaskInstance</tt> will be available in a request 
                        context variable named <tt class="literal">taskInstance</tt>. The jPBM 
                        <tt class="literal">org.jbpm.graph.exe.ProcessInstance</tt> will be available in a request context 
                        variable named <tt class="literal">processInstance</tt>. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">taskIdParameter</tt> &#8212; the name of a request parameter which
                                holds the id of the task. Default to <tt class="literal">"taskId"</tt>, which is also the
                                default used by the Seam <tt class="literal">taskList</tt> JSF component. </p></li><li><p>
                                <tt class="literal">flushMode</tt> &#8212; set the flush mode of any Seam-managed
                                Hibernate sessions or JPA persistence contexts that are created during this
                                conversation. </p></li></ul></div></dd><dt><a name="endtask-annotation"></a><span class="term">
                    <tt class="literal">@EndTask</tt>
                </span></dt><dd><pre class="programlisting">@EndTask</pre><p> "Ends" a jBPM task. Specifies that a long-running conversation ends when this method returns
                        a non-null outcome, and that the current task is complete. Triggers a jBPM transition. The
                        actual transition triggered will be the default transition unless the application has called
                            <tt class="literal">Transition.setName()</tt> on the built-in component named
                        <tt class="literal">transition</tt>. </p><pre class="programlisting">@EndTask(transition="transitionName")</pre><p> Triggers the given jBPM transition. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">transition</tt> &#8212; the name of the jBPM transition to be
                                triggered when ending the task. Defaults to the default transition. </p></li><li><p>
                                <tt class="literal">beforeRedirect</tt> &#8212; by default, the conversation will not
                                actually be destroyed until after any redirect has occurred. Setting
                                    <tt class="literal">beforeRedirect=true</tt> specifies that the conversation should be
                                destroyed at the end of the current request, and that the redirect will be processed in
                                a new temporary conversation context. </p></li></ul></div></dd><dt><a name="createprocess-annotation"></a><span class="term">
                    <tt class="literal">@CreateProcess</tt>
                </span></dt><dd><pre class="programlisting">@CreateProcess(definition="process definition name")</pre><p> Creates a new jBPM process instance when the method returns a non-null outcome without
                        exception. The <tt class="literal">ProcessInstance</tt> object will be available in a context variable
                        named <tt class="literal">processInstance</tt>. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">definition</tt> &#8212; the name of the jBPM process definition
                                deployed via <tt class="literal">org.jboss.seam.bpm.jbpm.processDefinitions</tt>. </p></li></ul></div></dd><dt><a name="resumeprocess-annotation"></a><span class="term">
                    <tt class="literal">@ResumeProcess</tt>
                </span></dt><dd><pre class="programlisting">@ResumeProcess(processIdParameter="processId")</pre><p> Re-enters the scope of an existing jBPM process instance when the method returns a non-null
                        outcome without exception. The <tt class="literal">ProcessInstance</tt> object will be available in a
                        context variable named <tt class="literal">processInstance</tt>. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">processIdParameter</tt> &#8212; the name a request parameter holding
                                the process id. Default to <tt class="literal">"processId"</tt>. </p></li></ul></div></dd><dt><a name="transition-annotation"></a><span class="term"><tt class="literal">@Transition</tt></span></dt><dd><pre class="programlisting">@Transition("cancel")</pre><p>
                        Marks a method as signalling a transition in the current jBPM process instance
                        whenever the method returns a non-null result.
                    </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15607"></a>27.5.&nbsp;Annotations for use with Seam JavaBean components in a J2EE environment</h2></div></div><div></div></div><p> Seam provides an annotation that lets you force a rollback of the JTA transaction for certain action
            listener outcomes. </p><div class="variablelist"><dl><dt><a name="transactional-annotation"></a><span class="term">
                    <tt class="literal">@Transactional</tt>
                </span></dt><dd><pre class="programlisting">@Transactional</pre><p> Specifies that a JavaBean component should have a similar transactional behavior to the
                        default behavior of a session bean component. ie. method invocations should take place in a
                        transaction, and if no transaction exists when the method is called, a transaction will be
                        started just for that method. This annotation may be applied at either class or method level.
                       <span class="emphasis"><em>Do not use this annotations on EJB 3.0 components, use <tt class="literal">@TransactionAttribute</tt>!</em></span>
                    </p></dd><dt><span class="term">
                    <tt class="literal">@ApplicationException</tt>
                </span></dt><dd><pre class="programlisting">@Transactional</pre><p> 
                    TDB
                    </p></dd><dt><span class="term">
                    <tt class="literal">@Interceptors</tt>
                </span></dt><dd><pre class="programlisting">@Transactional</pre><p> 
                    TDB
                    </p></dd></dl></div><p>
           These annotations are mostly useful for JavaBean Seam components. If you use EJB 3.0 components, you
           should use the standard <tt class="literal">@TransactionAttribute</tt> annotation.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15657"></a>27.6.&nbsp;Annotations for exceptions</h2></div></div><div></div></div><p> These annotations let you specify how Seam should handle an exception that propagates out of a Seam
            component. </p><div class="variablelist"><dl><dt><a name="redirect-annotation"></a><span class="term">
                    <tt class="literal">@Redirect</tt>
                </span></dt><dd><pre class="programlisting">@Redirect(viewId="error.jsp")</pre><p> Specifies that the annotated exception causes a browser redirect to a specified view id. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">viewId</tt> &#8212; specifies the JSF view id to redirect to.  You can use
                                EL here. </p></li><li><p>
                                <tt class="literal">message</tt> &#8212; a message to be displayed, default to the
                                exception message. </p></li><li><p>
                                <tt class="literal">end</tt> &#8212; specifies that the long-running conversation should
                                end, default to <tt class="literal">false</tt>. </p></li></ul></div></dd><dt><a name="httperror-annotation"></a><span class="term">
                    <tt class="literal">@HttpError</tt>
                </span></dt><dd><pre class="programlisting">@HttpError(errorCode=404)</pre><p> Specifies that the annotated exception causes a HTTP error to be sent. </p><div class="itemizedlist"><ul type="disc"><li><p>
                                <tt class="literal">errorCode</tt> &#8212; the HTTP error code, default to
                                <tt class="literal">500</tt>. </p></li><li><p>
                                <tt class="literal">message</tt> &#8212; a message to be sent with the HTTP error, default
                                to the exception message. </p></li><li><p>
                                <tt class="literal">end</tt> &#8212; specifies that the long-running conversation should
                                end, default to <tt class="literal">false</tt>. </p></li></ul></div></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15732"></a>27.7.&nbsp;Annotations for Seam Remoting</h2></div></div><div></div></div><p> Seam Remoting requires that the local interface of a session bean be annotated with the following
            annotation: </p><div class="variablelist"><dl><dt><a name="webremote-annotation"></a><span class="term">
                    <tt class="literal">@WebRemote</tt>
                </span></dt><dd><pre class="programlisting">@WebRemote(exclude="path.to.exclude")</pre><p> Indicates that the annotated method may be called from client-side JavaScript. The
                            <tt class="literal">exclude</tt> property is optional and allows objects to be excluded from the
                        result's object graph (see the Remoting chapter for more details). </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15752"></a>27.8.&nbsp;Annotations for Seam interceptors</h2></div></div><div></div></div><p> The following annotations appear on Seam interceptor classes. </p><p> Please refer to the documentation for the EJB 3.0 specification for information about the annotations
            required for EJB interceptor definition. </p><div class="variablelist"><dl><dt><a name="interceptor-annotation"></a><span class="term">
                    <tt class="literal">@Interceptor</tt>
                </span></dt><dd><pre class="programlisting">@Interceptor(stateless=true)</pre><p> Specifies that this interceptor is stateless and Seam may optimize replication. </p><pre class="programlisting">@Interceptor(type=CLIENT)</pre><p> Specifies that this interceptor is a "client-side" interceptor that is called before the EJB
                        container. </p><pre class="programlisting">@Interceptor(around={SomeInterceptor.class, OtherInterceptor.class})</pre><p> Specifies that this interceptor is positioned higher in the stack than the given
                        interceptors. </p><pre class="programlisting">@Interceptor(within={SomeInterceptor.class, OtherInterceptor.class})</pre><p> Specifies that this interceptor is positioned deeper in the stack than the given
                        interceptors. </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15786"></a>27.9.&nbsp;Annotations for asynchronicity</h2></div></div><div></div></div><p> The following annotations are used to declare an asynchronous method, for example: </p><pre class="programlisting">@Asynchronous public void scheduleAlert(Alert alert, @Expiration Date date) { ... }</pre><pre class="programlisting">@Asynchronous public Timer scheduleAlerts(Alert alert, 
                                          @Expiration Date date, 
                                          @IntervalDuration long interval) { ... }</pre><div class="variablelist"><dl><dt><a name="asynchronous-annotation"></a><span class="term">
                    <tt class="literal">@Asynchronous</tt>
                </span></dt><dd><pre class="programlisting">@Asynchronous</pre><p> Specifies that the method call is processed asynchronously. </p></dd><dt><a name="duration-annotation"></a><span class="term">
                    <tt class="literal">@Duration</tt>
                </span></dt><dd><pre class="programlisting">@Duration</pre><p> Specifies that a parameter of the asynchronous call is the duration before the call is
                        processed (or first processed for recurring calls). </p></dd><dt><a name="expiration-annotation"></a><span class="term">
                    <tt class="literal">@Expiration</tt>
                </span></dt><dd><pre class="programlisting">@Expiration</pre><p> Specifies that a parameter of the asynchronous call is the datetime at which the call is
                        processed (or first processed for recurring calls). </p></dd><dt><a name="intervalduration-annotation"></a><span class="term">
                    <tt class="literal">@IntervalDuration</tt>
                </span></dt><dd><pre class="programlisting">@IntervalDuration</pre><p> Specifies that an asynchronous method call recurs, and that the annotationed parameter is
                        duration between recurrences. </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e15840"></a>27.10.&nbsp;Annotations for use with JSF</h2></div></div><div></div></div><p> 
    			The following annotations make working with JSF easier.
	        </p><div class="variablelist"><dl><dt><span class="term">
	                    <tt class="literal">@Converter</tt>
	                </span></dt><dd><p>
	                    	Allows a Seam component to act as a JSF converter. The annotated class must be a Seam
	                    	component, and must implement <tt class="literal">javax.faces.convert.Converter</tt>.
	                    </p><div class="itemizedlist"><ul type="disc"><li><p>
	                                <tt class="literal">id</tt> &#8212; the JSF converter id. Defaults to the component name.
	                            </p></li><li><p>
	                                <tt class="literal">forClass</tt> &#8212; if specified, register this component as the default converter for a type.
	                            </p></li></ul></div></dd><dt><span class="term">
	                    <tt class="literal">@Validator</tt>
	                </span></dt><dd><p>
	                    	Allows a Seam component to act as a JSF validator. The annotated class must be a Seam 
	                    	component, and must implement <tt class="literal">javax.faces.validator.Validator</tt>.
	                    </p><div class="itemizedlist"><ul type="disc"><li><p>
	                                <tt class="literal">id</tt> &#8212; the JSF validator id. Defaults to the component name.
	                            </p></li></ul></div></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e15890"></a>27.10.1.&nbsp;Annotations for use with <tt class="literal">dataTable</tt></h3></div></div><div></div></div><p> The following annotations make it easy to implement clickable lists backed by a stateful session bean.
	            They appear on attributes. </p><div class="variablelist"><dl><dt><a name="datamodel-annotation"></a><span class="term">
	                    <tt class="literal">@DataModel</tt>
	                </span></dt><dd><pre class="programlisting">@DataModel("variableName")</pre><p> Outjects a property of type <tt class="literal">List</tt>, <tt class="literal">Map</tt>,
	                        <tt class="literal">Set</tt> or <tt class="literal">Object[]</tt> as a JSF <tt class="literal">DataModel</tt> into
	                        the scope of the owning component (or the <tt class="literal">EVENT</tt> scope if the owning component
	                        is <tt class="literal">STATELESS</tt>). In the case of <tt class="literal">Map</tt>, each row of the
	                            <tt class="literal">DataModel</tt> is a <tt class="literal">Map.Entry</tt>. </p><div class="itemizedlist"><ul type="disc"><li><p>
	                                <tt class="literal">value</tt> &#8212; name of the conversation context variable. Default
	                                to the attribute name. </p></li><li><p>
	                                <tt class="literal">scope</tt> &#8212; if <tt class="literal">scope=ScopeType.PAGE</tt> is
	                                explicitly specified, the <tt class="literal">DataModel</tt> will be kept in the
	                                <tt class="literal">PAGE</tt> context. </p></li></ul></div></dd><dt><a name="datamodelselection-annotation"></a><span class="term">
	                    <tt class="literal">@DataModelSelection</tt>
	                </span></dt><dd><pre class="programlisting">@DataModelSelection</pre><p> 
                          Injects the selected value from the JSF <tt class="literal">DataModel</tt> (this is the element of
	                      the underlying collection, or the map value). If only one <tt class="literal">@DataModel</tt> attribute
                          is defined for a component, the selected value from that <tt class="literal">DataModel</tt> will be 
                          injected. Otherwise, the component name of each <tt class="literal">@DataModel</tt> must be specified 
                          in the value attribute for each <tt class="literal">@DataModelSelection</tt>.
                        </p><p> If <tt class="literal">PAGE</tt> scope is specified on the associated <tt class="literal">@DataModel</tt>,
                            then, in addition to the DataModel Selection being injected, the associated DataModel will
                            also be injected.  In this case, if the property annotated with <tt class="literal">@DataModel</tt> is
                            a getter method, then a setter method for the property must also be part of the Business API of 
                            the containing Seam Component.</p><div class="itemizedlist"><ul type="disc"><li><p>
	                                <tt class="literal">value</tt> &#8212; name of the conversation context variable. Not
	                                needed if there is exactly one <tt class="literal">@DataModel</tt> in the component. </p></li></ul></div></dd><dt><a name="datamodelselectionindex-annotation"></a><span class="term">
	                    <tt class="literal">@DataModelSelectionIndex</tt>
	                </span></dt><dd><pre class="programlisting">@DataModelSelectionIndex</pre><p>
                          Exposes the selection index of the JSF <tt class="literal">DataModel</tt> as an attribute of the
	                      component (this is the row number of the underlying collection, or the map key). If only one 
                          <tt class="literal">@DataModel</tt> attribute is defined for a component, the selected value from 
                          that <tt class="literal">DataModel</tt> will be injected. Otherwise, the component name of each 
                          <tt class="literal">@DataModel</tt> must be specified in the value attribute for each 
                          <tt class="literal">@DataModelSelectionIndex</tt>.
                        </p><div class="itemizedlist"><ul type="disc"><li><p>
	                                <tt class="literal">value</tt> &#8212; name of the conversation context variable. Not
	                                needed if there is exactly one <tt class="literal">@DataModel</tt> in the component. </p></li></ul></div></dd></dl></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e16044"></a>27.11.&nbsp;Meta-annotations for databinding</h2></div></div><div></div></div><p> These meta-annotations make it possible to implement similar functionality to
            <tt class="literal">@DataModel</tt> and <tt class="literal">@DataModelSelection</tt> for other datastructures apart from
            lists. </p><div class="variablelist"><dl><dt><a name="databinderclass-annotation"></a><span class="term">
                    <tt class="literal">@DataBinderClass</tt>
                </span></dt><dd><pre class="programlisting">@DataBinderClass(DataModelBinder.class)</pre><p> Specifies that an annotation is a databinding annotation. </p></dd><dt><a name="dataselectorclass-annotation"></a><span class="term">
                    <tt class="literal">@DataSelectorClass</tt>
                </span></dt><dd><pre class="programlisting">@DataSelectorClass(DataModelSelector.class)</pre><p> Specifies that an annotation is a dataselection annotation. </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e16078"></a>27.12.&nbsp;Annotations for packaging</h2></div></div><div></div></div><p> This annotation provides a mechanism for declaring information about a set of components that are
            packaged together. It can be applied to any Java package.</p><div class="variablelist"><dl><dt><a name="namespace-annotation"></a><span class="term">
                    <tt class="literal">@Namespace</tt>
                </span></dt><dd><pre class="programlisting">@Namespace(value="http://jboss.com/products/seam/example/seampay")</pre><p> Specifies that components in the current package are associated with the given namespace. The
                        declared namespace can be used as an XML namespace in a <tt class="literal">components.xml</tt> file
                        to simplify application configuration.</p><pre class="programlisting">@Namespace(value="http://jboss.com/products/seam/core", prefix="org.jboss.seam.core")</pre><p>Specifies a namespace to associate with a given package. Additionally, it specifies a
                        component name prefix to be applied to component names specified in the XML file. For example,
                        an XML element named <tt class="literal">init</tt> that is associated with this namespace
                        would be understood to actually refere to a component named
                            <tt class="literal">org.jboss.seam.core.init</tt>. </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e16108"></a>27.13.&nbsp;Annotations for integrating with the servlet container</h2></div></div><div></div></div><p>These annotations allow you to integrate your Seam components with the servlet container.</p><div class="variablelist"><dl><dt><span class="term">
                    <tt class="literal">@Filter</tt>
                </span></dt><dd><p>
                		Use the Seam component (which implements <tt class="literal">javax.servlet.Filter</tt>) annotated with <tt class="literal">@Filter</tt> as a servlet filter.  It
                		will be executed by Seam's master filter.
                	</p><div class="itemizedlist"><ul type="disc"><li><pre class="programlisting">@Filter(around={"seamComponent", "otherSeamComponent"})</pre><p> Specifies that this filter is positioned higher in the stack than the given
                        filters. </p></li><li><pre class="programlisting">@Filter(within={"seamComponent", "otherSeamComponent"})</pre><p> Specifies that this filter is positioned deeper in the stack than the given
                        filters. </p></li></ul></div></dd></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="oc4j.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="components.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;26.&nbsp;Seam on OC4J&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;28.&nbsp;Built-in Seam components</td></tr></table></div></body></html>