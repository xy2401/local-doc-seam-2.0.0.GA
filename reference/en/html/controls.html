<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;29.&nbsp;Seam JSF controls</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Seam - Contextual Components"><link rel="up" href="index.html" title="Seam - Contextual Components"><link rel="previous" href="components.html" title="Chapter&nbsp;28.&nbsp;Built-in Seam components"><link rel="next" href="elenhancements.html" title="Chapter&nbsp;30.&nbsp;Expression language enhancements"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;29.&nbsp;Seam JSF controls</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="components.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="elenhancements.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="controls"></a>Chapter&nbsp;29.&nbsp;Seam JSF controls</h2></div></div><div></div></div><p>
    Seam includes a number of JSF controls that are useful for working with
    Seam. These are intended to complement the built-in JSF controls, and
    controls from other third-party libraries. We recommend
    JBoss RichFaces, and Apache MyFaces Trinidad tag libraries for use with Seam.
    We do not recommend the use of the Tomahawk tag library.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="controls.tags"></a>29.1.&nbsp;Tags</h2></div></div><div></div></div><p>
    To use these tags, define the "<tt class="literal">s</tt>" namespace in your page 
    as follows (facelets only):
  </p><pre class="programlisting">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:s="http://jboss.com/products/seam/taglib"&gt;</pre><p>
    The ui example demonstrates the use of a number of these tags.
  </p><div class="table"><a name="d0e17731"></a><p class="title"><b>Table&nbsp;29.1.&nbsp;Seam JSF Control Reference</b></p><table summary="Seam JSF Control Reference" border="1"><colgroup><col><col></colgroup><tbody><tr><td valign="top"><p>
              <tt class="literal">&lt;s:button&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              A button that supports invocation of an action with control
              over conversation propagation. <span class="emphasis"><em>Does not submit the form.</em></span>
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">value</tt> &#8212; the label.
                </p></li><li><p>
                  <tt class="literal">action</tt> &#8212; a method binding that specified
                  the action listener.
                </p></li><li><p>
                  <tt class="literal">view</tt> &#8212; the JSF view id to link to.
                </p></li><li><p>
                  <tt class="literal">fragment</tt> &#8212; the fragment identifier to link to.
                </p></li><li><p>
                  <tt class="literal">disabled</tt> &#8212; is the link disabled?
                </p></li><li><p>
                  <tt class="literal">propagation</tt> &#8212; determines the conversation
                  propagation style: <tt class="literal">begin</tt>, <tt class="literal">join</tt>,
                  <tt class="literal">nest</tt>, <tt class="literal">none</tt> or <tt class="literal">end</tt>.
                </p></li><li><p>
                  <tt class="literal">pageflow</tt> &#8212; a pageflow definition to begin.
                  (This is only useful when <tt class="literal">propagation="begin"</tt> or
                  <tt class="literal">propagation="join"</tt>.)
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:button id="cancel" value="Cancel" 
          action="#{hotelBooking.cancel}"/&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:cache&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              Cache the rendered page fragment using JBoss Cache. Note that
              <tt class="literal">&lt;s:cache&gt;</tt> actually uses the instance
              of JBoss Cache managed by the built-in <tt class="literal">pojoCache</tt>
              component.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">key</tt> &#8212; the key to cache rendered content,
                  often a value expression. For example, if we were caching a page
                  fragment that displays a document, we might use
                  <tt class="literal">key="Document-#{document.id}"</tt>.
                </p></li><li><p>
                  <tt class="literal">enabled</tt> &#8212; a value expression that determines
                  if the cache should be used.
                </p></li><li><p>
                  <tt class="literal">region</tt> &#8212; a JBoss Cache node to use (different
                  nodes can have different expiry policies).
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:cache key="entry-#{blogEntry.id}" region="pageFragments"&gt;
  &lt;div class="blogEntry"&gt;
    &lt;h3&gt;#{blogEntry.title}&lt;/h3&gt;
    &lt;div&gt;
      &lt;s:formattedText value="#{blogEntry.body}"/&gt;
    &lt;/div&gt;
    &lt;p&gt;
      [Posted on&amp;#160;
      &lt;h:outputText value="#{blogEntry.date}"&gt;
        &lt;f:convertDateTime timezone="#{blog.timeZone}" locale="#{blog.locale}" 
                           type="both"/&gt;
      &lt;/h:outputText&gt;]
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/s:cache&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:conversationId&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              Add the conversation id to an output link (or similar JSF control).
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:conversationPropagation&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
                Customize the conversation propagation for a command link or button
                (or similar JSF control). <span class="emphasis"><em>Facelets only.</em></span>
              </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                     <tt class="literal">propagation</tt> &#8212; determines the conversation
                     propagation style: <tt class="literal">begin</tt>, <tt class="literal">join</tt>,
                     <tt class="literal">nest</tt>, <tt class="literal">none</tt> or <tt class="literal">end</tt>.
                  </p></li><li><p>
                    <tt class="literal">pageflow</tt> &#8212; a pageflow definition to begin.
                    (This is only useful when <tt class="literal">propagation="begin"</tt> or
                    <tt class="literal">propagation="join"</tt>.)
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:commandButton value="Apply" action="#{personHome.update}"&gt;
  &lt;s:conversationPropagation type="join" /&gt;
&lt;/h:commandButton&gt;</pre></td></tr><tr><td valign="top"><p><tt class="literal">&lt;s:convertDateTime&gt;</tt></p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              Perform date or time conversions in the Seam timezone.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:outputText value="#{item.orderDate}"&gt;
  &lt;s:convertDateTime type="both" dateStyle="full"/&gt;
&lt;/h:outputText&gt;</pre></td></tr><tr><td valign="top"><p><tt class="literal">&lt;s:convertEntity&gt;</tt></p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
               Assigns an entity converter to the current component.  This is primarily
               useful for radio button and dropdown controls.
            </p><p>
              The converter works with any managed entity which has an <tt class="literal">@Id</tt> annotation -
              either simple or composite.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Configuration</em></span></p><p>
              You must use <span class="emphasis"><em>Seam managed transactions</em></span> (see <a href="persistence.html#persistence.seam-managed-transactions" title="8.2.&nbsp;Seam managed transactions">Section&nbsp;8.2, &#8220;Seam managed transactions&#8221;</a>) with <tt class="literal">&lt;s:convertEntity /&gt;</tt>.
            </p><p>
              If your <span class="emphasis"><em>Managed Persistence Context</em></span> isn't called
              <tt class="literal">entityManager</tt>, then you need to set it in components.xml:
            </p><pre class="programlisting">&lt;component name="org.jboss.seam.ui.EntityConverter"&gt;
  &lt;property name="entityManager"&gt;#{em}&lt;/property&gt;
&lt;/component&gt;</pre><p>
              If you want to use more than one entity manager with the entity 
              converter, you can create a copy of the entity converter for each
              entity manager; in components.xml:
            </p><pre class="programlisting">&lt;component name="myEntityConverter" class="org.jboss.seam.ui.converter.EntityConverter"&gt;
  &lt;property name="entityManager"&gt;#{em}&lt;/property&gt;
&lt;/component&gt;</pre><pre class="programlisting">&lt;h:selectOneMenu value="#{person.continent}"&gt;
  &lt;s:selectItems value="#{continents.resultList}" var="continent" 
                 label="#{continent.name}" /&gt;
    &lt;f:converter converterId="myEntityConverter" /&gt;
&lt;/h:selectOneMenu&gt;</pre><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:selectOneMenu value="#{person.continent}" required="true"&gt;
  &lt;s:selectItems value="#{continents.resultList}" var="continent" 
                 label="#{continent.name}" 
                 noSelectionLabel="Please Select..."/&gt;
    &lt;s:convertEntity /&gt;
&lt;/h:selectOneMenu&gt;</pre></td></tr><tr><td valign="top"><p><tt class="literal">&lt;s:convertEnum&gt;</tt></p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              Assigns an enum converter to the current component.  This is primarily
              useful for radio button and dropdown controls.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:selectOneMenu value="#{person.honorific}"&gt;
  &lt;s:selectItems value="#{honorifics}" var="honorific" 
                 label="#{honorific.label}"
                 noSelectionLabel="Please select" /&gt;
  &lt;s:convertEnum /&gt;
&lt;/h:selectOneMenu&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:decorate&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              "Decorate" a JSF input field when validation fails or when
              <tt class="literal">required="true"</tt> is set.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">template</tt> &#8212; the facelets template to use to decorate the component
                </p></li></ul></div><p>
              <tt class="literal">#{invalid}</tt> and <tt class="literal">#{required}</tt> are 
              available inside <tt class="literal">s:decorate</tt>; <tt class="literal">#{required}</tt> 
              evaluates to <tt class="literal">true</tt> if you have set the input component 
              being decorated as required, and <tt class="literal">#{invalid}</tt> evaluates 
              to <tt class="literal">true</tt> if a validation error occurs.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:decorate template="edit.xhtml"&gt;
  &lt;ui:define name="label"&gt;Country:&lt;/ui:define&gt;
    &lt;h:inputText value="#{location.country}" required="true"/&gt;
  &lt;/s:decorate&gt;</pre><pre class="programlisting">&lt;ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:s="http://jboss.com/products/seam/taglib"&gt;
                  
  &lt;div&gt;   
   
    &lt;s:label styleClass="#{invalid?'error':''}"&gt;
      &lt;ui:insert name="label"/&gt;
      &lt;s:span styleClass="required" rendered="#{required}"&gt;*&lt;/s:span&gt;
    &lt;/s:label&gt;
        
    &lt;span class="#{invalid?'error':''}"&gt;
      &lt;s:validateAll&gt;
        &lt;ui:insert/&gt;
      &lt;/s:validateAll&gt;
    &lt;/span&gt;
        
    &lt;s:message styleClass="error"/&gt;     
      
  &lt;/div&gt;   
  
&lt;/ui:composition&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:div&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
               Render a HTML <tt class="literal">&lt;div&gt;</tt>.
             </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:div rendered="#{selectedMember == null}"&gt;
  Sorry, but this member does not exist.
&lt;/s:div&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:enumItem&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
                Creates a <tt class="literal">SelectItem</tt> from an enum value.
              </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                     <tt class="literal">enumValue</tt> &#8212; the string representation of the enum
                     value.
                  </p></li><li><p>
                    <tt class="literal">label</tt> &#8212; the label to be used when rendering the <tt class="literal">SelectItem</tt>.
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:selectOneRadio id="radioList"
                  layout="lineDirection"
                  value="#{newPayment.paymentFrequency}"&gt;
  &lt;s:convertEnum /&gt;
  &lt;s:enumItem enumValue="ONCE" label="Only Once" /&gt;
  &lt;s:enumItem enumValue="EVERY_MINUTE" label="Every Minute" /&gt;
  &lt;s:enumItem enumValue="HOURLY"       label="Every Hour" /&gt;
  &lt;s:enumItem enumValue="DAILY"        label="Every Day" /&gt;
  &lt;s:enumItem enumValue="WEEKLY"       label="Every Week" /&gt;
&lt;/h:selectOneRadio&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:fileUpload&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
               Renders a file upload control.  This control must be used within a form with
               an encoding type of <tt class="literal">multipart/form-data</tt>, i.e:
            </p><pre class="programlisting">&lt;h:form enctype="multipart/form-data"&gt;</pre><p>
              For multipart requests, the Seam Multipart servlet filter must also be configured
              in <tt class="literal">web.xml</tt>:
            </p><pre class="programlisting">&lt;filter&gt;
  &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
  &lt;filter-class&gt;org.jboss.seam.servlet.SeamFilter&lt;/filter-class&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
  &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</pre><p><span class="emphasis"><em>Configuration</em></span></p><p>
              The following configuration options for multipart requests may be configured in components.xml:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">createTempFiles</tt> &#8212; if this option is set to true, uploaded files are
                  streamed to a temporary file instead of in memory.
                </p></li><li><p>
                  <tt class="literal">maxRequestSize</tt> &#8212; the maximum size of a file upload request, in bytes.
                </p></li></ul></div><p>
              Here's an example:
            </p><pre class="programlisting">&lt;component class="org.jboss.seam.web.MultipartFilter"&gt;
  &lt;property name="createTempFiles"&gt;true&lt;/property&gt;
  &lt;property name="maxRequestSize"&gt;1000000&lt;/property&gt;
&lt;/component&gt;</pre><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">data</tt> &#8212; this value binding receives the binary file data.
                  The receiving field should be declared as a <tt class="literal">byte[]</tt> or <tt class="literal">InputStream</tt> (required).
                </p></li><li><p>
                  <tt class="literal">contentType</tt> &#8212; this value binding receives the file's
                  content type (optional).
                </p></li><li><p>
                  <tt class="literal">fileName</tt> &#8212; this value binding receives the filename (optional).
                </p></li><li><p>
                  <tt class="literal">fileSize</tt> &#8212; this value binding receives the file size (optional).
                </p></li><li><p>
                  <tt class="literal">accept</tt> &#8212; a comma-separated list of content types to accept,
                  may not be supported by the browser.  E.g. <tt class="literal">"images/png,images/jpg"</tt>,
                  <tt class="literal">"images/*"</tt>.
                </p></li><li><p>
                  <tt class="literal">style</tt> &#8212; The control's style
                </p></li><li><p>
                  <tt class="literal">styleClass</tt> &#8212; The control's style class
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:fileUpload id="picture" data="#{register.picture}" 
              accept="image/png"
              contentType="#{register.pictureContentType}" /&gt;</pre></td></tr><tr><td valign="top"><p><tt class="literal">&lt;s:formattedText&gt;</tt></p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
               Outputs <span class="emphasis"><em>Seam Text</em></span>, a rich text markup useful for blogs, wikis and
               other applications that might use rich text.  See the Seam Text chapter for full usage.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">value</tt> &#8212; an EL expression specifying the rich text markup to render.
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:formattedText value="#{blog.text}"/&gt;</pre><p><span class="emphasis"><em>Example</em></span></p><div class="mediaobject" align="center"><img src="../shared/images/controls-seamtext.png" align="middle"></div></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:validateFormattedText&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              Checks that the submitted value is valid Seam Text
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:fragment&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              A non-rendering component useful for enabling/disabling rendering of it's children.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:fragment rendered="#{auction.highBidder ne null}"&gt;
  Current bid:
&lt;/s:fragment&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:graphicImage&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              An extended <tt class="literal">&lt;h:graphicImage&gt;</tt> that allows the image to be created in a Seam Component; further transforms
              can be applied to the image.
            </p><p>
              All attributes for <tt class="literal">&lt;h:graphicImage&gt;</tt> are supported, as well as:
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                 <tt class="literal">value</tt> &#8212; image to display.  Can be a path <tt class="literal">String</tt>
                 (loaded from the classpath), a <tt class="literal">byte[]</tt>, a <tt class="literal">java.io.File</tt>,
                 a <tt class="literal">java.io.InputStream</tt> or a <tt class="literal">java.net.URL</tt>.  Currently supported
                 image formats are <tt class="literal">image/png</tt>, <tt class="literal">image/jpeg</tt> and <tt class="literal">image/gif</tt>.
               </p></li><li><p>
                 <tt class="literal">fileName</tt> &#8212; if not specified the served image will have a generated file name.
                 If you want to name your file, you should specify it here.  This name should be unique
               </p></li></ul></div><p><span class="emphasis"><em>Transformations</em></span></p><p>
               To apply a transform to the image, you would nest a tag specifying the transform to apply.  Seam currently supports these
               transforms:
             </p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">&lt;s:transformImageSize&gt;</tt></span></dt><dd><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">width</tt> &#8212; new width of the image
                      </p></li><li><p>
                        <tt class="literal">height</tt> &#8212; new height of the image
                      </p></li><li><p>
                        <tt class="literal">maintainRatio</tt> &#8212; if <tt class="literal">true</tt>, and <span class="emphasis"><em>one</em></span> of
                        <tt class="literal">width</tt>/<tt class="literal">height</tt> are specified, the image will be resized with the
                        dimension not specified being calculated to maintain the aspect ratio.
                      </p></li><li><p>
                        <tt class="literal">factor</tt> &#8212; scale the image by the given factor
                      </p></li></ul></div></dd><dt><span class="term"><tt class="literal">&lt;s:transformImageBlur&gt;</tt></span></dt><dd><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">radius</tt> &#8212; perform a convolution blur with the given radius
                      </p></li></ul></div></dd><dt><span class="term"><tt class="literal">&lt;s:transformImageType&gt;</tt></span></dt><dd><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">contentType</tt> &#8212; alter the type of the image to either <tt class="literal">image/jpeg</tt> or <tt class="literal">image/png</tt>
                      </p></li></ul></div></dd></dl></div><p>
              It's easy to create your own transform - create a <tt class="literal">UIComponent</tt> which <tt class="literal">implements</tt>
              <tt class="literal">org.jboss.seam.ui.graphicImage.ImageTransform</tt>.  Inside the <tt class="literal">applyTransform()</tt>method
              use <tt class="literal">image.getBufferedImage()</tt> to get the original image and <tt class="literal">image.setBufferedImage()</tt>
              to set your transformed image.  Transforms are applied in the order specified in the view.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:graphicImage rendered="#{auction.image ne null}"
                value="#{auction.image.data}"&gt;
  &lt;s:transformImageSize width="200" maintainRatio="true"/&gt;
&lt;/s:graphicImage&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:link&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              A link that supports invocation of an action with control over conversation
              propagation. <span class="emphasis"><em>Does not submit the form.</em></span>
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">value</tt> &#8212; the label.
                </p></li><li><p>
                  <tt class="literal">action</tt> &#8212; a method binding that specified
                  the action listener.
                </p></li><li><p>
                  <tt class="literal">view</tt> &#8212; the JSF view id to link to.
                </p></li><li><p>
                  <tt class="literal">fragment</tt> &#8212; the fragment identifier to link to.
                </p></li><li><p>
                  <tt class="literal">disabled</tt> &#8212; is the link disabled?
                </p></li><li><p>
                  <tt class="literal">propagation</tt> &#8212; determines the conversation
                  propagation style: <tt class="literal">begin</tt>, <tt class="literal">join</tt>,
                  <tt class="literal">nest</tt>, <tt class="literal">none</tt> or <tt class="literal">end</tt>.
                </p></li><li><p>
                  <tt class="literal">pageflow</tt> &#8212; a pageflow definition to begin.
                  (This is only useful when <tt class="literal">propagation="begin"</tt> or
                  <tt class="literal">propagation="join"</tt>.)
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:link id="register" view="/register.xhtml" 
        value="Register New User"/&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:message&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              "Decorate" a JSF input field with the validation error message.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;f:facet name="afterInvalidField"&gt;
  &lt;s:span&gt;
    &amp;#160;Error:&amp;#160;
    &lt;s:message/&gt;
  &lt;/s:span&gt;
&lt;/f:facet&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:label&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              "Decorate" a JSF input field with the label.  The label is placed inside 
              the HTML <tt class="literal">&lt;label&gt;</tt> tag, and is associated with the
              nearest JSF input component.  It is often used with <tt class="literal">&lt;s:decorate&gt;</tt>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">style</tt> &#8212; The control's style
                </p></li><li><p>
                  <tt class="literal">styleClass</tt> &#8212; The control's style class
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:label styleClass="label"&gt;
  Country:
&lt;/s:label&gt;
&lt;h:inputText value="#{location.country}" required="true"/&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:remote&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              Generates the Javascript stubs required to use Seam Remoting.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">include</tt> &#8212; a comma-separated list of the component names (or fully qualified class names)
                  for which to generate Seam Remoting Javascript stubs.  See <a href="remoting.html" title="Chapter&nbsp;21.&nbsp;Remoting">Chapter&nbsp;21, <i>Remoting</i></a> for more details.
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:remote include="customerAction,accountAction,com.acme.MyBean"/&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:selectDate&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              <span class="emphasis"><em>Deprecated.  Use <tt class="literal">&lt;rich:calendar /&gt;</tt> instead.</em></span>
            </p><p>
               Displays a dynamic date picker component that selects a date for the specified input field.
               The body of the <tt class="literal">selectDate</tt> element should contain HTML elements, such as
               text or an image, that prompt the user to click to display the date picker.  The date picker
               <span class="emphasis"><em>must</em></span> be styled using CSS.  An example CSS file can be found in the Seam
               booking demo as <tt class="literal">date.css</tt>, or can be generated using seam-gen.  The CSS
               styles used to control the appearance of the date picker are also described below.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">for</tt> &#8212; The id of the input field that the date picker will insert the
                  selected date into.
                </p></li><li><p>
                  <tt class="literal">dateFormat</tt> &#8212; The date format string.  This should match the date format of the
                  input field.
                </p></li><li><p>
                  <tt class="literal">startYear</tt> &#8212; The popup year selector range will start at this year.
                </p></li><li><p>
                  <tt class="literal">endYear</tt> &#8212; The popup year selector range will end at this year.
                </p></li><li><p>
                  <tt class="literal">firstDayOfWeek</tt> &#8212; Controls which day is the first day of the week 
                  (0 = Sunday, 6 = Saturday).  If this attribute is not set, then the first day of the week will
                  default based on the user's locale.
                </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><p>
              </p><pre class="programlisting">&lt;div class="row"&gt;
  &lt;h:outputLabel for="dob"&gt;Date of birth&lt;em&gt;*&lt;/em&gt;&lt;/h:outputLabel&gt;
  &lt;h:inputText id="dob" value="#{user.dob}" required="true"&gt;
    &lt;s:convertDateTime pattern="MM/dd/yyyy"/&gt;
  &lt;/h:inputText&gt;
  &lt;s:selectDate for="dob" startYear="1910" endYear="2007"&gt;
    &lt;img src="img/datepicker.png"/&gt;
  &lt;/s:selectDate&gt;
  &lt;div class="validationError"&gt;&lt;h:message for="dob"/&gt;&lt;/div&gt;
&lt;/div&gt;</pre><p>
            </p><p><span class="emphasis"><em>Example</em></span></p><div class="mediaobject" align="center"><img src="../shared/images/controls-selectdate.png" align="middle"></div><p><span class="emphasis"><em>CSS Styling</em></span></p><p>
              The following list describes the CSS class names that are used to control the style of the selectDate control.
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  <tt class="literal">seam-date</tt> &#8212; This class is applied to the outer <tt class="literal">div</tt> containing the
                  popup calendar. (1) It is also applied to the <tt class="literal">table</tt> that controls the inner layout of the
                  calendar. (2)
                </p></li><li><p>
                  <tt class="literal">seam-date-header</tt> &#8212; This class is applied to the calendar header table row (<tt class="literal">tr</tt>)
                  and header table cells (<tt class="literal">td</tt>). (3)
                </p></li><li><p>
                  <tt class="literal">seam-date-header-prevMonth</tt> &#8212; This class is applied to the "previous month" table cell,
                  (<tt class="literal">td</tt>), which when clicked causes the calendar to display the month prior to the one currently
                  displayed.  (4)
                </p></li><li><p>
                  <tt class="literal">seam-date-header-nextMonth</tt> &#8212; This class is applied to the "next month" table cell,
                  (<tt class="literal">td</tt>), which when clicked causes the calendar to display the month following the one currently
                  displayed.  (5)
                </p></li><li><p>
                  <tt class="literal">seam-date-headerDays</tt> &#8212; This class is applied to the calendar days header row
                  (<tt class="literal">tr</tt>), which contains the names of the week days. (6)
                </p></li><li><p>
                  <tt class="literal">seam-date-footer</tt> &#8212; This class is applied to the calendar footer row
                  (<tt class="literal">tr</tt>), which displays the current date. (7)
                </p></li><li><p>
                  <tt class="literal">seam-date-inMonth</tt> &#8212; This class is applied to the table cell
                  (<tt class="literal">td</tt>) elements that contain a date within the month currently displayed. (8)
                </p></li><li><p>
                  <tt class="literal">seam-date-outMonth</tt> &#8212; This class is applied to the table cell
                  (<tt class="literal">td</tt>) elements that contain a date outside of the month currently displayed. (9)
                </p></li><li><p>
                  <tt class="literal">seam-date-selected</tt> &#8212; This class is applied to the table cell
                  (<tt class="literal">td</tt>) element that contains the currently selected date. (10)
                </p></li><li><p>
                  <tt class="literal">seam-date-dayOff-inMonth</tt> &#8212; This class is applied to the table cell
                  (<tt class="literal">td</tt>) elements that contain a "day off" date (i.e. weekend days, Saturday and Sunday)
                  within the currently selected month. (11)
                </p></li><li><p>
                  <tt class="literal">seam-date-dayOff-outMonth</tt> &#8212; This class is applied to the table cell
                  (<tt class="literal">td</tt>) elements that contain a "day off" date (i.e. weekend days, Saturday and Sunday)
                  outside of the currently selected month. (12)
                </p></li><li><p>
                  <tt class="literal">seam-date-hover</tt> &#8212; This class is applied to the table cell
                  (<tt class="literal">td</tt>) element over which the cursor is hovering. (13)
                </p></li><li><p>
                  <tt class="literal">seam-date-monthNames</tt> &#8212; This class is applied to the <tt class="literal">div</tt>
                  control that contains the popup month selector. (14)
                </p></li><li><p>
                  <tt class="literal">seam-date-monthNameLink</tt> &#8212; This class is applied to the anchor (<tt class="literal">a</tt>)
                  controls that contain the popup month names. (15)
                </p></li><li><p>
                  <tt class="literal">seam-date-years </tt> &#8212; This class is applied to the <tt class="literal">div</tt>
                  control that contains the popup year selector. (16)
                </p></li><li><p>
                  <tt class="literal">seam-date-yearLink</tt> &#8212; This class is applied to the anchor (<tt class="literal">a</tt>)
                  controls that contain the popup years. (15)
                </p></li></ul></div><div class="mediaobject" align="center"><img src="../shared/images/controls-selectdatecss.png" align="middle"></div></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:selectItems&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
                 Creates a <tt class="literal">List&lt;SelectItem&gt;</tt> from a List, Set, DataModel or Array.
               </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>
                     <tt class="literal">value</tt> &#8212; an EL expression specifying the data that backs the <tt class="literal">List&lt;SelectItem&gt;</tt>
                 </p></li><li><p>
                     <tt class="literal">var</tt> &#8212; defines the name of the local variable that holds the current object during iteration
                 </p></li><li><p>
                     <tt class="literal">label</tt> &#8212; the label to be used when rendering the <tt class="literal">SelectItem</tt>.  Can reference
                     the <tt class="literal">var</tt> variable
                 </p></li><li><p>
                     <tt class="literal">disabled</tt> &#8212; if true the <tt class="literal">SelectItem</tt> will be rendered disabled.  Can reference
                     the <tt class="literal">var</tt> variable
                 </p></li><li><p>
                     <tt class="literal">noSelectionLabel</tt> &#8212; specifies the (optional) label to place at the top of list (if
                     <tt class="literal">required="true"</tt> is also specified then selecting this value will cause a validation error)
                 </p></li><li><p>
                    <tt class="literal">hideNoSelectionLabel</tt> &#8212; if true, the <tt class="literal">noSelectionLabel</tt> will be hidden
                    when a value is selected
                 </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:selectOneMenu value="#{person.age}" 
                 converter="#{converters.ageConverter}"&gt;
  &lt;s:selectItems value="#{ages}" var="age" label="#{age}" /&gt;
&lt;/h:selectOneMenu&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:span&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              Render a HTML <tt class="literal">&lt;span&gt;</tt>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:span styleClass="required" rendered="#{required}"&gt;*&lt;/s:span&gt;</pre></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:taskId&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
                Add the task id to an output link (or similar JSF control), when the
                task is available via <tt class="literal">#{task}</tt>.
              </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
                None.
            </p></td></tr><tr><td valign="top"><p>
              <tt class="literal">&lt;s:validate&gt;</tt>
            </p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              A non-visual control, validates a JSF input field against the bound
              property using Hibernate Validator.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:inputText id="userName" required="true" 
             value="#{customer.userName}"&gt;
  &lt;s:validate /&gt;
&lt;/h:inputText&gt;
&lt;h:message for="userName" styleClass="error" /&gt;</pre></td></tr><tr><td valign="top"><p><tt class="literal">&lt;s:validateAll&gt;</tt></p></td><td valign="top"><p><span class="emphasis"><em>Description</em></span></p><p>
              A non-visual control, validates all child JSF input fields against their bound
              properties using Hibernate Validator.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;s:validateAll&gt;
  &lt;div class="entry"&gt;
    &lt;h:outputLabel for="username"&gt;Username:&lt;/h:outputLabel&gt;
    &lt;h:inputText id="username" value="#{user.username}" 
                 required="true"/&gt;
    &lt;h:message for="username" styleClass="error" /&gt;
  &lt;/div&gt;
  &lt;div class="entry"&gt;
    &lt;h:outputLabel for="password"&gt;Password:&lt;/h:outputLabel&gt;
    &lt;h:inputSecret id="password" value="#{user.password}" 
                   required="true"/&gt;
    &lt;h:message for="password" styleClass="error" /&gt;
  &lt;/div&gt;
  &lt;div class="entry"&gt;
    &lt;h:outputLabel for="verify"&gt;Verify Password:&lt;/h:outputLabel&gt;
    &lt;h:inputSecret id="verify" value="#{register.verify}" 
                   required="true"/&gt;
    &lt;h:message for="verify" styleClass="error" /&gt;
  &lt;/div&gt;
&lt;/s:validateAll&gt;</pre></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="controls.annotations"></a>29.2.&nbsp;Annotations</h2></div></div><div></div></div><p>
    Seam also provides annotations to allow you to use Seam components as JSF
    converters and validators:
    
  </p><div class="variablelist"><dl><dt><span class="term">
        <tt class="literal">@Converter</tt>
      </span></dt><dd><pre class="programlisting">
@Name("fooConverter") 
@BypassInterceptors 
@Converter
public class FooConverter implements Converter {
   
  @Transactional
  public Object getAsObject(FacesContext context, UIComponent cmp, String value) {
    EntityManager entityManager = (EntityManager) Component.getInstance("entityManager");
    entityManager.joinTransaction();
    // Do the conversion
  }
  
  public String getAsString(FacesContext context, UIComponent cmp, Object value) {
    // Do the conversion
  }
  
}</pre><p>
              Registers the Seam component as a JSF converter.  Shown here is a 
              converter which is able to access the JPA EntityManager inside a 
              JTA transaction, when converting the value back to it's object
              representation.
            </p></dd><dt><span class="term">
        <tt class="literal">@Validator</tt>
      </span></dt><dd><pre class="programlisting">
@Name("barValidator") 
@BypassInterceptors 
@Validator
public class BarValidator implements Validator {
   
  public void validate(FacesContext context, UIComponent cmp, Object value)
    throws ValidatorException {
    FooController fooController = (FooController) Component.getInstance("fooController");
    return fooController.validate(value);
  }
  
}</pre><p>
              Registers the Seam component as a JSF validator.  Shown here is a 
              validator which injects another Seam component; the injected 
              component is used to validate the value.
            </p></dd></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="components.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="elenhancements.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;28.&nbsp;Built-in Seam components&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;30.&nbsp;Expression language enhancements</td></tr></table></div></body></html>