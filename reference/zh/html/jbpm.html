<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;7.&nbsp;&#39029;&#38754;&#27969;&#21644;&#19994;&#21153;&#27969;&#31243;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="up" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="previous" href="conversations.html" title="Chapter&nbsp;6.&nbsp;&#23545;&#35805;&#20197;&#21450;&#24037;&#20316;&#21306;&#31649;&#29702;"><link rel="next" href="persistence.html" title="Chapter&nbsp;8.&nbsp;Seam&#21644;&#23545;&#35937;/&#20851;&#31995;&#26144;&#23556;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;7.&nbsp;&#39029;&#38754;&#27969;&#21644;&#19994;&#21153;&#27969;&#31243;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="conversations.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="persistence.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="jbpm"></a>Chapter&nbsp;7.&nbsp;&#39029;&#38754;&#27969;&#21644;&#19994;&#21153;&#27969;&#31243;</h2></div></div><div></div></div><p>
        JBoss jBPM &#26159;&#19968;&#20010;&#21487;&#20197;&#36816;&#34892;&#20110;&#20219;&#20309;Java SE&#25110;EE&#29615;&#22659;&#30340;&#19994;&#21153;&#27969;&#31243;&#31649;&#29702;&#24341;&#25806;&#12290;
		jBPM&#20351;&#29992;&#19968;&#32452;&#33410;&#28857;&#32452;&#25104;&#30340;&#22270;&#24418;&#26469;&#25551;&#36848;&#19968;&#20010;&#19994;&#21153;&#27969;&#31243;&#25110;&#29992;&#25143;&#20132;&#20114;&#36807;&#31243;&#65292;&#36825;&#20123;&#33410;&#28857;&#20998;&#21035;&#34920;&#31034;&#31561;&#24453;&#29366;&#24577;&#12289;&#20915;&#31574;&#12289;&#20219;&#21153;&#12289;Web&#39029;&#38754;&#31561;&#31561;&#12290;
		&#36825;&#20010;&#22270;&#24418;&#20351;&#29992;&#19968;&#31181;&#31616;&#21333;&#30340;&#12289;&#38750;&#24120;&#26131;&#35835;&#30340;&#65292;&#31216;&#20026;jPDL&#30340;XML&#26041;&#35328;&#26469;&#23450;&#20041;&#65292;&#24182;&#19988;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;Eclipse&#25554;&#20214;&#22270;&#24418;&#21270;&#26174;&#31034;&#21644;&#32534;&#36753;&#12290;
		jPDL&#26159;&#19968;&#31181;&#21487;&#25193;&#23637;&#30340;&#35821;&#35328;&#65292;&#36866;&#21512;&#20110;&#35299;&#20915;&#35768;&#22810;&#38382;&#39064;&#65292;&#20174;&#23450;&#20041;Web&#24212;&#29992;&#31243;&#24207;&#39029;&#38754;&#27969;&#21040;&#20256;&#32479;&#30340;&#24037;&#20316;&#27969;&#31649;&#29702;&#65292;&#30452;&#21040;&#22312;SOA&#29615;&#22659;&#20013;&#32452;&#32455;&#26381;&#21153;&#12290;
    </p><p>
		Seam&#24212;&#29992;&#31243;&#24207;&#20351;&#29992;jBPM&#35299;&#20915;&#20004;&#20010;&#19981;&#21516;&#30340;&#38382;&#39064;&#65306;
    </p><div class="itemizedlist"><ul type="disc"><li><p>
			&#23450;&#20041;&#21253;&#21547;&#22797;&#26434;&#29992;&#25143;&#20132;&#20114;&#30340;&#39029;&#38754;&#27969;&#65292;jDPL&#27969;&#31243;&#23450;&#20041;&#21487;&#20197;&#29992;&#26469;&#20026;&#19968;&#27425;&#23545;&#35805;&#23450;&#20041;&#39029;&#38754;&#27969;&#12290;
			&#19968;&#27425;Seam&#23545;&#35805;&#21487;&#20197;&#29702;&#35299;&#20026;&#19982;&#19968;&#20010;&#21333;&#19968;&#29992;&#25143;&#36827;&#34892;&#30340;&#19968;&#27425;&#30456;&#20851;&#30340;&#30701;&#26242;&#20132;&#20114;&#12290;
        </p></li><li><p>
            &#23450;&#20041;&#20027;&#25511;&#19994;&#21153;&#27969;&#31243;&#12290;&#19994;&#21153;&#27969;&#31243;&#21487;&#33021;&#26159;&#27178;&#36328;&#22810;&#20010;&#29992;&#25143;&#30340;&#22810;&#27425;&#23545;&#35805;&#12290;&#27969;&#31243;&#30340;&#29366;&#24577;&#34987;&#20445;&#23384;&#22312;jBPM&#25968;&#25454;&#24211;&#20013;&#65292;&#25152;&#20197;&#27969;&#31243;&#34987;&#35748;&#20026;&#26159;&#38271;&#26102;&#38388;&#36816;&#34892;&#30340;&#12290;
			&#21327;&#35843;&#22810;&#20010;&#29992;&#25143;&#30340;&#34892;&#20026;&#36828;&#27604;&#22788;&#29702;&#19968;&#20010;&#21333;&#19968;&#29992;&#25143;&#30340;&#20132;&#20114;&#22797;&#26434;&#24471;&#22810;&#65292;&#23545;&#27492;jBPM&#25552;&#20379;&#20102;&#25104;&#29087;&#30340;&#24037;&#20855;&#26469;&#35299;&#20915;&#20219;&#21153;&#31649;&#29702;&#21644;&#22810;&#36335;&#24182;&#21457;&#25191;&#34892;&#30340;&#38382;&#39064;&#12290;
        </p></li></ul></div><p>
        &#19981;&#35201;&#25226;&#36825;&#20004;&#20010;&#20107;&#24773;&#24324;&#28151;&#20102;&#65281;&#23427;&#20204;&#36816;&#34892;&#22312;&#20004;&#20010;&#38750;&#24120;&#19981;&#21516;&#30340;&#23618;&#38754;&#25110;&#31890;&#24230;&#20013;&#12290;
		<span class="emphasis"><em>&#39029;&#38754;&#27969;Pageflow</em></span>&#12289;<span class="emphasis"><em>&#23545;&#35805;Conversation</em></span> &#21644; <span class="emphasis"><em>&#20219;&#21153;Task</em></span> &#20840;&#37096;&#26469;&#33258;&#20110;&#19968;&#27425;&#19982;&#21333;&#19968;&#29992;&#25143;&#30340;&#21333;&#19968;&#20132;&#20114;&#12290;
		&#32780;&#19968;&#20010;&#19994;&#21153;&#27969;&#31243;&#21017;&#27178;&#36328;&#35768;&#22810;&#20219;&#21153;&#12290;&#36827;&#19968;&#27493;&#35828;&#65292;&#36825;&#20004;&#31181;jBPM&#24212;&#29992;&#26159;&#23436;&#20840;&#27491;&#20132;&#30340;&#65292;&#21487;&#20197;&#22312;&#19968;&#36215;&#20351;&#29992;&#25110;&#26159;&#20998;&#24320;&#21333;&#29420;&#20351;&#29992;&#65292;&#25110;&#32773;&#37117;&#19981;&#29992;&#12290;
    </p><p>
        &#20351;&#29992;Seam&#19981;&#24517;&#20102;&#35299;jDPL&#12290;&#22914;&#26524;&#20320;&#23436;&#20840;&#20048;&#20110;&#20351;&#29992;JSF&#25110;&#26159;Seam&#23548;&#33322;&#35268;&#21017;&#23450;&#20041;&#39029;&#38754;&#27969;&#65292;&#24182;&#19988;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#26356;&#22810;&#30340;&#26159;&#25968;&#25454;&#39537;&#21160;&#32780;&#19981;&#26159;&#27969;&#31243;&#39537;&#21160;&#65292;&#21487;&#33021;&#23601;&#19981;&#38656;&#35201;jBPM&#12290;
		&#20294;&#26159;&#25105;&#20204;&#21457;&#29616;&#65292;&#26681;&#25454;&#19968;&#20010;&#23450;&#20041;&#33391;&#22909;&#30340;&#22270;&#24418;&#32771;&#34385;&#29992;&#25143;&#20132;&#20114;&#26377;&#21161;&#20110;&#25105;&#20204;&#21019;&#24314;&#26356;&#21152;&#26377;&#29983;&#21629;&#21147;&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5598"></a>7.1.&nbsp;Seam&#20013;&#30340;&#39029;&#38754;&#27969;</h2></div></div><div></div></div><p>
			&#22312;Seam&#20013;&#23450;&#20041;&#39029;&#38754;&#27969;&#26377;&#20004;&#31181;&#26041;&#27861;: 
        </p><div class="itemizedlist"><ul type="disc"><li><p>
				&#20351;&#29992;JSF&#25110;&#26159;Seam&#23548;&#33322;&#35268;&#21017; &#8211; <span class="emphasis"><em>&#26080;&#29366;&#24577;&#30340;&#23548;&#33322;&#27169;&#22411;</em></span>
	        </p></li><li><p>
				&#20351;&#29992;jPDL &#8211; <span class="emphasis"><em>&#26377;&#29366;&#24577;&#30340;&#23548;&#33322;&#27169;&#22411;</em></span>
	        </p></li></ul></div><p>
			&#38750;&#24120;&#31616;&#21333;&#30340;&#24212;&#29992;&#31243;&#24207;&#21482;&#38656;&#35201;&#26080;&#29366;&#24577;&#30340;&#23548;&#33322;&#27169;&#22411;&#12290;&#38750;&#24120;&#22797;&#26434;&#30340;&#24212;&#29992;&#31243;&#24207;&#21017;&#24212;&#35813;&#22312;&#19981;&#21516;&#30340;&#22330;&#21512;&#32467;&#21512;&#20351;&#29992;&#36825;&#20004;&#31181;&#27169;&#22411;&#12290;&#27599;&#31181;&#27169;&#22411;&#21508;&#26377;&#20248;&#32570;&#28857;&#12290;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5618"></a>7.1.1.&nbsp;&#20004;&#31181;&#23548;&#33322;&#27169;&#22411;</h3></div></div><div></div></div><p>
            &#26080;&#29366;&#24577;&#30340;&#27169;&#22411;&#23450;&#20041;&#19968;&#31181;&#26144;&#23556;&#65292;&#25226;&#20107;&#20214;&#30340;&#19968;&#32452;&#21629;&#21517;&#30340;&#36923;&#36753;&#32467;&#26524;&#30452;&#25509;&#26144;&#23556;&#21040;&#35270;&#22270;&#30340;&#32467;&#26524;&#39029;&#38754;&#12290;&#23548;&#33322;&#35268;&#21017;&#38500;&#20102;&#35760;&#24405;&#21738;&#20010;&#39029;&#38754;&#26159;&#20107;&#20214;&#26469;&#28304;&#20043;&#22806;&#19981;&#20250;&#20445;&#30041;&#20219;&#20309;&#29366;&#24577;&#12290;
			&#36825;&#24847;&#21619;&#30528;Action&#30417;&#21548;&#26041;&#27861;&#26377;&#26102;&#24517;&#39035;&#36827;&#34892;&#19968;&#20123;&#39029;&#38754;&#27969;&#36716;&#30340;&#22788;&#29702;&#65292;&#22240;&#20026;&#21482;&#26377;&#23427;&#20204;&#33021;&#35775;&#38382;&#21040;&#24212;&#29992;&#31243;&#24207;&#30340;&#24403;&#21069;&#29366;&#24577;&#12290;
        </p><p>
            &#19979;&#38754;&#26159;&#19968;&#20010;&#20351;&#29992;JSF&#23548;&#33322;&#35268;&#21017;&#23450;&#20041;&#39029;&#38754;&#27969;&#30340;&#20363;&#23376;&#65306;
        </p><pre class="programlisting">&lt;navigation-rule&gt;
    &lt;from-view-id&gt;/numberGuess.jsp&lt;/from-view-id&gt;
        
    &lt;navigation-case&gt;
        &lt;from-outcome&gt;guess&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/numberGuess.jsp&lt;/to-view-id&gt;
        &lt;redirect/&gt;
    &lt;/navigation-case&gt;

    &lt;navigation-case&gt;
        &lt;from-outcome&gt;win&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/win.jsp&lt;/to-view-id&gt;
        &lt;redirect/&gt;
    &lt;/navigation-case&gt;
        
    &lt;navigation-case&gt;
        &lt;from-outcome&gt;lose&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/lose.jsp&lt;/to-view-id&gt;
        &lt;redirect/&gt;
    &lt;/navigation-case&gt;

&lt;/navigation-rule&gt;</pre><p>
            &#21516;&#19968;&#20010;&#20363;&#23376;&#65292;&#19979;&#38754;&#20351;&#29992;Seam&#23548;&#33322;&#35268;&#21017;&#23450;&#20041;: 
        </p><pre class="programlisting">&lt;page view-id="/numberGuess.jsp"&gt;
        
    &lt;navigation&gt;
        &lt;rule if-outcome="guess"&gt;
            &lt;redirect view-id="/numberGuess.jsp"/&gt;
        &lt;/rule&gt;
        &lt;rule if-outcome="win"&gt;
            &lt;redirect view-id="/win.jsp"/&gt;
        &lt;/rule&gt;
        &lt;rule if-outcome="lose"&gt;
            &lt;redirect view-id="/lose.jsp"/&gt;
        &lt;/rule&gt;
    &lt;/navigation&gt;

&lt;/page&gt;</pre><p>
            &#22914;&#26524;&#20320;&#35273;&#24471;&#23548;&#33322;&#35268;&#21017;&#36807;&#20110;&#32321;&#29712;&#65292;&#21487;&#20197;&#22312;Action&#30417;&#21548;&#26041;&#27861;&#37324;&#30452;&#25509;&#36820;&#22238;View&#30340;id&#12290;
        </p><pre class="programlisting">public String guess() {
    if (guess==randomNumber) return "/win.jsp";
    if (++guessCount==maxGuesses) return "/lose.jsp";
    return null;
}</pre><p>
            &#27880;&#24847;&#36825;&#20250;&#23548;&#33268;&#19968;&#20010;&#37325;&#23450;&#21521;&#65292;&#29978;&#33267;&#21487;&#20197;&#25351;&#23450;&#35201;&#22312;&#37325;&#23450;&#21521;&#20013;&#20351;&#29992;&#30340;&#19968;&#20123;&#21442;&#25968;&#12290; 
        </p><pre class="programlisting">public String search() {
    return "/searchResults.jsp?searchPattern=#{searchAction.searchPattern}";
}</pre><p>
            &#26377;&#29366;&#24577;&#27169;&#22411;&#22312;&#19968;&#32452;&#20855;&#21517;&#30340;&#12289;&#21512;&#20046;&#36923;&#36753;&#30340;&#24212;&#29992;&#29366;&#24577;&#20043;&#38388;&#23450;&#20041;&#19968;&#32452;&#37325;&#23450;&#21521;&#12290;
			&#22312;&#36825;&#31181;&#27169;&#22411;&#20013;&#65292;&#21487;&#20197;&#23436;&#20840;&#20351;&#29992;jPDL&#39029;&#38754;&#27969;&#23450;&#20041;&#26469;&#34920;&#31034;&#20219;&#24847;&#29992;&#25143;&#30340;&#20132;&#20114;&#27969;&#31243;&#65292;&#24182;&#22312;&#32534;&#20889;Action&#30417;&#21548;&#26041;&#27861;&#23436;&#20840;&#19981;&#24517;&#30693;&#36947;&#29992;&#25143;&#30340;&#20132;&#20114;&#27969;&#31243;&#12290;
        </p><p>
			&#19979;&#38754;&#26159;&#19968;&#20010;&#20351;&#29992;jPDL&#23450;&#20041;&#39029;&#38754;&#27969;&#30340;&#20363;&#23376;&#65306; 
        </p><pre class="programlisting">&lt;pageflow-definition name="numberGuess"&gt;
    
   &lt;start-page name="displayGuess" view-id="/numberGuess.jsp"&gt;
      &lt;redirect/&gt;
      &lt;transition name="guess" to="evaluateGuess"&gt;
      	&lt;action expression="#{numberGuess.guess}" /&gt;
      &lt;/transition&gt;
   &lt;/start-page&gt;
   
   &lt;decision name="evaluateGuess" expression="#{numberGuess.correctGuess}"&gt;
      &lt;transition name="true" to="win"/&gt;
      &lt;transition name="false" to="evaluateRemainingGuesses"/&gt;
   &lt;/decision&gt;
   
   &lt;decision name="evaluateRemainingGuesses" expression="#{numberGuess.lastGuess}"&gt;
      &lt;transition name="true" to="lose"/&gt;
      &lt;transition name="false" to="displayGuess"/&gt;
   &lt;/decision&gt;
   
   &lt;page name="win" view-id="/win.jsp"&gt;
      &lt;redirect/&gt;
      &lt;end-conversation /&gt;
   &lt;/page&gt;
   
   &lt;page name="lose" view-id="/lose.jsp"&gt;
      &lt;redirect/&gt;
      &lt;end-conversation /&gt;
   &lt;/page&gt;
   
&lt;/pageflow-definition&gt;</pre><div class="mediaobject" align="center"><img src="images/plugin-jbpm-numguess.png" align="middle"></div><p>
			&#36825;&#37324;&#25105;&#20204;&#39532;&#19978;&#27880;&#24847;&#21040;&#20102;&#20004;&#20214;&#20107;&#65306;
        </p><div class="itemizedlist"><ul type="disc"><li><p>
				JSF/Seam&#23548;&#33322;&#35268;&#21017; <span class="emphasis"><em>&#26356;&#21152;</em></span> &#31616;&#21333;&#12290;&#65288;&#28982;&#32780;&#65292;&#38544;&#34255;&#22312;&#21518;&#38754;&#30340;Java&#20195;&#30721;&#20250;&#30456;&#24403;&#22797;&#26434;&#12290;&#65289;
	        </p></li><li><p>
				jPDL&#35753;&#29992;&#25143;&#20132;&#20114;&#30340;&#36807;&#31243;&#31435;&#21051;&#21464;&#24471;&#30452;&#25509;&#26131;&#25026;&#65292;&#25105;&#20204;&#29978;&#33267;&#19981;&#38656;&#35201;&#32771;&#34385;JSP&#25110;Java&#20195;&#30721;&#12290;
	        </p></li></ul></div><p>
	        &#21478;&#22806;&#65292;&#26377;&#29366;&#24577;&#27169;&#22411;&#26356;&#21152; <span class="emphasis"><em>&#21463;&#32422;&#26463;</em></span> &#12290;&#23545;&#20110;&#27599;&#19968;&#31181;&#36923;&#36753;&#29366;&#24577;&#65288;&#39029;&#38754;&#27969;&#20013;&#30340;&#27599;&#19968;&#27493;&#65289;&#32780;&#35328;&#65292;&#37117;&#23384;&#22312;&#19968;&#32452;&#21463;&#38480;&#30340;&#21487;&#33021;&#36716;&#21040;&#20854;&#20182;&#29366;&#24577;&#30340;&#37325;&#23450;&#21521;&#12290;
			&#32780;&#26080;&#29366;&#24577;&#27169;&#22411;&#21017;&#26159;&#19968;&#31181; <span class="emphasis"><em>&#23454;&#26102;&#30340;</em></span> &#27169;&#22411;&#65292;&#23427;&#36866;&#29992;&#20110;&#30456;&#23545;&#19981;&#21463;&#32422;&#26463;&#30340;&#12289;&#24418;&#24335;&#33258;&#30001;&#30340;&#23548;&#33322;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#30001;&#29992;&#25143;&#20915;&#23450;&#20182;&#65295;&#22905;&#19979;&#19968;&#27493;&#24819;&#37325;&#23450;&#21521;&#21040;&#21738;&#37324;&#65292;&#32780;&#19981;&#26159;&#24212;&#29992;&#31243;&#24207;&#12290;
	    </p><p>
	        &#26377;&#29366;&#24577;&#21644;&#26080;&#29366;&#24577;&#23548;&#33322;&#20043;&#38388;&#30340;&#24046;&#21035;&#19982;&#20256;&#32479;&#30340;&#27169;&#24577;&#21644;&#38750;&#27169;&#24577;&#20132;&#20114;&#35270;&#22270;&#20043;&#38388;&#30340;&#24046;&#21035;&#24456;&#31867;&#20284;&#12290;
			&#29616;&#22312;&#65292;Seam&#24212;&#29992;&#31243;&#24207;&#36890;&#24120;&#19981;&#26159;&#27169;&#24577;&#30340;&#65292;&#31616;&#21333;&#22320;&#35828; &#65293;&#65293; &#30340;&#30830;&#65292;&#20351;&#29992;&#23545;&#35805;&#30340;&#19968;&#20010;&#20027;&#35201;&#21407;&#22240;&#23601;&#26159;&#36991;&#20813;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#27169;&#24577;&#34892;&#20026;&#65281;
			&#28982;&#32780;&#65292;&#22312;&#19968;&#20010;&#20855;&#20307;&#23545;&#35805;&#30340;&#32423;&#21035;&#37324;Seam&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#26159;&#65288;&#29978;&#33267;&#32463;&#24120;&#26159;&#65289;&#27169;&#24577;&#30340;&#12290;
			&#20247;&#25152;&#21608;&#30693;&#65292;&#24212;&#35813;&#23613;&#21487;&#33021;&#22320;&#36991;&#20813;&#27169;&#24577;&#34892;&#20026;&#65307;&#39044;&#30693;&#29992;&#25143;&#24819;&#35201;&#20570;&#20107;&#30340;&#39034;&#24207;&#26159;&#38750;&#24120;&#22256;&#38590;&#30340;&#65281;&#28982;&#32780;&#65292;&#27627;&#26080;&#30097;&#38382;&#65292;&#26377;&#29366;&#24577;&#27169;&#22411;&#20063;&#26159;&#38656;&#35201;&#30340;&#12290;
	    </p><p>
			&#36825;&#20004;&#31181;&#27169;&#22411;&#20043;&#38388;&#30340;&#26368;&#22823;&#19981;&#21516;&#26159;&#21518;&#36864;&#25353;&#38062;&#34892;&#20026;&#12290;
	    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5674"></a>7.1.2.&nbsp;Seam&#21644;&#21518;&#36864;&#25353;&#38062;</h3></div></div><div></div></div><p>
	        &#24403;&#20351;&#29992;JSF&#25110;Seam&#23548;&#33322;&#35268;&#21017;&#26102;&#65292;Seam&#20801;&#35768;&#29992;&#25143;&#36890;&#36807;&#21518;&#36864;&#12289;&#21069;&#36827;&#21644;&#21047;&#26032;&#25353;&#38062;&#33258;&#30001;&#22320;&#23548;&#33322;&#12290;&#24403;&#29992;&#25143;&#26377;&#20197;&#19978;&#25805;&#20316;&#26102;&#65292;&#24212;&#29992;&#31243;&#24207;&#30340;&#32844;&#36131;&#26159;&#30830;&#20445;&#21457;&#29983;&#23545;&#35805;&#29366;&#24577;&#30340;&#20869;&#37096;&#20445;&#25345;&#19968;&#33268;&#12290;
			&#35768;&#22810;&#24320;&#21457;&#32773;&#37117;&#23558;Web&#24212;&#29992;&#26694;&#26550;&#20363;&#22914;Struts&#25110;WebWork &#65293;&#65293; &#23427;&#20204;&#19981;&#25903;&#25345;&#23545;&#35805;&#27169;&#22411; &#65293;&#65293; &#21644;&#26080;&#29366;&#24577;&#32452;&#20214;&#27169;&#22411;&#20363;&#22914;EJB&#26080;&#29366;&#24577;Session Beans&#25110;Spring&#26694;&#26550;&#30456;&#32467;&#21512;&#36807;&#65292;&#36825;&#20351;&#24471;&#20182;&#20204;&#35748;&#20026;&#36825;&#20960;&#20046;&#26159;&#19981;&#21487;&#33021;&#30340;&#19968;&#20214;&#20107;&#12290;
			&#28982;&#32780;&#65292;&#23601;&#25105;&#20204;&#30340;&#32463;&#39564;&#65292;&#22312;Seam&#30340;&#19978;&#19979;&#25991;&#20013;&#65292;&#23384;&#22312;&#19968;&#20010;&#23450;&#20041;&#33391;&#22909;&#30340;&#23545;&#35805;&#27169;&#22411;&#65292;&#22522;&#20110;&#26377;&#29366;&#24577;&#30340;Session Bean&#65292;&#23454;&#29616;&#20250;&#35805;&#29366;&#24577;&#30340;&#20869;&#37096;&#19968;&#33268;&#23454;&#38469;&#19978;&#38750;&#24120;&#23481;&#26131;&#12290;
			&#36890;&#24120;&#65292;&#22312;Action&#30417;&#21548;&#26041;&#27861;&#30340;&#24320;&#22987;&#25226; <tt class="literal">no-conversation-view-id</tt> &#30340;&#20351;&#29992;&#21644;null&#26816;&#26597;&#32467;&#21512;&#36215;&#26469;&#26159;&#24456;&#31616;&#21333;&#30340;&#12290;
			&#25105;&#20204;&#35748;&#20026;&#25903;&#25345;&#33258;&#30001;&#23548;&#33322;&#23558;&#20960;&#20046;&#24635;&#26159;&#21487;&#34892;&#30340;&#12290;
	    </p><p>
			&#26082;&#28982;&#22914;&#27492;&#65292;<tt class="literal">pages.xml</tt> &#20013;&#23601;&#21253;&#21547;&#19968;&#20010; <tt class="literal">no-conversation-view-id</tt> &#22768;&#26126;&#12290;
			&#23427;&#21578;&#35785;Seam&#65292;&#22914;&#26524;&#22312;&#19968;&#20010;&#23545;&#35805;&#24403;&#20013;&#26377;&#19968;&#20010;&#39029;&#38754;&#28210;&#26579;&#30340;&#35831;&#27714;&#65292;&#32780;&#36825;&#20010;&#23545;&#35805;&#19981;&#20877;&#23384;&#22312;&#65292;&#23601;&#37325;&#23450;&#21521;&#21040;&#19968;&#20010;&#19981;&#21516;&#30340;&#39029;&#38754;&#12290;
	    </p><pre class="programlisting">&lt;page view-id="/checkout.xhtml" 
        no-conversation-view-id="/main.xhtml"/&gt;</pre><p>
	        &#21478;&#19968;&#26041;&#38754;&#65292;&#22312;&#26377;&#29366;&#24577;&#30340;&#27169;&#22411;&#20013;&#65292;&#21518;&#36864;&#25353;&#38062;&#34987;&#35748;&#20026;&#26159;&#19968;&#20010;&#36820;&#22238;&#21069;&#19968;&#29366;&#24577;&#30340;&#26410;&#23450;&#20041;&#36339;&#36716;&#12290;
			&#22240;&#20026;&#26377;&#29366;&#24577;&#27169;&#22411;&#24378;&#36843;&#24403;&#21069;&#29366;&#24577;&#24517;&#39035;&#26377;&#19968;&#32452;&#26126;&#30830;&#23450;&#20041;&#30340;&#36339;&#36716;&#65292;&#25152;&#20197;&#21518;&#36864;&#25353;&#38062;&#22312;&#26377;&#29366;&#24577;&#27169;&#22411;&#20013;&#26159;&#34987;&#40664;&#35748;&#31105;&#27490;&#30340;&#65281;
            Seam&#26126;&#30830;&#22320;&#30417;&#27979;&#21040;&#21518;&#36864;&#25353;&#38062;&#30340;&#20351;&#29992;&#65292;&#24182;&#19988;&#38459;&#27490;&#25191;&#34892;&#21069;&#19968;&#20010;Action&#21644;&#35775;&#38382;&#36807;&#26399;&#30340;&#39029;&#38754;&#65292;&#32780;&#21518;&#31616;&#21333;&#22320;&#23558;&#29992;&#25143;&#37325;&#23450;&#21521;&#22238;&#24403;&#21069;&#39029;&#38754;&#65288;&#24182;&#19988;&#26174;&#31034;&#19968;&#20010;&#28040;&#24687;&#65289;&#12290;
			&#36825;&#21040;&#24213;&#26159;&#26377;&#29366;&#24577;&#27169;&#22411;&#30340;&#19968;&#20010;&#29305;&#24615;&#36824;&#26159;&#19968;&#20010;&#38480;&#21046;&#65292;&#21017;&#21462;&#20915;&#20110;&#20320;&#22312;&#20854;&#20013;&#30340;&#35282;&#33394;&#65306;&#20316;&#20026;&#19968;&#20010;&#24320;&#21457;&#32773;&#65292;&#36825;&#26159;&#19968;&#20010;&#29305;&#24615;&#65307;
			&#20316;&#20026;&#29992;&#25143;&#65292;&#36825;&#21487;&#33021;&#26159;&#19968;&#20010;&#38480;&#21046;&#65281;&#21487;&#20197;&#20026;&#19968;&#20123;&#29305;&#27530;&#30340;Page&#33410;&#28857;&#35774;&#32622; <tt class="literal">back="enabled"</tt> &#23646;&#24615;&#65292;&#20174;&#32780;&#20801;&#35768;&#21518;&#36864;&#25353;&#38062;&#23548;&#33322;&#12290;
	    </p><pre class="programlisting">&lt;page name="checkout" 
        view-id="/checkout.xhtml" 
        back="enabled"&gt;
    &lt;redirect/&gt;
    &lt;transition to="checkout"/&gt;
    &lt;transition name="complete" to="complete"/&gt;
&lt;/page&gt;</pre><p>
            &#36825;&#20010;&#37197;&#32622;&#20801;&#35768;&#20351;&#29992;&#21518;&#36864;&#25353;&#38062; <span class="emphasis"><em>&#20174;</em></span> <tt class="literal">checkout</tt> &#29366;&#24577;&#36716;&#21040; <span class="emphasis"><em>&#20219;&#24847;&#21069;&#19968;&#20010;&#29366;&#24577;</em></span>&#65281;
        </p><p>
            &#24403;&#28982;&#65292;&#22914;&#26524;&#22312;&#19968;&#20010;&#39029;&#38754;&#27969;&#20013;&#26377;&#19968;&#20010;&#39029;&#38754;&#28210;&#26579;&#30340;&#35831;&#27714;&#65292;&#24182;&#19988;&#36825;&#20010;&#39029;&#38754;&#27969;&#30340;&#23545;&#35805;&#19981;&#20877;&#23384;&#22312;&#65292;&#25105;&#20204;&#20381;&#28982;&#38656;&#35201;&#20915;&#23450;&#22914;&#20309;&#22788;&#29702;&#36825;&#31181;&#24773;&#20917;&#12290;
			&#26082;&#28982;&#36825;&#26679;&#65292;&#38656;&#35201;&#22312;&#39029;&#38754;&#27969;&#23450;&#20041;&#20013;&#21253;&#25324;&#19968;&#20010; <tt class="literal">no-conversation-view-id</tt> &#22768;&#26126;&#65306;
        </p><pre class="programlisting">&lt;page name="checkout" 
        view-id="/checkout.xhtml" 
        back="enabled" 
        no-conversation-view-id="/main.xhtml"&gt;
    &lt;redirect/&gt;
    &lt;transition to="checkout"/&gt;
    &lt;transition name="complete" to="complete"/&gt;
&lt;/page&gt;</pre><p>
			&#22312;&#23454;&#36341;&#20013;&#65292;&#36825;&#20004;&#31181;&#23548;&#33322;&#27169;&#22411;&#37117;&#26377;&#23427;&#20204;&#33258;&#24049;&#30340;&#29992;&#22788;&#65292;&#20320;&#23558;&#24456;&#24555;&#23398;&#20250;&#22914;&#20309;&#22312;&#36825;&#20004;&#31181;&#27169;&#22411;&#20043;&#38388;&#20570;&#20986;&#36873;&#25321;&#12290;
	        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5719"></a>7.2.&nbsp;&#20351;&#29992;jPDL&#39029;&#38754;&#27969;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5722"></a>7.2.1.&nbsp;&#23433;&#35013;&#39029;&#38754;&#27969;</h3></div></div><div></div></div><p>
            &#25105;&#20204;&#38656;&#35201;&#23433;&#35013;Seam jBPM&#30456;&#20851;&#30340;&#32452;&#20214;&#65292;&#24182;&#19988;&#21578;&#35785;&#23427;&#20204;&#22312;&#21738;&#37324;&#25214;&#21040;&#39029;&#38754;&#27969;&#23450;&#20041;&#12290;&#25105;&#20204;&#21487;&#20197;&#22312; <tt class="literal">components.xml</tt> &#37197;&#32622;&#25991;&#20214;&#20013;&#25351;&#23450;&#36825;&#20010;&#37197;&#32622;&#12290;
        </p><pre class="programlisting">&lt;bpm:jbpm&gt;
    &lt;bpm:pageflow-definitions&gt;
        &lt;value&gt;pageflow.jpdl.xml&lt;/value&gt;
    &lt;/bpm:pageflow-definitions&gt;
&lt;/bpm:jbpm&gt;</pre><p>
			&#31532;&#19968;&#34892;&#23433;&#35013;jBPM&#65292;&#31532;&#20108;&#34892;&#25351;&#21521;&#19968;&#20010;&#22522;&#20110;jPDL&#30340;&#39029;&#38754;&#27969;&#23450;&#20041;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5734"></a>7.2.2.&nbsp;&#24320;&#22987;&#39029;&#38754;&#27969;</h3></div></div><div></div></div><p>
			&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#22312; <tt class="literal">@Begin</tt>&#12289;<tt class="literal">@BeginTask</tt> &#25110; <tt class="literal">@StartTask</tt>&#12288;&#30340;&#27880;&#35299;&#20013;&#25351;&#23450;&#27969;&#31243;&#23450;&#20041;&#30340;&#21517;&#23383;&#26469;&#8220;&#21551;&#21160;&#8221;&#19968;&#20010;&#22522;&#20110;jPDL&#30340;&#39029;&#38754;&#27969;&#12290;
        </p><pre class="programlisting">@Begin(pageflow="numberguess")
public void begin() { ... }</pre><p>
			&#20316;&#20026;&#36873;&#25321;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992;pages.xml&#26469;&#21551;&#21160;&#19968;&#20010;&#39029;&#38754;&#27969;:
		</p><pre class="programlisting">&lt;page&gt;
        &lt;begin-conversation pageflow="numberguess"/&gt;
    &lt;/page&gt;</pre><p>
			&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#22914;&#26524;&#25105;&#20204;&#22312;&#28210;&#26579;&#38454;&#27573; <tt class="literal">RENDER_RESPONSE</tt> &#38454;&#27573;&#8212;
			&#20363;&#22914;&#65292;&#22312;&#19968;&#20010; <tt class="literal">@Factory</tt> &#25110; <tt class="literal">@Create</tt> &#26041;&#27861;&#20013; -- &#21551;&#21160;&#19968;&#20010;&#39029;&#38754;&#27969;&#65292;&#37027;&#23601;&#24847;&#21619;&#30528;&#25105;&#20204;&#24050;&#32463;&#22788;&#22312;&#24050;&#20135;&#29983;&#30340;&#39029;&#38754;&#20013;&#65292;&#23601;&#35201;&#20351;&#29992;&#39029;&#38754;&#27969;&#20013;&#30340; <tt class="literal">&lt;start-page&gt;</tt> &#33410;&#28857;&#20316;&#20026;&#39029;&#38754;&#27969;&#30340;&#31532;&#19968;&#20010;&#33410;&#28857;&#65292;&#22914;&#19978;&#20363;&#31034;&#25152;&#31034;&#12290;
        </p><p>
            &#20294;&#26159;&#22914;&#26524;&#36825;&#20010;&#39029;&#38754;&#27969;&#20316;&#20026;&#19968;&#20010;Action&#30417;&#21548;&#22120;&#30340;&#25191;&#34892;&#32467;&#26524;&#32780;&#21551;&#21160;&#30340;&#35805;&#65292;&#36825;&#20010;action&#30417;&#21548;&#22120;&#30340;&#32467;&#26524;&#21017;&#23558;&#20915;&#23450;&#21738;&#20010;&#39029;&#38754;&#20316;&#20026;&#31532;&#19968;&#20010;&#34987;&#28210;&#26579;&#30340;&#39029;&#38754;&#12290;
			&#26082;&#28982;&#36825;&#26679;&#65292;&#25105;&#20204;&#22312;&#39029;&#38754;&#27969;&#20013;&#20351;&#29992;&#19968;&#20010; <tt class="literal">&lt;start-state&gt;</tt> &#20316;&#20026;&#31532;&#19968;&#20010;&#33410;&#28857;&#65292;&#24182;&#19988;&#20026;&#27599;&#19968;&#20010;&#21487;&#33021;&#30340;&#32467;&#26524;&#22768;&#26126;&#19968;&#20010;&#36339;&#36716;&#12290;
        </p><pre class="programlisting">&lt;pageflow-definition name="viewEditDocument"&gt;

    &lt;start-state name="start"&gt;
        &lt;transition name="documentFound" to="displayDocument"/&gt;
        &lt;transition name="documentNotFound" to="notFound"/&gt;
    &lt;/start-state&gt;
    
    &lt;page name="displayDocument" view-id="/document.jsp"&gt;
        &lt;transition name="edit" to="editDocument"/&gt;
        &lt;transition name="done" to="main"/&gt;
    &lt;/page&gt;
    
    ...
    
    &lt;page name="notFound" view-id="/404.jsp"&gt;
        &lt;end-conversation/&gt;
    &lt;/page&gt;
    
&lt;/pageflow-definition&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5775"></a>7.2.3.&nbsp;&#39029;&#38754;&#33410;&#28857;&#21644;&#36339;&#36716;</h3></div></div><div></div></div><p>
            &#27599;&#19968;&#20010; <tt class="literal">&lt;page&gt;</tt> &#33410;&#28857;&#25551;&#32472;&#19968;&#31181;&#29366;&#24577;&#65292;&#22312;&#35813;&#29366;&#24577;&#19979;&#31995;&#32479;&#31561;&#24453;&#29992;&#25143;&#30340;&#36755;&#20837;&#65306;
        </p><pre class="programlisting">&lt;page name="displayGuess" view-id="/numberGuess.jsp"&gt;
    &lt;redirect/&gt;
    &lt;transition name="guess" to="evaluateGuess"&gt;
        &lt;action expression="#{numberGuess.guess}" /&gt;
    &lt;/transition&gt;
&lt;/page&gt;</pre><p>
            &#20854;&#20013;&#30340; <tt class="literal">view-id</tt> &#26159;&#19968;&#20010;JSF &#35270;&#22270;id&#12290;
			<tt class="literal">&lt;redirect/&gt;</tt> &#20803;&#32032;&#36319;JSF&#23548;&#33322;&#35268;&#21017;&#20013;&#30340; <tt class="literal">&lt;redirect/&gt;</tt> &#26377;&#30456;&#21516;&#30340;&#20316;&#29992;&#65306;
			&#21363;&#65292;&#19968;&#20010;post-then-redirect&#65288;&#25552;&#20132;&#21518;&#36339;&#36716;&#65289;&#34892;&#20026;&#65292;&#36825;&#26679;&#20570;&#26159;&#20026;&#20102;&#38450;&#27490;&#29992;&#25143;&#28857;&#20987;&#20102;&#27983;&#35272;&#22120;&#30340;&#21047;&#26032;&#25353;&#38062;&#36827;&#34892;&#37325;&#22797;&#21047;&#26032;&#12290;
			&#65288;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;Seam&#20250;&#22312;&#36825;&#20123;&#27983;&#35272;&#22120;&#37325;&#23450;&#21521;&#20013;&#20445;&#23384;&#23545;&#35805;&#30340;&#19978;&#19979;&#25991;&#65292;&#25152;&#20197;&#22312;Seam&#20013;&#19981;&#38656;&#35201;&#31867;&#20284;ROR&#65288;Ruby On Rails&#65289;&#39118;&#26684;&#30340;&#8221;flash&#8221;&#26500;&#36896;&#65281;&#65289;
        </p><p>
            &#36339;&#36716;&#30340;&#21517;&#23383;&#26159;&#19968;&#20010;JSF&#36755;&#20986;&#30340;&#21517;&#23383;&#65292;&#22312; <tt class="literal">numberGuess.jsp</tt> &#20013;&#36890;&#36807;&#28857;&#20987;&#19968;&#20010;Command&#25353;&#38062;&#25110;&#26159;Command&#38142;&#25509;&#35302;&#21457;&#36825;&#20010;&#36339;&#36716;&#12290;
        </p><pre class="programlisting">&lt;h:commandButton type="submit" value="Guess" action="guess"/&gt;</pre><p>
            &#24403;&#28857;&#20987;&#36825;&#20010;&#25353;&#38062;&#35302;&#21457;&#36825;&#20010;&#36339;&#36716;&#20043;&#21518;&#65292;jBPM&#23558;&#20250;&#36890;&#36807;&#35843;&#29992; <tt class="literal">numberGuess</tt> &#32452;&#20214;&#30340; <tt class="literal">guess()</tt> &#26041;&#27861;&#28608;&#27963;&#36339;&#36716;Action&#12290;
			&#27880;&#24847;&#21040;jPDL&#20013;&#29992;&#20110;&#25351;&#23450;Action&#30340;&#35821;&#27861;&#31867;&#20284;&#20110;JSF&#30340;EL&#34920;&#36798;&#24335;&#65292;&#24182;&#19988;&#36825;&#20010;&#36339;&#36716;&#30340;Action Handler&#19981;&#36807;&#26159;Seam&#24403;&#21069;&#19978;&#19979;&#25991;&#20013;&#30340;&#19968;&#20010;&#32452;&#20214;&#37324;&#30340;&#19968;&#20010;&#26041;&#27861;&#12290;
			&#21516;JSF&#20107;&#20214;&#19968;&#26679;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;jBPM&#20013;&#25317;&#26377;&#23436;&#20840;&#30456;&#21516;&#30340;&#20107;&#20214;&#27169;&#22411;&#65281;&#65288;<span class="emphasis"><em>&#21516;&#19968;&#31867;&#22411;</em></span>&#20934;&#21017;&#65289;
        </p><p>
            &#22312;&#27809;&#26377;&#25351;&#23450;&#36755;&#20986;&#30340;&#24773;&#20917;&#19979;&#65288;&#20363;&#22914;&#65292;&#19968;&#20010;Command&#25353;&#38062;&#27809;&#26377;&#23450;&#20041; <tt class="literal">action</tt> &#23646;&#24615;&#65289;&#65292;
			&#22914;&#26524;&#23384;&#22312;&#27809;&#26377;&#25351;&#23450;name&#30340;&#36339;&#36716;&#65292;Seam&#23558;&#28608;&#27963;&#35813;&#36339;&#36716;&#65292;&#25110;&#32773;&#22914;&#26524;&#25152;&#26377;&#30340;&#36339;&#36716;&#37117;&#26377;name&#30340;&#35805;&#65292;Seam&#31616;&#21333;&#22320;&#37325;&#26032;&#26174;&#31034;&#35813;&#39029;&#12290;
			&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#31245;&#24494;&#22320;&#31616;&#21270;&#31034;&#20363;&#39029;&#38754;&#27969;&#21644;&#36825;&#20010;&#25353;&#38062;&#65306;
        </p><pre class="programlisting">&lt;h:commandButton type="submit" value="Guess"/&gt;</pre><p>
			&#23558;&#28608;&#27963;&#19968;&#20010;&#26410;&#21629;&#21517;&#30340;&#36339;&#36716;&#65306;
        </p><pre class="programlisting">&lt;page name="displayGuess" view-id="/numberGuess.jsp"&gt;
    &lt;redirect/&gt;
    &lt;transition to="evaluateGuess"&gt;
        &lt;action expression="#{numberGuess.guess}" /&gt;
    &lt;/transition&gt;
&lt;/page&gt;</pre><p>
			&#29978;&#33267;&#21487;&#20197;&#36890;&#36807;&#28857;&#20987;&#19968;&#20010;&#25353;&#38062;&#26469;&#25191;&#34892;&#19968;&#20010;Action&#26041;&#27861;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;Action&#25191;&#34892;&#30340;&#32467;&#26524;&#23558;&#20915;&#23450;&#37319;&#29992;&#21738;&#20010;&#36339;&#36716;&#65306;
        </p><pre class="programlisting">&lt;h:commandButton type="submit" value="Guess" action="#{numberGuess.guess}"/&gt;</pre><pre class="programlisting">&lt;page name="displayGuess" view-id="/numberGuess.jsp"&gt;
    &lt;transition name="correctGuess" to="win"/&gt;
    &lt;transition name="incorrectGuess" to="evaluateGuess"/&gt;
&lt;/page&gt;</pre><p>
			&#28982;&#32780;&#65292;&#36825;&#26159;&#19968;&#31181;&#19981;&#21487;&#21462;&#30340;&#26041;&#24335;&#65292;&#22240;&#20026;&#23427;&#25226;&#27969;&#31243;&#25511;&#21046;&#30340;&#32844;&#36131;&#20174;&#39029;&#38754;&#27969;&#23450;&#20041;&#36716;&#21040;&#20102;&#20854;&#20182;&#32452;&#20214;&#12290;&#26368;&#22909;&#36824;&#26159;&#25226;&#36825;&#20123;&#30456;&#20851;&#30340;&#32844;&#36131;&#38598;&#20013;&#21040;&#39029;&#38754;&#27969;&#26412;&#36523;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5833"></a>7.2.4.&nbsp;&#27969;&#31243;&#25511;&#21046;</h3></div></div><div></div></div><p>
            &#36890;&#24120;&#65292;&#25105;&#20204;&#23450;&#20041;&#39029;&#38754;&#27969;&#30340;&#26102;&#20505;&#19981;&#38656;&#35201;&#26356;&#22810;&#24378;&#22823;&#30340;jPDL&#29305;&#24615;&#65292;&#28982;&#32780;&#25105;&#20204;&#36824;&#26159;&#38656;&#35201; <tt class="literal">&lt;decision&gt;</tt> &#33410;&#28857;&#12290;
        </p><pre class="programlisting">&lt;decision name="evaluateGuess" expression="#{numberGuess.correctGuess}"&gt;
    &lt;transition name="true" to="win"/&gt;
    &lt;transition name="false" to="evaluateRemainingGuesses"/&gt;
&lt;/decision&gt;</pre><p>
            &#36890;&#36807;&#22312;Seam&#19978;&#19979;&#25991;&#20013;&#25191;&#34892;&#19968;&#20010;JSF EL&#34920;&#36798;&#24335;&#26469;&#20915;&#23450;&#22914;&#20309;&#36339;&#36716;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5845"></a>7.2.5.&nbsp;&#27969;&#31243;&#30340;&#32467;&#26463;</h3></div></div><div></div></div><p>
            &#20351;&#29992; <tt class="literal">&lt;end-conversation&gt;</tt> &#25110;&#26159; <tt class="literal">@End</tt> &#32467;&#26463;&#23545;&#35805;&#12290;
			&#65288;&#23454;&#38469;&#19978;&#65292;&#20026;&#20102;&#31243;&#24207;&#30340;&#26131;&#35835;&#24615;&#65292;&#40723;&#21169; <span class="emphasis"><em>&#20004;&#32773;&#20849;&#21516;</em></span> &#20351;&#29992;&#12290;&#65289;
        </p><pre class="programlisting">&lt;page name="win" view-id="/win.jsp"&gt;
    &lt;redirect/&gt;
    &lt;end-conversation/&gt;
&lt;/page&gt;</pre><p>
            &#21487;&#36873;&#25321;&#30340;&#65292;&#21487;&#20197;&#25351;&#23450;&#19968;&#20010;jBPM&#30340; <tt class="literal">&#29366;&#24577;&#36716;&#31227;&#65288;transition&#65289;</tt> &#21517;&#23383;&#32467;&#26463;&#19968;&#20010;&#20219;&#21153;&#12290;
			&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;Seam&#23558;&#32473;&#20027;&#25511;&#30340;&#19994;&#21153;&#27969;&#31243;&#21457;&#36865;&#19968;&#20010;&#32467;&#26463;&#24403;&#21069;&#20219;&#21153;&#30340;&#20449;&#21495;&#12290;
        </p><pre class="programlisting">&lt;page name="win" view-id="/win.jsp"&gt;
    &lt;redirect/&gt;
    &lt;end-task transition="success"/&gt;
&lt;/page&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5868"></a>7.2.6.&nbsp;&#39029;&#38754;&#27969;&#32452;&#21512;</h3></div></div><div></div></div><p>
				&#22810;&#20010;&#39029;&#38754;&#27969;&#21487;&#20197;&#36827;&#34892;&#32452;&#21512;&#65292;&#24182;&#24403;&#21478;&#19968;&#20010;&#39029;&#38754;&#27969;&#25191;&#34892;&#26102;&#26242;&#20572;&#19968;&#20010;&#39029;&#38754;&#27969;&#12290;
				&#36825;&#20010; <tt class="literal">&lt;process-state&gt;</tt> &#33410;&#28857;&#30340;&#20316;&#29992;&#23601;&#26159;&#26242;&#20572;&#22806;&#37096;&#30340;&#39029;&#38754;&#27969;&#65292;&#21516;&#26102;&#24320;&#22987;&#25191;&#34892;&#19968;&#20010;&#21629;&#21517;&#30340;&#39029;&#38754;&#27969;&#12290;
            </p><pre class="programlisting">&lt;process-state name="cheat"&gt;
    &lt;sub-process name="cheat"/&gt;
    &lt;transition to="displayGuess"/&gt;
&lt;/process-state&gt;</pre><p>
                &#36825;&#20010;&#20869;&#37096;&#39029;&#38754;&#27969;&#20174; <tt class="literal">&lt;start-state&gt;</tt> &#33410;&#28857;&#24320;&#22987;&#25191;&#34892;&#12290;
				&#24403;&#25191;&#34892;&#21040; <tt class="literal">&lt;end-state&gt;</tt> &#33410;&#28857;&#26102;&#65292;&#20869;&#37096;&#39029;&#38754;&#27969;&#25191;&#34892;&#23436;&#27605;&#65292;&#21516;&#26102;&#22806;&#37096;&#30340;&#39029;&#38754;&#27969;&#20250;&#20197; <tt class="literal">&lt;process-state&gt;</tt> &#23450;&#20041;&#30340;&#36339;&#36716;&#24674;&#22797;&#25191;&#34892;&#12290;
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5889"></a>7.3.&nbsp;Seam&#20013;&#30340;&#19994;&#21153;&#27969;&#31243;&#31649;&#29702;</h2></div></div><div></div></div><p>
            &#19968;&#20010;&#19994;&#21153;&#27969;&#31243;&#30001;&#19968;&#31995;&#21015;&#23450;&#20041;&#33391;&#22909;&#30340;&#20219;&#21153;&#32452;&#25104;&#65292;&#36825;&#20123;&#20219;&#21153;&#24517;&#39035;&#30001;&#29992;&#25143;&#25110;&#26159;&#36719;&#20214;&#31995;&#32479;&#36981;&#29031;&#19968;&#31995;&#21015;&#23450;&#20041;&#33391;&#22909;&#30340;&#35268;&#21017;&#26469;&#23436;&#25104;&#65292;&#36825;&#20123;&#35268;&#21017;&#35268;&#23450;&#20102; <span class="emphasis"><em>&#35841;</em></span> &#21487;&#20197;&#25191;&#34892;&#20219;&#21153;&#65292;<span class="emphasis"><em>&#20160;&#20040;&#26102;&#20505;</em></span> &#24212;&#35813;&#25191;&#34892;&#12290;
			Seam&#23545;jBPM&#30340;&#25972;&#21512;&#20351;&#24471;&#32473;&#29992;&#25143;&#26174;&#31034;&#20219;&#21153;&#21015;&#34920;&#20197;&#21450;&#20351;&#29992;&#25143;&#31649;&#29702;&#20182;&#20204;&#30340;&#20219;&#21153;&#21464;&#24471;&#31616;&#21333;&#12290;
			Seam&#36824;&#20351;&#24212;&#29992;&#31243;&#24207;&#22312; <tt class="literal">BUSINESS_PROCESS</tt> &#30340;&#19978;&#19979;&#25991;&#20013;&#23384;&#20648;&#19982;&#19994;&#21153;&#27969;&#31243;&#30456;&#20851;&#30340;&#29366;&#24577;&#65292;&#36890;&#36807;jBPM&#21464;&#37327;&#26469;&#25345;&#20037;&#21270;&#36825;&#20010;&#29366;&#24577;&#12290;
        </p><p>
            &#19968;&#20010;&#31616;&#21333;&#30340;&#19994;&#21153;&#27969;&#31243;&#23450;&#20041;&#30475;&#36215;&#26469;&#36319;&#39029;&#38754;&#27969;&#23450;&#20041;&#38750;&#24120;&#30456;&#20284;&#65288;<span class="emphasis"><em>&#26159;&#21516;&#19968;&#31181;&#31867;&#22411;&#30340;&#19996;&#35199;</em></span>&#65289;&#65292;&#19981;&#21516;&#30340;&#26159;&#29992; <tt class="literal">&lt;task-node&gt;</tt> &#33410;&#28857;&#26367;&#25442;&#20102; <tt class="literal">&lt;page&gt;</tt> &#33410;&#28857;&#12290;&#22312;&#19968;&#20010;&#38271;&#36816;&#34892;&#26399;&#30340;&#19994;&#21153;&#27969;&#31243;&#20013;&#65292;&#31561;&#24453;&#29366;&#24577;&#34920;&#31034;&#31995;&#32479;&#27491;&#22312;&#31561;&#24453;&#29992;&#25143;&#30331;&#24405;&#24182;&#25191;&#34892;&#20219;&#21153;&#12290;
        </p><pre class="programlisting">&lt;process-definition name="todo"&gt;
   
   &lt;start-state name="start"&gt;
      &lt;transition to="todo"/&gt;
   &lt;/start-state&gt;
   
   &lt;task-node name="todo"&gt;
      &lt;task name="todo" description="#{todoList.description}"&gt;
         &lt;assignment actor-id="#{actor.id}"/&gt;
      &lt;/task&gt;
      &lt;transition to="done"/&gt;
   &lt;/task-node&gt;
   
   &lt;end-state name="done"/&gt;
   
&lt;/process-definition&gt;</pre><div class="mediaobject" align="center"><img src="images/plugin-jbpm-todo.png" align="middle"></div><p>
            &#25105;&#20204;&#24456;&#26377;&#21487;&#33021;&#22312;&#19968;&#20010;&#39033;&#30446;&#20013;&#21516;&#26102;&#20351;&#29992;jPDL&#19994;&#21153;&#27969;&#31243;&#23450;&#20041;&#21644;jPDL&#39029;&#38754;&#27969;&#31243;&#23450;&#20041;&#12290;
			&#22914;&#26524;&#36825;&#26679;&#65292;&#20182;&#20204;&#20108;&#32773;&#30340;&#20851;&#31995;&#26159;&#65306;&#19968;&#20010;&#19994;&#21153;&#27969;&#31243;&#20013;&#30340; <tt class="literal">&lt;task&gt;</tt> &#23545;&#24212;&#19968;&#20010;&#23436;&#25972;&#30340;&#39029;&#38754;&#27969; <tt class="literal">&lt;pageflow-definition&gt;</tt>&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5929"></a>7.4.&nbsp;&#20351;&#29992;jPDL&#19994;&#21153;&#27969;&#31243;&#23450;&#20041;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5932"></a>7.4.1.&nbsp;&#23433;&#35013;&#27969;&#31243;&#23450;&#20041;</h3></div></div><div></div></div><p>
            &#25105;&#20204;&#38656;&#35201;&#23433;&#35013;jBPM&#65292;&#24182;&#19988;&#21578;&#35785;&#23427;&#21040;&#21738;&#37324;&#21487;&#20197;&#25214;&#21040;&#19994;&#21153;&#27969;&#31243;&#23450;&#20041;&#25991;&#20214;&#65306;
        </p><pre class="programlisting">&lt;bpm:jbpm&gt;
    &lt;bpm:process-definitions&gt;
        &lt;value&gt;todo.jpdl.xml&lt;/value&gt;
    &lt;/bpm:process-definitions&gt;
&lt;/bpm:jbpm&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5939"></a>7.4.2.&nbsp;&#21021;&#22987;&#21270;Actor id</h3></div></div><div></div></div><p>
            &#25105;&#20204;&#24635;&#26159;&#38656;&#35201;&#30693;&#36947;&#24403;&#21069;&#30340;&#30331;&#24405;&#29992;&#25143;&#12290;jBPM&#20351;&#29992; <span class="emphasis"><em>actor id</em></span> &#21644; <span class="emphasis"><em>group actor id</em></span> &#8220;&#35782;&#21035;&#8221;&#29992;&#25143;&#12290;
			&#25105;&#20204;&#20351;&#29992;Seam&#20869;&#32622;&#30340; <tt class="literal">actor</tt> &#32452;&#20214;&#25351;&#23450;&#24403;&#21069;&#29992;&#25143;&#30340;id&#12290;
        </p><pre class="programlisting">@In Actor actor;

public String login() {
    ...
    actor.setId( user.getUserName() );
    actor.getGroupActorIds().addAll( user.getGroupNames() );
    ...
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5955"></a>7.4.3.&nbsp;&#21551;&#21160;&#19968;&#20010;&#19994;&#21153;&#27969;&#31243;</h3></div></div><div></div></div><p>
			&#20351;&#29992; <tt class="literal">@CreateProcess</tt> &#27880;&#35299;&#26469;&#21551;&#21160;&#19968;&#20010;&#19994;&#21153;&#27969;&#31243;&#23454;&#20363;&#12290;
        </p><pre class="programlisting">@CreateProcess(definition="todo")
public void createTodo() { ... }</pre><p>
			&#20063;&#21487;&#29992;&#20351;&#29992;pages.xml&#26469;&#21551;&#21160;&#19968;&#20010;&#19994;&#21153;&#27969;&#31243;&#12290;
		</p><pre class="programlisting">&lt;page&gt;
    &lt;create-process definition="todo" /&gt;
&lt;/page&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5969"></a>7.4.4.&nbsp;&#20219;&#21153;&#20998;&#37197;</h3></div></div><div></div></div><p>
            &#24403;&#19968;&#20010;&#27969;&#31243;&#25191;&#34892;&#21040;&#19968;&#20010;&#20219;&#21153;&#33410;&#28857;&#26102;&#65292;&#20250;&#21019;&#24314;&#20219;&#21153;&#23454;&#20363;&#12290;&#36825;&#20123;&#20219;&#21153;&#23454;&#20363;&#24517;&#39035;&#20998;&#37197;&#32473;&#29992;&#25143;&#25110;&#26159;&#29992;&#25143;&#32452;&#12290;&#25105;&#20204;&#21487;&#20197;&#25163;&#21160;&#32534;&#30721;&#25351;&#23450;actor id&#25110;&#26159;&#22996;&#25176;&#32473;&#19968;&#20010;Seam&#32452;&#20214;&#12290;
        </p><pre class="programlisting">&lt;task name="todo" description="#{todoList.description}"&gt;
    &lt;assignment actor-id="#{actor.id}"/&gt;
&lt;/task&gt;</pre><p>
            &#22312;&#36825;&#37324;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#31616;&#21333;&#30340;&#23558;&#20219;&#21153;&#20998;&#37197;&#32473;&#24403;&#21069;&#29992;&#25143;&#12290;&#20063;&#21487;&#20197;&#23558;&#20219;&#21153;&#20998;&#37197;&#32473;&#19968;&#25209;&#29992;&#25143;&#65288;pool actor&#65289;&#65306;
        </p><pre class="programlisting">&lt;task name="todo" description="#{todoList.description}"&gt;
    &lt;assignment pooled-actors="employees"/&gt;
&lt;/task&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5980"></a>7.4.5.&nbsp;&#20219;&#21153;&#21015;&#34920;</h3></div></div><div></div></div><p>
            &#20960;&#20010;&#20869;&#32622;&#30340;Seam&#32452;&#20214;&#20351;&#24471;&#26174;&#31034;&#20219;&#21153;&#21015;&#34920;&#21464;&#24471;&#31616;&#21333;&#12290;<tt class="literal">pooledTaskInstanceList</tt> &#26159;&#19968;&#20010;&#27719;&#38598;&#20219;&#21153;&#38598;&#21512;&#65292;&#29992;&#25143;&#21487;&#20197;&#25226;&#36825;&#20123;&#20219;&#21153;&#20998;&#37197;&#32473;&#20182;&#20204;&#33258;&#24049;&#12290;
        </p><pre class="programlisting">&lt;h:dataTable value="#{pooledTaskInstanceList}" var="task"&gt;
    &lt;h:column&gt;
        &lt;f:facet name="header"&gt;Description&lt;/f:facet&gt;
        &lt;h:outputText value="#{task.description}"/&gt;
    &lt;/h:column&gt;
    &lt;h:column&gt;
        &lt;s:link action="#{pooledTask.assignToCurrentActor}" value="Assign" taskInstance="#{task}"/&gt;
    &lt;/h:column&gt;            	
&lt;/h:dataTable&gt;</pre><p>
            &#35831;&#27880;&#24847;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#26222;&#36890;&#30340;JSF&#26631;&#31614; <tt class="literal">&lt;h:commandLink&gt;</tt> &#26469;&#26367;&#20195; <tt class="literal">&lt;s:link&gt;</tt> &#26631;&#31614;&#65306;
        </p><pre class="programlisting">&lt;h:commandLink action="#{pooledTask.assignToCurrentActor}"&gt; 
    &lt;f:param name="taskId" value="#{task.id}"/&gt;
&lt;/h:commandLink&gt;</pre><p>
            <tt class="literal">pooledTask</tt> &#32452;&#20214;&#26159;&#19968;&#20010;&#20869;&#32622;&#32452;&#20214;&#65292;&#23427;&#31616;&#21333;&#25226;&#20219;&#21153;&#20998;&#37197;&#32473;&#24403;&#21069;&#29992;&#25143;&#12290;
        </p><p>
            <tt class="literal">taskInstanceListForType</tt>&#32452;&#20214;&#21253;&#21547;&#19968;&#31181;&#29305;&#27530;&#31867;&#22411;&#30340;&#20219;&#21153;&#65292;&#36825;&#20123;&#20219;&#21153;&#20998;&#37197;&#32473;&#24403;&#21069;&#29992;&#25143;&#65306;
        </p><pre class="programlisting">&lt;h:dataTable value="#{taskInstanceListForType['todo']}" var="task"&gt;
    &lt;h:column&gt;
        &lt;f:facet name="header"&gt;Description&lt;/f:facet&gt;
        &lt;h:outputText value="#{task.description}"/&gt;
    &lt;/h:column&gt;
    &lt;h:column&gt;
        &lt;s:link action="#{todoList.start}" value="Start Work" taskInstance="#{task}"/&gt;
    &lt;/h:column&gt;            	
&lt;/h:dataTable&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6012"></a>7.4.6.&nbsp;&#25191;&#34892;&#19968;&#20010;&#20219;&#21153;</h3></div></div><div></div></div><p>
            &#25105;&#20204;&#22312;&#30417;&#21548;&#26041;&#27861;&#19978;&#20351;&#29992; <tt class="literal">@StartTask</tt> &#25110;&#32773; <tt class="literal">@BeginTask</tt> &#27880;&#35299;&#26469;&#25191;&#34892;&#19968;&#20010;&#20219;&#21153;&#12290;
        </p><pre class="programlisting">@StartTask
public String start() { ... }</pre><p>
			&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992;pages.xml&#26469;&#25191;&#34892;&#19968;&#20010;&#20219;&#21153;&#12290;
		</p><pre class="programlisting">&lt;page&gt;
    &lt;start-task /&gt;
&lt;/page&gt;</pre><p>    
            &#36825;&#20123;&#27880;&#35299;&#21551;&#21160;&#19968;&#31181;&#29305;&#27530;&#31867;&#22411;&#30340;&#23545;&#35805;&#65292;&#36825;&#20010;&#23545;&#35805;&#22312;&#25972;&#20010;&#19994;&#21153;&#27969;&#31243;&#20013;&#20855;&#26377;&#24847;&#20041;&#12290;&#36890;&#36807;&#35813;&#23545;&#35805;&#21487;&#20197;&#35775;&#38382;&#20445;&#23384;&#22312;&#19994;&#21153;&#27969;&#31243;&#19978;&#19979;&#25991;&#20013;&#30340;&#29366;&#24577;&#12290;
        </p><p>
            &#22914;&#26524;&#25105;&#20204;&#20351;&#29992; <tt class="literal">@EndTask</tt> &#27880;&#35299;&#26469;&#32467;&#26463;&#35813;&#23545;&#35805;&#65292;Seam&#20250;&#21457;&#20986;&#20449;&#21495;&#23436;&#25104;&#35813;&#20219;&#21153;&#12290;
        </p><pre class="programlisting">@EndTask(transition="completed")
public String completed() { ... }</pre><p>
			&#20316;&#20026;&#36873;&#25321;&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#20351;&#29992;pages.xml
		</p><pre class="programlisting">&lt;page&gt;
    &lt;end-task transition="completed" /&gt;
&lt;/page&gt;</pre><p>
            &#20063;&#21487;&#20197;&#20351;&#29992;EL&#22312;pages.xml&#25351;&#23450;transition &#12290;
        </p><p>
            &#27492;&#26102;&#65292;jBPM&#25509;&#21463;&#25351;&#20196;&#24182;&#19988;&#32487;&#32493;&#25191;&#34892;&#19994;&#21153;&#27969;&#31243;&#23450;&#20041;&#12290;&#65288;&#22312;&#26356;&#21152;&#22797;&#26434;&#30340;&#27969;&#31243;&#20013;&#65292;&#22312;&#27969;&#31243;&#21521;&#19979;&#25191;&#34892;&#20043;&#21069;&#65292;&#21487;&#33021;&#36824;&#38656;&#35201;&#23436;&#25104;&#20854;&#20182;&#19968;&#20123;&#20219;&#21153;&#12290;&#65289;
        </p><p>
            &#33509;&#24819;&#23545;jBPM&#22788;&#29702;&#22797;&#26434;&#19994;&#21153;&#27969;&#31243;&#30340;&#39640;&#32423;&#29305;&#24615;&#26377;&#19968;&#20010;&#26356;&#21152;&#24443;&#24213;&#30340;&#35748;&#35782;&#65292;&#35831;&#21442;&#38405;jBPM&#30340;&#21442;&#32771;&#25991;&#26723;&#12290;
            </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="conversations.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="persistence.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;6.&nbsp;&#23545;&#35805;&#20197;&#21450;&#24037;&#20316;&#21306;&#31649;&#29702;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;8.&nbsp;Seam&#21644;&#23545;&#35937;/&#20851;&#31995;&#26144;&#23556;</td></tr></table></div></body></html>