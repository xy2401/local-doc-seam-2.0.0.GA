<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;4.&nbsp;&#37197;&#32622;Seam&#32452;&#20214;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="up" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="previous" href="concepts.html" title="Chapter&nbsp;3.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#32452;&#20214;&#27169;&#22411;"><link rel="next" href="events.html" title="Chapter&nbsp;5.&nbsp;&#20107;&#20214;&#12289;&#25318;&#25130;&#22120;&#21644;&#24322;&#24120;&#22788;&#29702;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;4.&nbsp;&#37197;&#32622;Seam&#32452;&#20214;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="concepts.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="events.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="xml"></a>Chapter&nbsp;4.&nbsp;&#37197;&#32622;Seam&#32452;&#20214;</h2></div></div><div></div></div><p>
        	Seam&#25152;&#23815;&#23578;&#30340;&#21746;&#23398;&#26159;XML&#37197;&#32622;&#26368;&#23567;&#21270;&#12290;&#19981;&#36807;&#65292;&#22522;&#20110;&#19981;&#21516;&#30340;&#21407;&#22240;&#65292;&#25105;&#20204;&#26377;&#26102;&#20505;&#36824;&#26159;&#35201;&#21033;&#29992;XML&#26469;&#37197;&#32622;Seam&#32452;&#20214;&#12290;&#36825;&#20123;&#21407;&#22240;&#21253;&#25324;&#65306;
            &#23558;Java&#20195;&#30721;&#19982;&#29305;&#23450;&#20110;&#37096;&#32626;&#30340;&#20449;&#24687;&#20998;&#31163;&#65307;&#35201;&#24314;&#31435;&#21487;&#37325;&#29992;&#30340;&#26694;&#26550;&#65307;&#37197;&#32622;Seam&#30340;&#20869;&#32622;&#21151;&#33021;&#31561;&#31561;&#12290;
            Seam&#25552;&#20379;&#20102;&#20004;&#31181;&#22522;&#26412;&#30340;&#37197;&#32622;&#32452;&#20214;&#26041;&#27861;&#65306;&#36890;&#36807;&#22312;properties&#25991;&#20214;&#25110;&#32773; <tt class="literal">web.xml</tt> &#20013;&#35774;&#32622;&#23646;&#24615;&#26469;&#37197;&#32622;&#65292;
            &#25110;&#32773;&#36890;&#36807; <tt class="literal">components.xml</tt> &#36827;&#34892;&#37197;&#32622;&#12290;
        </p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3808"></a>4.1.&nbsp;&#36890;&#36807;&#23646;&#24615;&#35774;&#32622;&#26469;&#37197;&#32622;&#32452;&#20214;</h2></div></div><div></div></div><p>
            	Seam&#32452;&#20214;&#30340;&#37197;&#32622;&#23646;&#24615;&#21487;&#20197;&#36890;&#36807;&#20004;&#31181;&#26041;&#24335;&#24471;&#21040;&#65306;&#36890;&#36807;servlet context&#21442;&#25968;&#65292;&#25110;&#32773;&#36890;&#36807;&#20301;&#20110;classpath&#19979;&#30340; <tt class="literal">seam.properties</tt> &#23646;&#24615;&#25991;&#20214;&#36827;&#34892;&#12290;
            </p><p> 
            	&#21487;&#37197;&#32622;&#30340;Seam&#32452;&#20214;&#24517;&#39035;&#20026;&#21487;&#37197;&#32622;&#30340;&#23646;&#24615;&#26292;&#38706;JavaBean&#39118;&#26684;&#30340;&#23646;&#24615;setter&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#21517;&#20026; <tt class="literal">com.jboss.myapp.settings</tt>
            	&#30340;Seam&#32452;&#20214;&#25317;&#26377;&#19968;&#20010;&#21517;&#20026; <tt class="literal">setLocale()</tt> &#30340;setter&#26041;&#27861;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312; <tt class="literal">seam.properties</tt> &#25991;&#20214;&#20013;&#25552;&#20379;&#19968;&#20010;&#21517;&#20026;
            	<tt class="literal">com.jboss.myapp.settings.locale</tt> &#30340;&#23646;&#24615;&#65292;&#25110;&#32773;&#20316;&#20026;&#19968;&#20010;servlet context&#21442;&#25968;&#65292;
            	&#36825;&#26679;&#65292;&#19968;&#26086;&#35813;&#32452;&#20214;&#34987;&#23454;&#20363;&#21270;&#65292;Seam&#23558;&#33258;&#21160;&#20026;&#36825;&#20010;&#21517;&#20026; <tt class="literal">locale</tt> &#30340;&#23646;&#24615;&#27880;&#20837;&#30456;&#24212;&#30340;&#20540;&#12290;
            </p><p>
            	Seam&#26412;&#36523;&#30340;&#37197;&#32622;&#20063;&#37319;&#29992;&#20102;&#30456;&#21516;&#30340;&#26426;&#21046;&#12290;&#20363;&#22914;&#65292;&#35201;&#35774;&#32622;&#23545;&#35805;&#36229;&#26102;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312; <tt class="literal">web.xml</tt>
            	&#25110;&#32773; <tt class="literal">seam.properties</tt> &#20013;&#20026; <tt class="literal">org.jboss.seam.core.manager.conversationTimeout</tt> &#25552;&#20379;&#19968;&#20010;&#20540;&#12290;
            	&#65288;&#22312;Seam&#20869;&#32622;&#30340;&#32452;&#20214; <tt class="literal">org.jboss.seam.core.manager</tt> &#20013;&#65292;&#24050;&#32463;&#21253;&#21547;&#20102;&#19968;&#20010;&#21517;&#20026; <tt class="literal">setConversationTimeout()</tt> &#30340;setter&#26041;&#27861;&#12290;&#65289;
            </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3850"></a>4.2.&nbsp;&#36890;&#36807; <tt class="literal">components.xml</tt> &#26469;&#37197;&#32622;&#32452;&#20214;</h2></div></div><div></div></div><p><tt class="literal">components.xml</tt> &#25991;&#20214;&#30340;&#21151;&#33021;&#35201;&#27604;&#23646;&#24615;&#35774;&#32622;&#30340;&#26356;&#24378;&#22823;&#19968;&#20123;&#12290;&#23427;&#35753;&#20320;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>
                    	&#37197;&#32622;&#37027;&#20123;&#24050;&#32463;&#34987;&#33258;&#21160;&#23433;&#35013;&#30340;&#32452;&#20214;&#8212;&#21253;&#25324;&#20869;&#32622;&#32452;&#20214;&#20197;&#21450;&#37027;&#20123;&#24102;&#26377; <tt class="literal">@Name</tt> &#27880;&#35299;&#65292;
                    	&#19988;&#34987;Seam&#30340;&#37096;&#32626;&#25195;&#25551;&#22120;&#35782;&#21035;&#21040;&#30340;&#37027;&#20123;&#24212;&#29992;&#32452;&#20214;&#12290;
                    </p></li><li><p>
                    	&#23558;&#37027;&#20123;&#27809;&#26377; <tt class="literal">@Name</tt> &#27880;&#35299;&#30340;&#31867;&#23433;&#35013;&#25104;&#20026;Seam&#32452;&#20214;&#8212;
                    	&#36825;&#19968;&#28857;&#23545;&#20110;&#37027;&#20123;&#38656;&#35201;&#20197;&#19981;&#21516;&#30340;&#21517;&#23383;&#36827;&#34892;&#22810;&#27425;&#23433;&#35013;&#30340;&#32467;&#26500;&#32452;&#20214;&#29305;&#21035;&#26377;&#29992;&#65288;&#20363;&#22914;&#65292;Seam&#31649;&#29702;&#30340;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#65289;&#12290;
                    </p></li><li><p>
                    	&#23433;&#35013;&#37027;&#20123; <span class="emphasis"><em>&#20165;</em></span> &#20855;&#26377; <tt class="literal">@Name</tt> &#27880;&#35299;&#65292;&#20294;&#26159;&#40664;&#35748;&#24773;&#20917;&#19979;&#26410;&#34987;&#23433;&#35013;&#30340;Seam&#32452;&#20214;&#12290;
                    	&#22240;&#20026; <tt class="literal">@Install</tt> &#27880;&#35299;&#34920;&#26126;&#35813;&#32452;&#20214;&#19981;&#24212;&#24403;&#34987;&#23433;&#35013;&#12290;
                    </p></li><li><p>&#35206;&#30422;&#32452;&#20214;&#30340;&#33539;&#22260;&#12290;</p></li></ul></div><p>
                 <tt class="literal">components.xml</tt> &#25991;&#20214;&#21487;&#20197;&#20986;&#29616;&#22312;&#19979;&#38754;&#19977;&#20010;&#19981;&#21516;&#22320;&#26041;&#20013;&#30340;&#20219;&#20309;&#19968;&#22788;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">war</tt> &#21253;&#30340; <tt class="literal">WEB-INF</tt> &#30446;&#24405;&#19979;&#12290;</p></li><li><p><tt class="literal">jar</tt> &#21253;&#30340; <tt class="literal">META-INF</tt> &#30446;&#24405;&#19979;&#12290;</p></li><li><p>&#21253;&#21547;&#24102;&#26377; <tt class="literal">@Name</tt> &#27880;&#35299;&#31867;&#30340; <tt class="literal">jar</tt> &#21253;&#19979;&#30340;&#20219;&#20309;&#30446;&#24405;&#12290;</p></li></ul></div><p>
                &#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#24403;Seam&#37096;&#32626;&#25195;&#25551;&#22120;&#22312;&#21253;&#21547; <tt class="literal">seam.properties</tt>
                &#25991;&#20214;&#25110;&#32773; <tt class="literal">META-INF/components.xml</tt> &#25991;&#20214;&#30340;&#25991;&#20214;&#22841;&#20013;&#35782;&#21035;&#21040;&#19968;&#20010;&#21253;&#21547; <tt class="literal">@Name</tt> &#27880;&#35299;&#30340;&#31867;&#26102;&#65292;
                Seam&#23558;&#23433;&#35013;&#36733;&#35813;&#32452;&#20214;&#12290;&#65288;&#38500;&#38750;&#36825;&#20010;&#32452;&#20214;&#20855;&#26377;&#19968;&#20010; <tt class="literal">@Install</tt> &#27880;&#35299;&#65292;&#34920;&#31034;&#23427;&#19981;&#24212;&#35813;&#34987;&#40664;&#35748;&#23433;&#35013;&#12290;&#65289;
                <tt class="literal">components.xml</tt> &#25991;&#20214;&#35753;&#25105;&#20204;&#21435;&#22788;&#29702;&#37027;&#20123;&#38656;&#35201;&#35206;&#30422;&#27880;&#35299;&#30340;&#29305;&#27530;&#24773;&#20917;&#12290;
            </p><p>
                &#20363;&#22914;&#65292;&#19979;&#38754;&#30340; <tt class="literal">components.xml</tt> &#25991;&#20214;&#23433;&#35013;&#20102;jBPM:
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:bpm="http://jboss.com/products/seam/bpm"&gt;
    &lt;bpm:jbpm/&gt;
&lt;/components&gt;</pre><p>
                &#36825;&#20010;&#20363;&#23376;&#23454;&#29616;&#20102;&#30456;&#21516;&#30340;&#21151;&#33021;&#65306;
            </p><pre class="programlisting">&lt;components&gt;
    &lt;component class="org.jboss.seam.bpm.Jbpm"/&gt;
&lt;/components&gt;</pre><p>
                &#36825;&#20010;&#20363;&#23376;&#23433;&#35013;&#24182;&#37197;&#32622;&#20102;Seam&#31649;&#29702;&#30340;&#20004;&#20010;&#19981;&#21516;&#30340;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;:
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:persistence="http://jboss.com/products/seam/persistence"

    &lt;persistence:managed-persistence-context name="customerDatabase"
                       persistence-unit-jndi-name="java:/customerEntityManagerFactory"/&gt;

    &lt;persistence:managed-persistence-context name="accountingDatabase"
                       persistence-unit-jndi-name="java:/accountingEntityManagerFactory"/&gt;

&lt;/components&gt;</pre><p>
                &#36825;&#20010;&#20363;&#23376;&#20063;&#19968;&#26679;:
            </p><pre class="programlisting">&lt;components&gt;
    &lt;component name="customerDatabase"
              class="org.jboss.seam.persistence.ManagedPersistenceContext"&gt;
        &lt;property name="persistenceUnitJndiName"&gt;java:/customerEntityManagerFactory&lt;/property&gt;
    &lt;/component&gt;

    &lt;component name="accountingDatabase"
              class="org.jboss.seam.persistence.ManagedPersistenceContext"&gt;
        &lt;property name="persistenceUnitJndiName"&gt;java:/accountingEntityManagerFactory&lt;/property&gt;
    &lt;/component&gt;
&lt;/components&gt;</pre><p>
                &#36825;&#20010;&#20363;&#23376;&#21019;&#24314;&#20102;&#19968;&#20010;Seam&#31649;&#29702;&#30340;session&#33539;&#22260;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#65288;&#36825;&#22312;&#23454;&#38469;&#39033;&#30446;&#20013;&#24182;&#19981;&#25512;&#33616;&#20351;&#29992;&#65289;
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:persistence="http://jboss.com/products/seam/persistence"

  &lt;persistence:managed-persistence-context name="productDatabase"
                                          scope="session"
                     persistence-unit-jndi-name="java:/productEntityManagerFactory"/&gt;

&lt;/components&gt;</pre><pre class="programlisting">&lt;components&gt;

    &lt;component name="productDatabase"
              scope="session"
              class="org.jboss.seam.persistence.ManagedPersistenceContext"&gt;
        &lt;property name="persistenceUnitJndiName"&gt;java:/productEntityManagerFactory&lt;/property&gt;
    &lt;/component&gt;

&lt;/components&gt;</pre><p>
                &#36890;&#24120;&#20250;&#32473;&#20687;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#36825;&#26679;&#30340;&#22522;&#30784;&#32467;&#26500;&#23545;&#35937;&#20351;&#29992; <tt class="literal">auto-create</tt> &#36873;&#39033;&#65292;
                &#23427;&#33021;&#22312;&#20320;&#20351;&#29992; <tt class="literal">@In</tt> &#27880;&#35299;&#26102;&#65292;&#19981;&#24517;&#26174;&#24335;&#22320;&#25351;&#23450; <tt class="literal">create=true</tt>&#12290;
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:persistence="http://jboss.com/products/seam/persistence"

  &lt;persistence:managed-persistence-context name="productDatabase"
                                    auto-create="true"
                     persistence-unit-jndi-name="java:/productEntityManagerFactory"/&gt;

&lt;/components&gt;</pre><pre class="programlisting">&lt;components&gt;

    &lt;component name="productDatabase"
        auto-create="true"
              class="org.jboss.seam.persistence.ManagedPersistenceContext"&gt;
        &lt;property name="persistenceUnitJndiName"&gt;java:/productEntityManagerFactory&lt;/property&gt;
    &lt;/component&gt;

&lt;/components&gt;</pre><p>
                <tt class="literal">&lt;factory&gt;</tt> &#22768;&#26126;&#35753;&#20320;&#25351;&#23450;&#19968;&#20010;&#20540;&#25110;&#32773;&#26041;&#27861;&#26469;&#32465;&#23450;&#19968;&#20010;&#34920;&#36798;&#24335;&#65292;&#24403;&#23427;&#31532;&#19968;&#27425;&#34987;&#24341;&#29992;&#26102;&#65292;&#23558;&#34987;&#25191;&#34892;&#29992;&#26469;&#21021;&#22987;&#21270;&#19968;&#20010;context&#21464;&#37327;&#30340;&#20540;&#12290;
            </p><pre class="programlisting">&lt;components&gt;

    &lt;factory name="contact" method="#{contactManager.loadContact}" scope="CONVERSATION"/&gt;

&lt;/components&gt;</pre><p>
                &#20320;&#20063;&#21487;&#20197;&#20026;Seam&#32452;&#20214;&#21019;&#24314;&#19968;&#20010;&#21035;&#21517;&#65288;&#31532;&#20108;&#20010;&#21517;&#23383;&#65289;&#65292;&#23601;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">&lt;components&gt;

    &lt;factory name="user" value="#{actor}" scope="STATELESS"/&gt;

&lt;/components&gt;</pre><p>
                &#20320;&#29978;&#33267;&#21487;&#20197;&#32473;&#24120;&#29992;&#30340;&#34920;&#36798;&#24335;&#23450;&#20041;&#21035;&#21517;&#65306;
            </p><pre class="programlisting">&lt;components&gt;

    &lt;factory name="contact" value="#{contactManager.contact}" scope="STATELESS"/&gt;

&lt;/components&gt;</pre><p>
                <tt class="literal">auto-create="true"</tt> &#29992;&#22312; <tt class="literal">&lt;factory&gt;</tt> &#22768;&#26126;&#20013;&#23588;&#20854;&#24120;&#35265;&#12290;
            </p><pre class="programlisting">&lt;components&gt;

    &lt;factory name="session" value="#{entityManager.delegate}" scope="STATELESS" auto-create="true"/&gt;

&lt;/components&gt;</pre><p>
                &#25105;&#20204;&#22312;&#37096;&#32626;&#25110;&#32773;&#27979;&#35797;&#26399;&#38388;&#65292;&#26377;&#26102;&#20505;&#24819;&#35201;&#36890;&#36807;&#30053;&#24494;&#30340;&#25913;&#21160;&#65292;&#26469;&#37325;&#29992;&#21516;&#19968;&#20010; <tt class="literal">components.xml</tt>&#25991;&#20214;&#12290;
                Seam&#20801;&#35768;&#20320;&#22312; <tt class="literal">components.xml</tt> &#25991;&#20214;&#20013;&#20351;&#29992; <tt class="literal">@wildcard@</tt> &#24418;&#24335;&#30340;&#36890;&#37197;&#31526;&#65292;
                &#36825;&#20123;&#36890;&#37197;&#31526;&#21487;&#20197;&#22312;&#37096;&#32626;&#30340;&#26102;&#20505;&#34987;Ant&#26500;&#24314;&#33050;&#26412;&#26367;&#25442;&#65292;&#20063;&#21487;&#20197;&#22312;&#24320;&#21457;&#26102;&#36890;&#36807;&#22312;classpath&#20013;&#25552;&#20379;&#19968;&#20010;&#21517;&#20026; <tt class="literal">components.properties</tt> &#30340;&#25991;&#20214;&#36827;&#34892;&#26367;&#25442;&#12290;
                &#20320;&#20250;&#22312;Seam&#30340;&#31034;&#20363;&#31243;&#24207;&#20013;&#25214;&#21040;&#36825;&#20010;&#29992;&#27861;&#12290;
            </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4015"></a>4.3.&nbsp;&#32454;&#31890;&#24230;&#30340;&#37197;&#32622;&#25991;&#20214;</h2></div></div><div></div></div><p>
            	&#22914;&#26524;&#20320;&#26377;&#22823;&#37327;&#30340;&#32452;&#20214;&#38656;&#35201;&#22312;XML&#20013;&#36827;&#34892;&#37197;&#32622;&#65292;&#37027;&#20040;&#23601;&#24456;&#26377;&#24517;&#35201;&#23558; <tt class="literal">components.xml</tt> &#25991;&#20214;&#20013;&#30340;&#20869;&#23481;&#20998;&#25955;&#21040;&#22810;&#20010;&#25991;&#20214;&#20013;&#21435;&#12290;
            	Seam&#20801;&#35768;&#20320;&#25226;&#31867;&#65288;&#20363;&#22914;&#21517;&#20026; <tt class="literal">com.helloworld.Hello</tt> &#65289;&#30340;&#37197;&#32622;&#25918;&#21040;&#19968;&#20010;&#36164;&#28304;&#20013;&#65288;&#21517;&#20026; <tt class="literal">com/helloworld/Hello.component.xml</tt>&#65289;&#12290;
            	&#65288;&#20320;&#23545;&#36825;&#31181;&#27169;&#24335;&#21487;&#33021;&#24456;&#29087;&#24713;&#65292;&#22240;&#20026;&#23427;&#19982;&#25105;&#20204;&#22312;Hibernate&#20013;&#20351;&#29992;&#30340;&#30456;&#21516;&#65289;&#12290;
            	&#25991;&#20214;&#30340;&#26681;&#20803;&#32032;&#24212;&#35813;&#26159; <tt class="literal">&lt;components&gt;</tt> &#25110;&#32773; <tt class="literal">&lt;component&gt;</tt> &#12290;
            </p><p>
                &#31532;&#19968;&#20010;&#36873;&#39033;&#20801;&#35768;&#20320;&#22312;&#19968;&#20010;&#25991;&#20214;&#20013;&#23450;&#20041;&#22810;&#20010;&#32452;&#20214;&#65306;
            </p><pre class="programlisting">&lt;components&gt;
    &lt;component class="com.helloworld.Hello" name="hello"&gt;
        &lt;property name="name"&gt;#{user.name}&lt;/property&gt;
    &lt;/component&gt;
    &lt;factory name="message" value="#{hello.message}"/&gt;
&lt;/components&gt;</pre><p>
                &#31532;&#20108;&#20010;&#36873;&#39033;&#21482;&#20801;&#35768;&#20320;&#23450;&#20041;&#25110;&#32773;&#37197;&#32622;&#21333;&#20010;&#32452;&#20214;&#65292;&#19981;&#36807;&#40635;&#28902;&#20250;&#23569;&#19968;&#28857;&#65306;
            </p><pre class="programlisting">&lt;component name="hello"&gt;
    &lt;property name="name"&gt;#{user.name}&lt;/property&gt;
&lt;/component&gt;</pre><p>
                &#22312;&#31532;&#20108;&#20010;&#36873;&#39033;&#20013;&#65292;&#31867;&#21517;&#19982;&#32452;&#20214;&#23450;&#20041;&#25152;&#22312;&#30340;&#25991;&#20214;&#26159;&#19968;&#33268;&#30340;&#12290;
            </p><p>
                &#20320;&#36824;&#21487;&#20197;&#36873;&#25321;&#23558;&#25152;&#26377;&#31867;&#30340;&#37197;&#32622;&#37117;&#25918;&#22312; <tt class="literal">com/helloworld/components.xml</tt> &#30340; <tt class="literal">com.helloworld</tt> &#21253;&#20013;&#12290;
            </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4053"></a>4.4.&nbsp;&#21487;&#37197;&#32622;&#30340;&#23646;&#24615;&#31867;&#22411;</h2></div></div><div></div></div><p>
                String&#30340;&#23646;&#24615;&#12289;&#22522;&#26412;&#31867;&#22411;&#20197;&#21450;&#22522;&#26412;&#31867;&#22411;&#30340;&#21253;&#35013;&#31867;&#22411;&#21487;&#20197;&#20687;&#25105;&#20204;&#26399;&#26395;&#30340;&#37027;&#26679;&#36827;&#34892;&#37197;&#32622;&#65306;
            </p><pre class="programlisting">org.jboss.seam.core.manager.conversationTimeout 60000</pre><pre class="programlisting">&lt;core:manager conversation-timeout="60000"/&gt;</pre><pre class="programlisting">&lt;component name="org.jboss.seam.core.manager"&gt;
    &lt;property name="conversationTimeout"&gt;60000&lt;/property&gt;
&lt;/component&gt;</pre><p>
                &#20063;&#25903;&#25345;&#30001;String&#25110;&#32773;&#22522;&#26412;&#31867;&#22411;&#26500;&#25104;&#30340;&#25968;&#32452;&#12289;Set&#21644;List&#65306;
            </p><pre class="programlisting">org.jboss.seam.bpm.jbpm.processDefinitions order.jpdl.xml, return.jpdl.xml, inventory.jpdl.xml</pre><pre class="programlisting">&lt;bpm:jbpm&gt;
    &lt;bpm:process-definitions&gt;
        &lt;value&gt;order.jpdl.xml&lt;/value&gt;
        &lt;value&gt;return.jpdl.xml&lt;/value&gt;
        &lt;value&gt;inventory.jpdl.xml&lt;/value&gt;
    &lt;/bpm:process-definitions&gt;
&lt;/bpm:jbpm&gt;</pre><pre class="programlisting">&lt;component name="org.jboss.seam.bpm.jbpm"&gt;
    &lt;property name="processDefinitions"&gt;
        &lt;value&gt;order.jpdl.xml&lt;/value&gt;
        &lt;value&gt;return.jpdl.xml&lt;/value&gt;
        &lt;value&gt;inventory.jpdl.xml&lt;/value&gt;
    &lt;/property&gt;
&lt;/component&gt;</pre><p>
                &#29978;&#33267;&#20063;&#25903;&#25345;&#37027;&#20123;&#21253;&#21547;String&#20540;&#20026;&#38190;&#12289;String&#25110;&#32773;&#22522;&#26412;&#31867;&#22411;&#20540;&#30340;Map&#65306;
            </p><pre class="programlisting">&lt;component name="issueEditor"&gt;
    &lt;property name="issueStatuses"&gt;
        &lt;key&gt;open&lt;/key&gt; &lt;value&gt;open issue&lt;/value&gt;
        &lt;key&gt;resolved&lt;/key&gt; &lt;value&gt;issue resolved by developer&lt;/value&gt;
        &lt;key&gt;closed&lt;/key&gt; &lt;value&gt;resolution accepted by user&lt;/value&gt;
    &lt;/property&gt;
&lt;/component&gt;</pre><p>
                &#26368;&#21518;&#65292;&#20320;&#21487;&#20197;&#21033;&#29992;&#20540;&#32465;&#23450;&#34920;&#36798;&#24335;&#26469;&#23558;&#25152;&#26377;&#30340;&#32452;&#20214;&#35013;&#37197;&#36215;&#26469;&#12290;
                &#27880;&#24847;&#36825;&#19982;&#20351;&#29992; <tt class="literal">@In</tt> &#27880;&#35299;&#36827;&#34892;&#27880;&#20837;&#38750;&#24120;&#19981;&#21516;&#65292;&#22240;&#20026;&#23427;&#26159;&#22312;&#32452;&#20214;&#21021;&#22987;&#21270;&#32780;&#19981;&#26159;&#34987;&#35843;&#29992;&#26102;&#36215;&#20316;&#29992;&#30340;&#12290;
                &#22240;&#32780;&#23427;&#19982;&#20256;&#32479;&#30340;IoC&#23481;&#22120;&#20363;&#22914;JSF&#25110;&#32773;Spring&#25152;&#25552;&#20379;&#30340;&#20381;&#36182;&#27880;&#20837;&#21151;&#33021;&#38750;&#24120;&#38750;&#24120;&#31867;&#20284;&#12290;
            </p><pre class="programlisting">&lt;drools:managed-working-memory name="policyPricingWorkingMemory" rule-base="#{policyPricingRules}"/&gt;</pre><pre class="programlisting">&lt;component name="policyPricingWorkingMemory"
          class="org.jboss.seam.drools.ManagedWorkingMemory"&gt;
    &lt;property name="ruleBase"&gt;#{policyPricingRules}&lt;/property&gt;
&lt;/component&gt;</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4085"></a>4.5.&nbsp;&#20351;&#29992;XML&#21629;&#21517;&#31354;&#38388;</h2></div></div><div></div></div><p>
                &#32437;&#35266;&#25972;&#20010;&#31034;&#20363;&#65292;&#26377;&#20004;&#31181;&#23436;&#20840;&#19981;&#21516;&#30340;&#22768;&#26126;&#32452;&#20214;&#30340;&#26041;&#24335;&#65306;&#20351;&#29992;&#25110;&#32773;&#19981;&#20351;&#29992;XML&#21629;&#21517;&#31354;&#38388;&#12290;
                &#19979;&#38754;&#30340;&#31034;&#20363;&#23637;&#31034;&#20102;&#19968;&#20010;&#20856;&#22411;&#30340; <tt class="literal">components.xml</tt> &#25991;&#20214;&#65292;&#23427;&#27809;&#26377;&#20351;&#29992;&#21629;&#21517;&#31354;&#38388;&#65292;&#32780;&#26159;&#20351;&#29992;Seam Components DTD&#65306;
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;components xmlns="http://jboss.com/products/seam/components"
            xsi:schemaLocation="http://jboss.com/products/seam/components http://jboss.com/products/seam/components-2.0.xsd"&gt;

    &lt;component class="org.jboss.seam.core.init"&gt;
        &lt;property name="debug"&gt;true&lt;/property&gt;
        &lt;property name="jndiPattern"&gt;@jndiPattern@&lt;/property&gt;
    &lt;/component&gt;

&lt;/components&gt;</pre><p>
                &#27491;&#22914;&#20320;&#25152;&#35265;&#65292;&#36825;&#26679;&#30340;&#37197;&#32622;&#26377;&#28857;&#32321;&#29712;&#12290;&#26356;&#31967;&#30340;&#26159;&#65292;&#36825;&#20123;&#32452;&#20214;&#21644;&#23646;&#24615;&#30340;&#21517;&#31216;&#22312;&#24320;&#21457;&#26102;&#26159;&#26080;&#27861;&#34987;&#26657;&#39564;&#30340;&#12290;
            </p><p>
            	&#20351;&#29992;&#21629;&#21517;&#31354;&#38388;&#30340;&#37197;&#32622;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:core="http://jboss.com/products/seam/core"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation=
                "http://jboss.com/products/seam/core http://jboss.com/products/seam/core-2.0.xsd
                 http://jboss.com/products/seam/components http://jboss.com/products/seam/components-2.0.xsd"&gt;

    &lt;core:init debug="true" jndi-pattern="@jndiPattern@"/&gt;

&lt;/components&gt;</pre><p>
                &#34429;&#28982;Schema&#30340;&#22768;&#26126;&#24456;&#32321;&#29712;&#65292;&#19981;&#36807;&#23454;&#38469;&#30340;XML&#20869;&#23481;&#26159;&#28165;&#26224;&#32780;&#31616;&#21333;&#26131;&#25026;&#30340;&#12290;
                Schema&#25552;&#20379;&#20102;&#20851;&#20110;&#27599;&#20010;&#21487;&#29992;&#32452;&#20214;&#21644;&#23646;&#24615;&#30340;&#35814;&#32454;&#20449;&#24687;&#65292;&#36825;&#20351;&#24471;XML&#32534;&#36753;&#22120;&#21487;&#20197;&#21457;&#25381;&#20854;&#33258;&#21160;&#23436;&#25104;&#30340;&#21151;&#25928;&#12290;
                &#25152;&#20197;&#65292;&#20351;&#29992;&#21629;&#21517;&#31354;&#38388;&#30340;&#20803;&#32032;&#20351;&#29983;&#25104;&#21644;&#32500;&#25252;&#27491;&#30830;&#30340; <tt class="literal">components.xml</tt> &#25991;&#20214;&#37117;&#21464;&#24471;&#26356;&#21152;&#31616;&#21333;&#12290;
            </p><p>
                &#29616;&#22312;&#65292;&#36825;&#31181;&#26041;&#24335;&#23545;&#20110;Seam&#20869;&#24314;&#30340;&#32452;&#20214;&#24037;&#20316;&#24471;&#24456;&#22909;&#65292;&#20294;&#26159;&#23545;&#20110;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#32452;&#20214;&#21448;&#22914;&#20309;&#21602;? 
                &#36825;&#37324;&#26377;&#20004;&#31181;&#36873;&#25321;&#65306;&#31532;&#19968;&#31181;&#65292;Seam&#25903;&#25345;&#20004;&#31181;&#27169;&#22411;&#30340;&#28151;&#21512;&#20351;&#29992;&#65292;&#20801;&#35768;&#20351;&#29992;&#26222;&#36890;&#30340; <tt class="literal">&lt;component&gt;</tt> &#22768;&#26126;&#26469;&#37197;&#32622;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#32452;&#20214;&#65292;&#21516;&#26102;&#20063;&#20351;&#29992;&#21629;&#21517;&#31354;&#38388;&#26469;&#37197;&#32622;&#20869;&#32622;&#32452;&#20214;&#12290;
                &#19981;&#36807;&#26356;&#22909;&#30340;&#26041;&#27861;&#26159;&#65292;Seam&#20801;&#35768;&#20320;&#24555;&#36895;&#22320;&#20026;&#20320;&#33258;&#24049;&#30340;&#32452;&#20214;&#22768;&#26126;&#21629;&#21517;&#31354;&#38388;&#12290;
            </p><p>
                &#20219;&#20309;Java&#21253;&#37117;&#21487;&#20197;&#36890;&#36807;&#29992; <tt class="literal">@Namespace</tt> &#27880;&#35299;&#35813;&#21253;&#65292;&#32780;&#19982;XML&#21629;&#21517;&#31354;&#38388;&#32780;&#20851;&#32852;&#36215;&#26469;&#12290;
                &#65288;&#21253;&#32423;&#21035;&#30340;&#27880;&#35299;&#26159;&#22312;&#19968;&#20010;&#21517;&#20026; <tt class="literal">package-info.java</tt> &#30340;&#25991;&#20214;&#20013;&#22768;&#26126;&#30340;&#65292;&#35813;&#25991;&#20214;&#22788;&#20110;&#21253;&#30340;&#21516;&#32423;&#30446;&#24405;&#19979;&#65289;&#12290;
                &#19979;&#38754;&#26159;&#19968;&#20010;&#26469;&#33258;seampay&#28436;&#31034;&#30340;&#20363;&#23376;:
            </p><pre class="programlisting">@Namespace(value="http://jboss.com/products/seam/examples/seampay")
package org.jboss.seam.example.seampay;

import org.jboss.seam.annotations.Namespace;</pre><p>
                &#36825;&#26679;&#65292;&#20320;&#23601;&#21487;&#20197;&#22312; <tt class="literal">components.xml</tt> &#20013;&#20351;&#29992;&#21629;&#21517;&#31354;&#38388;&#30340;&#26041;&#24335;&#20102;&#65281;&#29616;&#22312;&#65292;&#20320;&#21487;&#20197;&#36825;&#20040;&#20889;&#65306;
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:pay="http://jboss.com/products/seam/examples/seampay"
            ... &gt;

    &lt;pay:payment-home new-instance="#{newPayment}"
                      created-message="Created a new payment to #{newPayment.payee}" /&gt;

    &lt;pay:payment name="newPayment"
                 payee="Somebody"
                 account="#{selectedAccount}"
                 payment-date="#{currentDatetime}"
                 created-date="#{currentDatetime}" /&gt;
     ...
&lt;/components&gt;</pre><p>
            	&#25110;&#32773;&#65306;
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:pay="http://jboss.com/products/seam/examples/seampay"
            ... &gt;

    &lt;pay:payment-home&gt;
        &lt;pay:new-instance&gt;"#{newPayment}"&lt;/pay:new-instance&gt;
        &lt;pay:created-message&gt;Created a new payment to #{newPayment.payee}&lt;/pay:created-message&gt;
    &lt;/pay:payment-home&gt;

    &lt;pay:payment name="newPayment"&gt;
        &lt;pay:payee&gt;Somebody"&lt;/pay:payee&gt;
        &lt;pay:account&gt;#{selectedAccount}&lt;/pay:account&gt;
        &lt;pay:payment-date&gt;#{currentDatetime}&lt;/pay:payment-date&gt;
        &lt;pay:created-date&gt;#{currentDatetime}&lt;/pay:created-date&gt;
     &lt;/pay:payment&gt;
     ...
&lt;/components&gt;</pre><p>
                &#36825;&#20123;&#31034;&#20363;&#23637;&#31034;&#20102;&#21629;&#21517;&#31354;&#38388;&#20803;&#32032;&#30340;&#20004;&#31181;&#20351;&#29992;&#27169;&#24335;&#12290;
                &#22312;&#31532;&#19968;&#20010;&#22768;&#26126;&#20013;&#65292;<tt class="literal">&lt;pay:payment-home&gt;</tt> &#25351;&#21521; <tt class="literal">paymentHome</tt> &#32452;&#20214;&#12290;
            </p><pre class="programlisting">package org.jboss.seam.example.seampay;
...
@Name("paymentHome")
public class PaymentController
    extends EntityHome&lt;Payment&gt;
{
    ...
}</pre><p>
                &#20803;&#32032;&#30340;&#21517;&#31216;&#26159;&#36830;&#23383;&#31526;&#21495;&#65288;-&#65289;&#24418;&#24335;&#30340;&#32452;&#20214;&#21517;&#31216;&#12290;&#20803;&#32032;&#30340;&#23646;&#24615;&#26159;&#36830;&#23383;&#31526;&#21495;&#65288;-&#65289;&#24418;&#24335;&#30340;&#23646;&#24615;&#21517;&#31216;&#12290;
            </p><p>
                &#22312;&#31532;&#20108;&#20010;&#22768;&#26126;&#20013;&#65292;<tt class="literal">&lt;pay:payment&gt;</tt> &#20803;&#32032;&#25351;&#21521; <tt class="literal">org.jboss.seam.example.seampay</tt> &#21253;&#20013;&#30340; <tt class="literal">Payment</tt> &#31867;&#12290;
                &#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;<tt class="literal">Payment</tt> &#26159;&#19968;&#20010;&#34987;&#23450;&#20041;&#25104;Seam&#32452;&#20214;&#30340;&#23454;&#20307;&#12290;
            </p><pre class="programlisting">package org.jboss.seam.example.seampay;
...
@Entity
public class Payment
    implements Serializable
{
    ...
}</pre><p>
                &#22914;&#26524;&#25105;&#20204;&#38656;&#35201;&#29992;&#25143;&#33258;&#23450;&#20041;&#32452;&#20214;&#30340;&#39564;&#35777;&#21644;&#33258;&#21160;&#23436;&#25104;&#21151;&#33021;&#65292;&#25105;&#20204;&#23601;&#38656;&#35201;&#19968;&#20010;Schema&#12290;
                &#30446;&#21069;Seam&#36824;&#26080;&#27861;&#25552;&#20379;&#20026;&#19968;&#32452;&#32452;&#20214;&#33258;&#21160;&#29983;&#25104;Schema&#30340;&#26426;&#21046;&#65292;&#25152;&#20197;&#20320;&#24517;&#38656;&#25163;&#24037;&#29983;&#25104;&#12290;&#26631;&#20934;Seam&#21253;&#30340;Schema&#23450;&#20041;&#21487;&#20197;&#24403;&#20316;&#31034;&#33539;&#12290;
            </p><p>&#20197;&#19979;&#26159;Seam&#25152;&#20351;&#29992;&#30340;&#21629;&#21517;&#31354;&#38388;:</p><div class="itemizedlist"><ul type="disc"><li><p>components &#8212; <tt class="literal">http://jboss.com/products/seam/components</tt></p></li><li><p>core &#8212; <tt class="literal">http://jboss.com/products/seam/core</tt></p></li><li><p>drools &#8212; <tt class="literal">http://jboss.com/products/seam/drools</tt></p></li><li><p>framework &#8212; <tt class="literal">http://jboss.com/products/seam/framework</tt></p></li><li><p>jms &#8212; <tt class="literal">http://jboss.com/products/seam/jms</tt></p></li><li><p>remoting &#8212; <tt class="literal">http://jboss.com/products/seam/remoting</tt></p></li><li><p>theme &#8212; <tt class="literal">http://jboss.com/products/seam/theme</tt></p></li><li><p>security &#8212; <tt class="literal">http://jboss.com/products/seam/security</tt></p></li><li><p>mail &#8212; <tt class="literal">http://jboss.com/products/seam/mail</tt></p></li><li><p>web &#8212; <tt class="literal">http://jboss.com/products/seam/web</tt></p></li><li><p>pdf &#8212; <tt class="literal">http://jboss.com/products/seam/pdf</tt></p></li><li><p> spring &#8212; <tt class="literal">http://jboss.com/products/seam/spring</tt></p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="concepts.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="events.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#32452;&#20214;&#27169;&#22411;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;5.&nbsp;&#20107;&#20214;&#12289;&#25318;&#25130;&#22120;&#21644;&#24322;&#24120;&#22788;&#29702;</td></tr></table></div></body></html>