<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;25.&nbsp;Seam&#37197;&#32622;&#21644;Seam&#24212;&#29992;&#31243;&#24207;&#25171;&#21253;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="up" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="previous" href="search.html" title="Chapter&nbsp;24.&nbsp;Hibernate Search"><link rel="next" href="oc4j.html" title="Chapter&nbsp;26.&nbsp;Seam on OC4J"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;25.&nbsp;Seam&#37197;&#32622;&#21644;Seam&#24212;&#29992;&#31243;&#24207;&#25171;&#21253;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="search.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="oc4j.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="configuration"></a>Chapter&nbsp;25.&nbsp;Seam&#37197;&#32622;&#21644;Seam&#24212;&#29992;&#31243;&#24207;&#25171;&#21253;</h2></div></div><div></div></div><p>
    &#37197;&#32622;&#26159;&#19968;&#20010;&#38750;&#24120;&#26543;&#29157;&#30340;&#35805;&#39064;&#65292;&#20063;&#26159;&#19968;&#31181;&#26497;&#20854;&#20047;&#21619;&#30340;&#28040;&#36963;&#12290;&#19981;&#24184;&#30340;&#26159;&#65292;&#20026;&#20102;&#23558;Seam&#38598;&#25104;&#21040;&#20320;&#30340;JSF&#23454;&#29616;&#21644;Servlet&#23481;&#22120;&#20013;&#65292;&#26377;&#20123;XML&#35821;&#21477;&#26159;&#24517;&#39035;&#30340;&#12290;
    &#20320;&#19981;&#24517;&#20877;&#34987;&#20197;&#19979;&#37096;&#20998;&#25302;&#24310;&#26102;&#38388;&#20102;&#65307;&#20320;&#23558;&#27704;&#36828;&#19981;&#24517;&#20146;&#33258;&#38190;&#20837;&#20197;&#19979;&#20219;&#20309;&#20869;&#23481;&#65292;&#22240;&#20026;&#20320;&#21487;&#20197;&#20174;&#31034;&#20363;&#24212;&#29992;&#31243;&#24207;&#20013;&#25335;&#36125;&#21644;&#31896;&#24086;&#12290;
    </p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13833"></a>25.1.&nbsp;Seam&#22522;&#26412;&#37197;&#32622;</h2></div></div><div></div></div><p>
        &#39318;&#20808;&#65292;&#35753;&#25105;&#20204;&#30475;&#30475;&#27599;&#24403;&#23558;Seam&#21644;JSF&#19968;&#36215;&#20351;&#29992;&#26102;&#25152;&#38656;&#35201;&#30340;&#22522;&#26412;&#37197;&#32622;&#12290;
        </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e13838"></a>25.1.1.&nbsp;
          &#23558;Seam&#19982;JSF&#21644;servlet&#23481;&#22120;&#38598;&#25104;
          </h3></div></div><div></div></div><p>
          &#24403;&#28982;&#65292;&#20320;&#38656;&#35201;&#19968;&#20010;Faces Servlet&#65281;
          </p><pre class="programlisting">&lt;servlet&gt;
    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.seam&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</pre><p>
            &#65288;&#20320;&#21487;&#20197;&#35843;&#25972;URL&#27169;&#24335;&#20197;&#36866;&#21512;&#20320;&#30340;&#38656;&#35201;&#12290;&#65289;
            </p><p>
            &#21478;&#22806;&#65292;Seam&#38656;&#35201;&#22312;&#20320;&#30340; <tt class="literal">web.xml</tt> &#25991;&#20214;&#20013;&#26377;&#20197;&#19979;&#39033;&#65306;
            </p><pre class="programlisting">&lt;listener&gt;
    &lt;listener-class&gt;org.jboss.seam.servlet.SeamListener&lt;/listener-class&gt;
&lt;/listener&gt;</pre><p>
            &#36825;&#20010;listener&#36127;&#36131;&#24341;&#23548;Seam&#65292;&#20197;&#21450;&#38144;&#27585;&#20250;&#35805;&#21644;&#24212;&#29992;&#31243;&#24207;&#12290;
            </p><p>
            &#26377;&#20123;JSF&#23454;&#29616;&#22312;&#26381;&#21153;&#22120;&#31471;&#29366;&#24577;&#20445;&#25345;&#26041;&#38754;&#23454;&#29616;&#24471;&#24456;&#24046;&#65292;&#23427;&#20204;&#20250;&#19982;Seam&#30340;&#23545;&#35805;&#20256;&#25773;&#21457;&#29983;&#20914;&#31361;&#12290;
            &#22914;&#26524;&#20320;&#22312;&#34920;&#21333;&#25552;&#20132;&#26102;&#36935;&#21040;&#20102;&#23545;&#35805;&#20256;&#25773;&#30340;&#38382;&#39064;&#65292;&#23601;&#23581;&#35797;&#30528;&#20999;&#25442;&#21040;&#23458;&#25143;&#31471;&#29366;&#24577;&#20445;&#25345;&#12290;&#22312;&#20320;&#30340; <tt class="literal">web.xml</tt> &#20013;&#38656;&#35201;&#26377;&#36825;&#20123;&#65306;
            </p><pre class="programlisting">&lt;context-param&gt;
    &lt;param-name&gt;javax.faces.STATE_SAVING_METHOD&lt;/param-name&gt;
    &lt;param-value&gt;client&lt;/param-value&gt;
&lt;/context-param&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e13863"></a>25.1.2.&nbsp;&#20351;&#29992;Facelets</h3></div></div><div></div></div><p>
            &#22914;&#26524;&#20320;&#24895;&#24847;&#21548;&#20174;&#25105;&#20204;&#30340;&#24314;&#35758;&#65292;&#20351;&#29992;Facelets&#20195;&#26367;JSP&#65292;&#23601;&#38656;&#35201;&#22312; <tt class="literal">faces-config.xml</tt> &#20013;&#22686;&#21152;&#20197;&#19979;&#20960;&#34892;&#65306;
            </p><pre class="programlisting">&lt;application&gt;
    &lt;view-handler&gt;com.sun.facelets.FaceletViewHandler&lt;/view-handler&gt;
&lt;/application&gt;</pre><p>
            &#24182;&#23558;&#20197;&#19979;&#20960;&#34892;&#21152;&#21040; <tt class="literal">web.xml</tt> &#20013;&#65306;
            </p><pre class="programlisting">&lt;context-param&gt;
    &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;
    &lt;param-value&gt;.xhtml&lt;/param-value&gt;
&lt;/context-param&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e13880"></a>25.1.3.&nbsp;Seam Resource Servlet</h3></div></div><div></div></div><p>
            Seam Resource Servlet&#25552;&#20379;&#36164;&#28304;&#65292;&#36825;&#20123;&#36164;&#28304;&#34987;Seam Remoting&#12289;captchas&#65288;&#35831;&#21442;&#32771;&#8220;&#23433;&#20840;&#8221;&#31456;&#33410;&#65289;&#21644;&#19968;&#20123;JSF UI&#25511;&#20214;&#25152;&#20351;&#29992;&#12290;
            &#37197;&#32622;Seam Resource Servlet&#26102;&#65292;&#38656;&#35201;&#22312; <tt class="literal">web.xml</tt> &#20013;&#26377;&#20197;&#19979;&#39033;&#65306;
            </p><pre class="programlisting">&lt;servlet&gt;
  &lt;servlet-name&gt;Seam Resource Servlet&lt;/servlet-name&gt;
  &lt;servlet-class&gt;org.jboss.seam.servlet.SeamResourceServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;Seam Resource Servlet&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/seam/resource/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e13890"></a>25.1.4.&nbsp;Seam Servlet&#36807;&#28388;&#22120;</h3></div></div><div></div></div><p>
            Seam&#30340;&#22522;&#26412;&#25805;&#20316;&#19981;&#38656;&#35201;&#20219;&#20309;Servlet&#36807;&#28388;&#22120;&#12290;&#21487;&#26159;&#65292;&#26377;&#20123;&#21151;&#33021;&#20381;&#36182;&#20110;&#36807;&#28388;&#22120;&#30340;&#20351;&#29992;&#12290;
            &#20026;&#20102;&#35753;&#19968;&#20999;&#23545;&#20320;&#26469;&#35828;&#26356;&#23481;&#26131;&#65292;Seam&#35753;&#20320;&#21487;&#20197;&#22686;&#21152;&#21644;&#37197;&#32622;Servlet&#36807;&#28388;&#22120;&#65292;&#23601;&#20687;&#20320;&#37197;&#32622;&#20854;&#20182;&#20869;&#24314;Seam&#32452;&#20214;&#19968;&#26679;&#12290;
            &#20026;&#20102;&#21033;&#29992;&#36825;&#20010;&#29305;&#24615;&#65292;&#25105;&#20204;&#24517;&#39035;&#39318;&#20808;&#22312; <tt class="literal">web.xml</tt> &#20013;&#35013;&#36733;&#19968;&#20010;&#20027;&#36807;&#28388;&#22120;&#65306;
            </p><pre class="programlisting">&lt;filter&gt;
    &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.jboss.seam.servlet.SeamFilter&lt;/filter-class&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
    &lt;filter-name&gt;Seam Filter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</pre><p>
            Seam&#20027;&#36807;&#28388;&#22120; <span class="emphasis"><em>&#24517;&#39035;</em></span> &#26159;&#22312; <tt class="literal">web.xml</tt> &#20013;&#25351;&#23450;&#30340;&#31532;&#19968;&#20010;&#36807;&#28388;&#22120;&#12290;&#36825;&#26679;&#23601;&#33021;&#20445;&#35777;&#23427;&#39318;&#20808;&#36816;&#34892;&#12290;
            </p><p>
            &#20026;&#20102;&#21462;&#28040;&#20869;&#24314;&#30340;&#36807;&#28388;&#22120;&#65292;&#20320;&#21487;&#20197;&#22312;&#19968;&#20010;&#29305;&#23450;&#30340;&#36807;&#28388;&#22120;&#20013;&#35774;&#32622; <tt class="literal">disabled="true"</tt>
            </p><p>
            &#22686;&#21152;&#20027;&#36807;&#28388;&#22120;&#20351;&#24471;&#20197;&#19979;&#20869;&#24314;&#36807;&#28388;&#22120;&#21487;&#29992;&#12290;
            </p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e13915"></a>25.1.4.1.&nbsp;&#24322;&#24120;&#22788;&#29702;</h4></div></div><div></div></div><p>
                &#36825;&#20010;&#36807;&#28388;&#22120;&#22312; <tt class="literal">pages.xml</tt> &#20013;&#25552;&#20379;&#24322;&#24120;&#26144;&#23556;&#21151;&#33021;&#65288;&#20960;&#20046;&#25152;&#26377;&#30340;&#24212;&#29992;&#31243;&#24207;&#37117;&#38656;&#35201;&#36825;&#20010;&#65289;&#12290;
                &#24403;&#26410;&#25429;&#33719;&#30340;&#24322;&#24120;&#21457;&#29983;&#26102;&#65292;&#23427;&#20063;&#36127;&#36131;&#22238;&#28378;&#26410;&#25552;&#20132;&#30340;&#20107;&#21153;&#12290;
                &#65288;&#26681;&#25454;Java EE&#35268;&#33539;&#65292;Web&#23481;&#22120;&#24212;&#35813;&#33021;&#33258;&#21160;&#20570;&#21040;&#36825;&#19968;&#28857;&#65292;&#20294;&#25105;&#20204;&#21457;&#29616;&#22312;&#25152;&#26377;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#20013;&#65292;&#37117;&#19981;&#25903;&#25345;&#36825;&#19968;&#34892;&#20026;&#12290;
                &#24403;&#28982;&#22312;&#26222;&#36890;Servlet&#24341;&#25806;&#22914;Tomcat&#20013;&#65292;&#23427;&#24182;&#19981;&#26159;&#24517;&#38656;&#30340;&#12290;&#65289;
                </p><p>
                &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#24322;&#24120;&#22788;&#29702;&#36807;&#28388;&#22120;&#23558;&#22788;&#29702;&#25152;&#26377;&#35831;&#27714;&#65292;&#20294;&#26159;&#36825;&#31181;&#34892;&#20026;&#21487;&#20197;&#36890;&#36807;&#22686;&#21152;&#19968;&#20010; <tt class="literal">&lt;web:exception-filter&gt;</tt> &#39033;&#21040; <tt class="literal">components.xml</tt> &#25991;&#20214;&#26469;&#36827;&#34892;&#35843;&#25972;&#65292;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;&#25152;&#31034;&#65306;
                </p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:web="http://jboss.com/products/seam/web"&gt;

    &lt;web:exception-filter url-pattern="*.seam"/&gt;

&lt;/components&gt;</pre><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">url-pattern</tt> &#8212; &#34987;&#29992;&#26469;&#25351;&#23450;&#36807;&#28388;&#21738;&#20123;&#35831;&#27714;&#65292;&#40664;&#35748;&#26159;&#25152;&#26377;&#35831;&#27714;&#12290;
                        </p></li></ul></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e13940"></a>25.1.4.2.&nbsp;&#36890;&#36807;&#37325;&#23450;&#21521;&#20256;&#25773;&#23545;&#35805;</h4></div></div><div></div></div><p>
                &#36825;&#20010;&#36807;&#28388;&#22120;&#20801;&#35768;Seam&#36890;&#36807;&#27983;&#35272;&#22120;&#37325;&#23450;&#21521;&#26469;&#20256;&#25773;&#23545;&#35805;&#19978;&#19979;&#25991;&#12290;
                &#23427;&#25318;&#25130;&#20219;&#20309;&#27983;&#35272;&#22120;&#37325;&#23450;&#21521;&#65292;&#24182;&#22686;&#21152;&#19968;&#20010;&#25351;&#23450;Seam&#23545;&#35805;&#26631;&#35782;&#31526;&#30340;&#35831;&#27714;&#21442;&#25968;&#12290;
                </p><p>
                &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#37325;&#23450;&#21521;&#36807;&#28388;&#22120;&#23558;&#22788;&#29702;&#25152;&#26377;&#30340;&#35831;&#27714;&#65292;&#20294;&#36825;&#20010;&#34892;&#20026;&#20063;&#21487;&#20197;&#22312; <tt class="literal">components.xml</tt> &#25991;&#20214;&#20013;&#36827;&#34892;&#35843;&#25972;&#65306;
                </p><pre class="programlisting">&lt;web:redirect-filter url-pattern="*.seam"/&gt;</pre><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">url-pattern</tt> &#8212; &#34987;&#29992;&#26469;&#25351;&#23450;&#36807;&#28388;&#21738;&#20123;&#35831;&#27714;&#65292;&#40664;&#35748;&#26159;&#25152;&#26377;&#35831;&#27714;&#12290;
                        </p></li></ul></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e13959"></a>25.1.4.3.&nbsp;&#22810;&#37325;&#34920;&#21333;&#25552;&#20132;</h4></div></div><div></div></div><p>
                &#24403;&#20351;&#29992;Seam&#25991;&#20214;&#19978;&#20256;JSF&#25511;&#20214;&#26102;&#65292;&#36825;&#20010;&#29305;&#24615;&#24456;&#26377;&#24517;&#35201;&#12290;&#23427;&#20381;&#25454;&#22810;&#37325;&#34920;&#21333;/&#25968;&#25454;&#35268;&#33539;&#65288;RFC-2388&#65289;&#26816;&#27979;&#24182;&#22788;&#29702;&#22810;&#37325;&#34920;&#21333;&#35831;&#27714;&#12290;
                &#35201;&#35206;&#30422;&#40664;&#35748;&#35774;&#32622;&#65292;&#21521; <tt class="literal">components.xml</tt> &#20013;&#22686;&#21152;&#20197;&#19979;&#39033;&#65306;
                </p><pre class="programlisting">&lt;web:multipart-filter create-temp-files="true"
                      max-request-size="1000000"
                      url-pattern="*.seam"/&gt;</pre><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">create-temp-files</tt> &#8212; &#22914;&#26524;&#35774;&#32622;&#20026; <tt class="literal">true</tt>&#65292;&#21152;&#36733;&#30340;&#25991;&#20214;&#34987;&#20889;&#21040;&#20020;&#26102;&#25991;&#20214;&#20013;&#65288;&#32780;&#19981;&#26159;&#20445;&#30041;&#22312;&#20869;&#23384;&#20013;&#65289;&#12290;
                        &#22914;&#26524;&#26399;&#26395;&#21152;&#36733;&#22823;&#25991;&#20214;&#65292;&#36825;&#20010;&#35774;&#32622;&#21487;&#33021;&#26159;&#19968;&#20010;&#24456;&#37325;&#35201;&#30340;&#32771;&#34385;&#22240;&#32032;&#12290;&#40664;&#35748;&#30340;&#35774;&#32622;&#26159; <tt class="literal">false</tt>&#12290;
                        </p></li><li><p>
                        <tt class="literal">max-request-size</tt> &#8212; &#22914;&#26524;&#21152;&#36733;&#35831;&#27714;&#20013;&#30340;&#25991;&#20214;&#22823;&#23567;&#65288;&#30001;&#35835;&#21462;&#35831;&#27714;&#20013; <tt class="literal">Content-Length</tt> &#22836;&#30340;&#30340;&#20540;&#20915;&#23450;&#65289;&#36229;&#36807;&#36825;&#20010;&#20540;&#65292;&#35813;&#35831;&#27714;&#23558;&#34987;&#20013;&#27490;&#12290;&#40664;&#35748;&#35774;&#32622;&#26159;0&#65288;&#22823;&#23567;&#19981;&#38480;&#65289;&#12290;
                        </p></li><li><p>
                        <tt class="literal">url-pattern</tt> &#8212; &#34987;&#29992;&#26469;&#25351;&#23450;&#36807;&#28388;&#21738;&#20123;&#35831;&#27714;&#65292;&#40664;&#35748;&#26159;&#25152;&#26377;&#35831;&#27714;&#12290;
                        </p></li></ul></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e13997"></a>25.1.4.4.&nbsp;&#23383;&#31526;&#32534;&#30721;</h4></div></div><div></div></div><p>&#35774;&#32622;&#34987;&#25552;&#20132;&#30340;&#34920;&#21333;&#25968;&#25454;&#30340;&#23383;&#31526;&#32534;&#30721;</p><p>
                &#40664;&#35748;&#27809;&#26377;&#35013;&#36733;&#36825;&#20010;&#36807;&#28388;&#22120;&#65292;&#23427;&#38656;&#35201;&#30001; <tt class="literal">components.xml</tt> &#20013;&#30340;&#19968;&#20010;&#39033;&#26469;&#21551;&#29992;&#65306;
                </p><pre class="programlisting">&lt;web:character-encoding-filter encoding="UTF-16"
                               override-client="true"
                               url-pattern="*.seam"/&gt;</pre><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">encoding</tt> &#8212; &#35201;&#20351;&#29992;&#30340;&#32534;&#30721;
                        </p></li><li><p>
                        <tt class="literal">override-client</tt> &#8212; &#22914;&#26524;&#23427;&#34987;&#35774;&#32622;&#20026; <tt class="literal">true</tt>&#65292;&#21017;&#35831;&#27714;&#20013;&#30340;&#32534;&#30721;&#23558;&#34987;&#35774;&#32622;&#20026; <tt class="literal">encoding</tt> &#25351;&#23450;&#30340;&#20219;&#20309;&#20540;&#65292;&#32780;&#19981;&#31649;&#35831;&#27714;&#20013;&#26159;&#21542;&#24050;&#32463;&#25351;&#23450;&#19968;&#31181;&#32534;&#30721;&#12290;
                        &#22914;&#26524;&#35774;&#32622;&#20026; <tt class="literal">false</tt>&#65292;&#24403;&#35831;&#27714;&#20013;&#27809;&#26377;&#25351;&#23450;&#20219;&#20309;&#19968;&#31181;&#32534;&#30721;&#26102;&#65292;&#25165;&#20250;&#35774;&#32622;&#35831;&#27714;&#32534;&#30721;&#12290;&#40664;&#35748;&#35774;&#32622;&#26159; <tt class="literal">false</tt>
                        </p></li><li><p>
                        <tt class="literal">url-pattern</tt> &#8212; &#34987;&#29992;&#26469;&#25351;&#23450;&#36807;&#28388;&#21738;&#20123;&#35831;&#27714;&#65292;&#40664;&#35748;&#26159;&#25152;&#26377;&#35831;&#27714;&#12290;
                        </p></li></ul></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e14040"></a>25.1.4.5.&nbsp;RichFaces</h4></div></div><div></div></div><p>
                &#22914;&#26524;&#22312;&#20320;&#30340;&#24037;&#31243;&#20013;&#20351;&#29992;&#20102;Ajax4jsf&#65292;Seam&#20250;&#30830;&#20445;&#22312;&#35013;&#36733;&#20854;&#20182;&#25152;&#26377;&#20869;&#24314;&#36807;&#28388;&#22120;&#20043;&#21069;&#65292;&#20026;&#20320;&#35013;&#36733;Ajax4jsf&#36807;&#28388;&#22120;&#12290;
                &#20320;&#19981;&#24517;&#20146;&#33258;&#22312; <tt class="literal">web.xml</tt> &#20013;&#35013;&#36733;Ajax4jsf&#36807;&#28388;&#22120;&#12290;
                </p><p>
                &#21482;&#26377;&#24403;&#20320;&#30340;&#24037;&#31243;&#20013;&#26377;RichFaces jar&#21253;&#26102;&#65292;&#25165;&#20250;&#23433;&#35013;RichFaces Ajax&#36807;&#28388;&#22120;&#12290;
                </p><p>
                &#20026;&#20102;&#35206;&#30422;&#40664;&#35748;&#30340;&#35774;&#32622;&#65292;&#35201;&#22312; <tt class="literal">components.xml</tt> &#20013;&#22686;&#21152;&#20197;&#19979;&#39033;&#12290;&#36825;&#20123;&#36873;&#39033;&#19982;RichFaces&#24320;&#21457;&#32773;&#25351;&#21335;&#20013;&#25351;&#23450;&#30340;&#19968;&#26679;&#65306;
                </p><pre class="programlisting">&lt;web:ajax4jsf-filter force-parser="true"
                     enable-cache="true"
                     log4j-init-file="custom-log4j.xml"
                     url-pattern="*.seam"/&gt;</pre><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">force-parser</tt> &#8212; &#24378;&#21046;Richfaces&#30340;XMl&#35821;&#27861;&#26816;&#39564;&#22120;&#21435;&#39564;&#35777;&#25152;&#26377;&#30340;JSF&#39029;&#38754;&#12290;
                        &#22914;&#26524;&#20026; <tt class="literal">false</tt>&#65292;&#21017;&#21482;&#26377;AJAX&#21709;&#24212;&#25165;&#34987;&#39564;&#35777;&#24182;&#34987;&#36716;&#25442;&#25104;&#21512;&#36866;&#30340;XML&#12290;
                        &#35774;&#32622;<tt class="literal">force-parser</tt> &#20026; <tt class="literal">false</tt> &#21487;&#20197;&#25552;&#39640;&#24615;&#33021;&#65292;&#20294;&#20250;&#22312;AJAX&#26356;&#26032;&#26102;&#25552;&#20379;&#21487;&#35270;&#21270;&#30340;&#24037;&#20214;&#12290;
                        </p></li><li><p>
                        <tt class="literal">enable-cache</tt> &#8212; &#21551;&#29992;&#26694;&#26550;&#29983;&#25104;&#36164;&#28304;&#30340;&#32531;&#23384;&#65288;&#22914;&#65292;JavaScript&#65292;CSS&#65292;Images&#31561;&#65289;&#12290;
                        &#24403;&#24320;&#21457;&#23450;&#21046;&#30340;JavaScript&#25110;CSS&#26102;&#65292;&#35774;&#32622;&#20026;true&#20197;&#38459;&#27490;&#27983;&#35272;&#22120;&#32531;&#23384;&#36825;&#20123;&#36164;&#28304;&#12290;
                        </p></li><li><p>
                        <tt class="literal">log4j-init-file</tt> &#8212; &#34987;&#29992;&#20110;&#23433;&#35013; per-application &#35760;&#24405;&#12290;
                        &#24212;&#35813;&#25552;&#20379;&#19968;&#20010;&#30456;&#23545;&#20110;web&#31243;&#24207;&#19978;&#19979;&#25991;&#30340;log4j.xml&#37197;&#32622;&#25991;&#20214;&#36335;&#24452;&#12290;
                        </p></li><li><p>
                        <tt class="literal">url-pattern</tt> &#8212; &#29992;&#26469;&#25351;&#23450;&#36807;&#28388;&#21738;&#20123;&#35831;&#27714;&#65292;&#40664;&#35748;&#26159;&#25152;&#26377;&#35831;&#27714;&#12290;
                        </p></li></ul></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e14091"></a>25.1.4.6.&nbsp;Identity Logging</h4></div></div><div></div></div><p>
                &#36825;&#20010;&#36807;&#28388;&#22120;&#23558;&#34987;&#39564;&#35777;&#30340;&#29992;&#25143;&#21517;&#28155;&#21152;&#21040;log4j&#26144;&#23556;&#35786;&#26029;&#19978;&#19979;&#25991;&#20013;&#65292;&#20197;&#20415;&#22914;&#26524;&#21916;&#27426;&#65292;&#21487;&#33021;&#36890;&#36807;&#22312;&#27169;&#24335;&#20013;&#28155;&#21152;%X{username}&#65292;&#20351;&#23427;&#33021;&#22815;&#34987;&#21253;&#21547;&#22312;&#26684;&#24335;&#21270;&#36807;&#30340;&#26085;&#24535;&#36755;&#20986;&#20013;&#12290;
                </p><p>
                &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#35760;&#24405;&#36807;&#34385;&#22120;&#20250;&#22788;&#29702;&#25152;&#26377;&#35831;&#27714;&#65292;&#20294;&#26159;&#36825;&#19968;&#34892;&#20026;&#21487;&#20197;&#36890;&#36807;&#22312; <tt class="literal">components.xml</tt> &#20013;&#28155;&#21152; <tt class="literal">&lt;web:logging-filter&gt;</tt> &#39033;&#26469;&#36827;&#34892;&#35843;&#25972;&#65292;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;&#25152;&#31034;&#65306;
				</p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:web="http://jboss.com/products/seam/web"&gt;
    &lt;web:logging-filter url-pattern="*.seam"/&gt;
&lt;/components&gt;</pre><div class="itemizedlist"><ul type="disc"><li><p>
                            <tt class="literal">url-pattern</tt> &#8212; Used to specify which requests the filter is active for. The
                            default is all requests.
                            <tt class="literal">url-pattern</tt> &#8212;&#29992;&#26469;&#25351;&#23450;&#35813;&#36807;&#28388;&#22120;&#26159;&#20026;&#21738;&#20123;&#35831;&#27714;&#32780;&#28608;&#27963;&#30340;&#12290;&#40664;&#35748;&#26159;&#25152;&#26377;&#35831;&#27714;&#12290;</p></li></ul></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e14116"></a>25.1.4.7.&nbsp;&#23450;&#21046;Servlet&#30340;&#19978;&#19979;&#25991;&#31649;&#29702;</h4></div></div><div></div></div><p>
                &#30452;&#25509;&#21457;&#36865;&#21040;&#26576;&#20123;Servlet&#32780;&#19981;&#26159;JSF Servlet&#30340;&#35831;&#27714;&#19981;&#22312;JSF&#29983;&#21629;&#21608;&#26399;&#20013;&#34987;&#22788;&#29702;&#65292;&#22240;&#27492;Seam&#25552;&#20379;&#20102;&#19968;&#20010;Servlet&#36807;&#28388;&#22120;&#20379;&#20854;&#20182;&#30340;Servlet&#20351;&#29992;&#65292;&#36825;&#20123;Servlet&#38656;&#35201;&#35775;&#38382;Seam&#32452;&#20214;&#12290;
                </p><p>
                &#36825;&#20010;&#36807;&#28388;&#22120;&#20801;&#35768;&#23450;&#21046;&#30340;Servlet&#19982;Seam&#19978;&#19979;&#25991;&#20132;&#20114;&#12290;&#23427;&#22312;&#27599;&#20010;&#35831;&#27714;&#30340;&#24320;&#22987;&#35774;&#31435;Seam&#19978;&#19979;&#25991;&#65292;&#24182;&#22312;&#35831;&#27714;&#32467;&#26463;&#26102;&#21368;&#25481;&#23427;&#20204;&#12290;
                &#20320;&#24517;&#39035;&#30830;&#20445;&#36825;&#20010;&#36807;&#28388;&#22120; <span class="emphasis"><em>&#27704;&#36828;&#19981;</em></span> &#34987;&#29992;&#20110;JSF <tt class="literal">FacesServlet</tt>&#12290;
                Seam&#22312;JSF&#35831;&#27714;&#20013;&#20026;&#19978;&#19979;&#25991;&#31649;&#29702;&#20351;&#29992;&#38454;&#27573;&#30417;&#21548;&#22120;&#65288;phase listener&#65289;&#12290;
                </p><p>
                &#40664;&#35748;&#27809;&#26377;&#35013;&#36733;&#36825;&#20010;&#36807;&#28388;&#22120;&#65292;&#23427;&#38656;&#35201;&#30001; <tt class="literal">components.xml</tt> &#20013;&#30340;&#19968;&#20010;&#39033;&#26469;&#21551;&#29992;&#65306;
                </p><pre class="programlisting">&lt;web:context-filter url-pattern="/media/*"/&gt;</pre><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">url-pattern</tt> &#8212; &#34987;&#29992;&#26469;&#25351;&#23450;&#36807;&#28388;&#21738;&#20123;&#35831;&#27714;&#65292;&#40664;&#35748;&#26159;&#25152;&#26377;&#35831;&#27714;&#12290;
                        &#22914;&#26524;&#19978;&#19979;&#25991;&#36807;&#28388;&#22120;&#30340;URL&#27169;&#24335;&#24050;&#25351;&#23450;&#65292;&#21017;&#23558;&#21551;&#29992;&#35813;&#36807;&#28388;&#22120;&#65288;&#38500;&#38750;&#26126;&#30830;&#21462;&#28040;&#65289;&#12290;
                        </p></li></ul></div><p>
                &#19978;&#19979;&#25991;&#36807;&#28388;&#22120;&#26399;&#26395;&#22312;&#21517;&#31216;&#20026; <tt class="literal">conversationId</tt> &#30340;&#35831;&#27714;&#21442;&#25968;&#20013;&#65292;&#25214;&#21040;&#25152;&#26377;&#23545;&#35805;&#19978;&#19979;&#25991;&#30340;&#23545;&#35805;id&#12290;
                &#20320;&#35201;&#36127;&#36131;&#30830;&#20445;&#23545;&#35805;ID&#22312;&#35831;&#27714;&#20013;&#34987;&#21457;&#36865;&#12290;
                </p><p>
                &#20320;&#36824;&#38656;&#35201;&#36127;&#36131;&#30830;&#20445;&#23558;&#25152;&#26377;&#26032;&#30340;&#23545;&#35805;id&#20256;&#36865;&#22238;&#23458;&#25143;&#31471;&#12290;Seam&#23558;&#23545;&#35805;id&#20316;&#20026;&#20869;&#24314;&#30340; <tt class="literal">conversation</tt> &#32452;&#20214;&#30340;&#19968;&#20010;&#23646;&#24615;&#26292;&#38706;&#20986;&#26469;&#12290;
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e14153"></a>25.1.4.8.&nbsp;&#22686;&#21152;&#23450;&#21046;&#30340;&#36807;&#28388;&#22120;</h4></div></div><div></div></div><p>
                Seam&#33021;&#20026;&#20320;&#35013;&#36733;&#36807;&#28388;&#22120;&#65292;&#20801;&#35768;&#20320;&#25351;&#23450;&#36807;&#28388;&#22120;&#35201;&#25918;&#22312;&#36807;&#28388;&#22120;&#38142;&#20013;&#30340; <span class="emphasis"><em>&#20160;&#20040;&#20301;&#32622;</em></span>
                &#65288;&#22914;&#26524;&#20320;&#22312; <tt class="literal">web.xml</tt> &#20013;&#25351;&#23450;&#33258;&#24049;&#30340;&#36807;&#28388;&#22120;&#65292;servlet&#35268;&#33539;&#23601;&#27809;&#26377;&#25552;&#20379;&#19968;&#20010;&#23450;&#20041;&#33391;&#22909;&#30340;&#39034;&#24207;&#65289;&#12290;
                &#21482;&#38656;&#35201;&#32473;&#20320;&#30340;Seam&#32452;&#20214;&#21152;&#19978; <tt class="literal">@Filter</tt> &#27880;&#35299;&#65288;&#20320;&#30340;Seam&#32452;&#20214;&#24517;&#39035;&#23454;&#29616; <tt class="literal">javax.servlet.Filter</tt>&#65289;&#12290;
                </p><pre class="programlisting">@Startup
@Scope(APPLICATION)
@Name("org.jboss.seam.web.multipartFilter")
@BypassInterceptors
@Filter(within="org.jboss.seam.web.ajax4jsfFilter")
public class MultipartFilter extends AbstractFilter {</pre><p>
                &#22686;&#21152; <tt class="literal">@Startup</tt> &#27880;&#35299;&#24847;&#21619;&#30528;&#35813;&#32452;&#20214;&#22312;Seam&#21551;&#21160;&#26102;&#26377;&#25928;&#65307;&#21452;&#21521;&#27880;&#20837;&#65288;bijection&#65289;&#22312;&#36825;&#37324;&#26080;&#25928;&#65288;<tt class="literal">@BypassInterceptors</tt>&#65289;&#65307;
                &#24182;&#19988;&#35813;&#36807;&#28388;&#22120;&#22312;&#38142;&#20013;&#24212;&#35813;&#27604;Ajax4jsf&#36807;&#28388;&#22120;&#65288;<tt class="literal">@Filter(within="org.jboss.seam.web.ajax4jsfFilter")</tt>&#65289;&#26356;&#38752;&#21518;&#19968;&#20123;&#12290;
                </p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14183"></a>25.1.5.&nbsp;&#23558;Seam&#19982;&#20320;&#30340;EJB&#23481;&#22120;&#38598;&#25104;</h3></div></div><div></div></div><p>
            &#25105;&#20204;&#38656;&#35201;&#23558; <tt class="literal">SeamInterceptor</tt> &#29992;&#20110;&#25105;&#20204;&#30340;Seam&#32452;&#20214;&#12290;
            &#22312;&#25972;&#20010;&#31243;&#24207;&#20013;&#23436;&#25104;&#36825;&#20010;&#30340;&#26368;&#31616;&#21333;&#26041;&#24335;&#26159;&#22312; <tt class="literal">ejb-jar.xml</tt> &#20013;&#22686;&#21152;&#20197;&#19979;&#25318;&#25130;&#22120;&#37197;&#32622;&#65306;
            </p><pre class="programlisting">&lt;interceptors&gt;
    &lt;interceptor&gt;
        &lt;interceptor-class&gt;org.jboss.seam.ejb.SeamInterceptor&lt;/interceptor-class&gt;
    &lt;/interceptor&gt;
&lt;/interceptors&gt;

&lt;assembly-descriptor&gt;
    &lt;interceptor-binding&gt;
        &lt;ejb-name&gt;*&lt;/ejb-name&gt;
        &lt;interceptor-class&gt;org.jboss.seam.ejb.SeamInterceptor&lt;/interceptor-class&gt;
    &lt;/interceptor-binding&gt;
&lt;/assembly-descriptor&gt;
</pre><p>
            Seam&#38656;&#35201;&#30693;&#36947;&#22312;JNDI&#20013;&#21040;&#21738;&#37324;&#21435;&#23547;&#25214;&#20250;&#35805;Bean&#12290;&#20854;&#20013;&#19968;&#31181;&#26041;&#27861;&#26159;&#22312;&#27599;&#20010;&#20250;&#35805;Bean Seam&#32452;&#20214;&#20013;&#25351;&#23450; <tt class="literal">@JndiName</tt>&#27880;&#35299;&#12290;
            &#28982;&#32780;&#65292;&#36825;&#26679;&#30456;&#24403;&#20047;&#21619;&#12290;&#26356;&#22909;&#30340;&#19968;&#31181;&#26041;&#24335;&#26159;&#25351;&#23450;&#19968;&#31181;&#27169;&#24335;&#65292;Seam&#21487;&#20197;&#26681;&#25454;&#36825;&#20010;&#27169;&#24335;&#20174;EJB&#21517;&#31216;&#37324;&#25512;&#31639;&#20986;JNDI&#30340;&#21517;&#31216;&#12290;
            &#19981;&#24184;&#30340;&#26159;&#65292;&#22312;EJB3&#35268;&#33539;&#37324;&#38754;&#65292;&#27809;&#26377;&#23450;&#20041;&#21040;&#20840;&#23616;JNDI&#30340;&#26631;&#20934;&#26144;&#23556;&#65292;&#25152;&#20197;&#36825;&#20010;&#26144;&#23556;&#26159;&#29305;&#23450;&#20110;&#20379;&#24212;&#21830;&#30340;&#12290;
            &#25105;&#20204;&#36890;&#24120;&#22312; <tt class="literal">components.xml</tt> &#20013;&#25351;&#23450;&#36825;&#20010;&#36873;&#39033;&#12290;
            </p><p>
            &#23545;&#20110;JBoss AS&#65292;&#20197;&#19979;&#30340;&#27169;&#24335;&#26159;&#27491;&#30830;&#30340;&#65306;
            </p><pre class="programlisting">&lt;core:init jndi-name="myEarName/#{ejbName}/local" /&gt;</pre><p>
            <tt class="literal">myEarName</tt>&#23601;&#26159;&#37096;&#32626;Bean&#25152;&#22312;EAR&#30340;&#21517;&#31216;&#12290;
            </p><p>
            &#22312;&#19968;&#20010;EAR&#30340;&#22806;&#38754;&#65288;&#24403;&#20351;&#29992;&#23884;&#20837;&#24335;&#30340;JBoss&#30340;EJB3&#23481;&#22120;&#26102;&#65289;&#65292;&#20197;&#19979;&#27169;&#24335;&#23601;&#26159;&#35201;&#29992;&#21040;&#30340;&#37027;&#20010;&#65306;
            </p><pre class="programlisting">&lt;core:init jndi-name="#{ejbName}/local" /&gt;</pre><p>
            &#20320;&#19981;&#24471;&#19981;&#23581;&#35797;&#30528;&#21435;&#25214;&#21040;&#20854;&#20182;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#30340;&#27491;&#30830;&#37197;&#32622;&#12290;
            &#27880;&#24847;&#26377;&#20123;&#26381;&#21153;&#22120;&#65288;&#27604;&#22914;GlassFish&#65289;&#35201;&#27714;&#20320;&#20026;&#25152;&#26377;EJB&#32452;&#20214;&#30452;&#25509;&#65288;&#32780;&#19988;&#24456;&#20047;&#21619;&#22320;&#65289;&#25351;&#23450;JNDI&#21517;&#31216;&#12290;
            &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#20320;&#33258;&#24049;&#30340;&#27169;&#24335;&#12290;:-)
            </p><p>
            &#22312;&#19968;&#20010;EJB3&#30340;&#29615;&#22659;&#20013;&#65292;&#25105;&#20204;&#24314;&#35758;&#32473;&#20107;&#21153;&#31649;&#29702;&#20351;&#29992;&#19968;&#20010;&#29305;&#27530;&#30340;&#20869;&#24314;&#32452;&#20214;&#65292;&#23427;&#23436;&#20840;&#30693;&#36947;&#23481;&#22120;&#20107;&#21153;&#65292;&#24182;&#19988;&#21487;&#20197;&#27491;&#30830;&#22320;&#22788;&#29702;&#29992; <tt class="literal">Events</tt> &#32452;&#20214;&#27880;&#20876;&#30340;&#20107;&#21153;&#25104;&#21151;&#20107;&#20214;&#12290;
            &#22914;&#26524;&#20320;&#27809;&#26377;&#22312;&#20320;&#30340; <tt class="literal">components.xml</tt> &#25991;&#20214;&#20013;&#22686;&#21152;&#36825;&#20960;&#34892;&#65292;Seam&#23601;&#19981;&#20250;&#30693;&#36947;&#23481;&#22120;&#31649;&#29702;&#30340;&#20107;&#21153;&#20160;&#20040;&#26102;&#20505;&#32467;&#26463;:
            </p><pre class="programlisting">&lt;transaction:ejb-transaction/&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14229"></a>25.1.6.&nbsp;&#20999;&#35760;&#65281;</h3></div></div><div></div></div><p>
            &#36824;&#26377;&#26368;&#21518;&#19968;&#28857;&#20320;&#35201;&#30693;&#36947;&#30340;&#12290;&#20320;&#24517;&#39035;&#22312;&#37096;&#32626;&#20320;&#30340;Seam&#32452;&#20214;&#30340;&#27599;&#20010;&#21387;&#32553;&#25991;&#26723;&#20013;&#65288;&#21363;&#20351;&#31354;&#30340;&#23646;&#24615;&#25991;&#20214;&#20063;&#35201;&#36825;&#26679;&#65289;&#65292;&#25918;&#32622;&#19968;&#20010;
            <tt class="literal">seam.properties</tt>&#12289;<tt class="literal">META-INF/seam.properties</tt> &#25110;<tt class="literal">META-INF/components.xml</tt>&#25991;&#20214;&#12290;
            &#22312;&#21551;&#21160;&#26102;&#65292;Seam&#23558;&#20250;&#26681;&#25454; <tt class="literal">seam.properties</tt> &#25991;&#20214;&#25195;&#25551;&#25152;&#26377;&#21387;&#32553;&#26723;&#26696;&#23547;&#25214;Seam&#32452;&#20214;&#12290;
            </p><p>
            &#22312;&#19968;&#20010;Web&#21387;&#32553;&#26723;&#26696;&#65288;WAR&#65289;&#25991;&#20214;&#20013;&#65292;&#22914;&#26524;&#22312; <tt class="literal">WEB-INF/classes</tt> &#30446;&#24405;&#19979;&#65292;&#21253;&#21547;&#26377;&#20219;&#20309;Seam&#32452;&#20214;&#65292;&#20320;&#24517;&#39035;&#22312;&#35813;&#30446;&#24405;&#20013;&#25918;&#32622;&#19968;&#20010; <tt class="literal">seam.properties</tt>&#25991;&#20214;&#12290;
            </p><p>
            &#36825;&#23601;&#26159;&#20026;&#20160;&#20040;&#25152;&#26377;&#30340;Seam&#31034;&#20363;&#31243;&#24207;&#37117;&#26377;&#19968;&#20010;&#31354;&#30340; <tt class="literal">seam.properties</tt> &#25991;&#20214;&#30340;&#21407;&#22240;&#12290;
            &#20320;&#19981;&#33021;&#21024;&#25481;&#36825;&#20123;&#25991;&#20214;&#65292;&#36824;&#26399;&#24453;&#19968;&#20999;&#20173;&#28982;&#27491;&#24120;&#36816;&#34892;&#65281;
            </p><p>
            &#20320;&#21487;&#33021;&#20250;&#35273;&#24471;&#36825;&#24456;&#24858;&#34850;&#65292;&#24182;&#19988;&#26694;&#26550;&#30340;&#35774;&#35745;&#32773;&#20570;&#19968;&#20010;&#31354;&#25991;&#20214;&#26469;&#24433;&#21709;&#20182;&#20204;&#30340;&#36719;&#20214;&#35813;&#26159;&#22810;&#20040;&#30340;&#30333;&#30196;&#21834;&#65311;
            &#24403;&#28982;&#65292;&#36825;&#26159;&#38024;&#23545;Java&#34394;&#25311;&#26426;&#30340;&#38480;&#21046;&#25152;&#37319;&#21462;&#30340;&#19968;&#31181;&#26435;&#23452;&#20043;&#35745; &#8212; &#22914;&#26524;&#25105;&#20204;&#19981;&#20351;&#29992;&#36825;&#20010;&#26426;&#21046;&#65292;&#37027;&#20040;&#25105;&#20204;&#30340;&#19979;&#19968;&#20010;&#26368;&#20339;&#36873;&#39033;&#23558;&#36924;&#36843;&#20320;&#26174;&#24335;&#22320;&#22312; <tt class="literal">components.xml</tt> &#20013;&#21015;&#20986;&#25152;&#26377;&#30340;&#32452;&#20214;&#65292;&#23601;&#20687;&#20854;&#20182;&#26576;&#20123;&#31454;&#20105;&#26694;&#26550;&#25152;&#20570;&#30340;&#37027;&#26679;&#65281;&#25105;&#24819;&#20320;&#20250;&#21916;&#27426;&#26356;&#21916;&#27426;&#25105;&#20204;&#36825;&#31181;&#26041;&#24335;&#12290;
            </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14264"></a>25.2.&nbsp;&#22312;Java EE 5&#20013;&#37197;&#32622;Seam</h2></div></div><div></div></div><div class="mediaobject" align="center"><img src="images/ee5.png" align="middle"></div><p>
        &#22914;&#26524;&#20320;&#26159;&#22312;Java EE 5&#30340;&#29615;&#22659;&#19979;&#36816;&#34892;&#65292;&#36825;&#23601;&#26159;&#24320;&#22987;&#20351;&#29992;Seam&#25152;&#38656;&#30340;&#20840;&#37096;&#37197;&#32622;&#65281;
        </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14274"></a>25.2.1.&nbsp;&#25171;&#21253;</h3></div></div><div></div></div><p>
            &#19968;&#26086;&#20320;&#23558;&#25152;&#26377;&#36825;&#20123;&#19996;&#35199;&#37117;&#25171;&#21253;&#21040;&#19968;&#20010;EAR&#25991;&#20214;&#20013;&#65292;&#35813;&#21387;&#32553;&#25991;&#26723;&#30475;&#36215;&#26469;&#23601;&#20250;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">my-application.ear/
    jboss-seam.jar
    lib/
        jboss-el.jar
    META-INF/
        MANIFEST.MF
        application.xml
    my-application.war/
        META-INF/
            MANIFEST.MF
        WEB-INF/
            web.xml
            components.xml
            faces-config.xml
            lib/
                jsf-facelets.jar
                jboss-seam-ui.jar
        login.jsp
        register.jsp
        ...
    my-application.jar/
        META-INF/
            MANIFEST.MF
            persistence.xml
        seam.properties
        org/
            jboss/
                myapplication/
                    User.class
                    Login.class
                    LoginBean.class
                    Register.class
                    RegisterBean.class
                    ...</pre><p>
            &#20320;&#35201;&#22312; <tt class="literal">META-INF/application.xml</tt> &#20013;&#23558; <tt class="literal">jboss-seam.jar</tt> &#22768;&#26126;&#20026;&#19968;&#20010;EJB&#27169;&#22359;&#12290;
            <tt class="literal">jboss-el.jar</tt> &#24212;&#35813;&#34987;&#25918;&#32622;&#22312;EAR&#30340;lib&#30446;&#24405;&#19979;&#65288;&#23558;&#23427;&#25918;&#22312;EAR&#30340;classpath&#20013;&#65289;&#12290;
            </p><p>
            &#22914;&#26524;&#20320;&#24819;&#20351;&#29992;jBPM&#25110;Drools&#65292;&#20320;&#24517;&#39035;&#22312;EAR&#30340;lib&#30446;&#24405;&#19979;&#21253;&#21547;&#25152;&#38656;&#35201;&#30340;jar&#25991;&#20214;&#12290;
            </p><p>
            &#22914;&#26524;&#20320;&#24819;&#20351;&#29992;Facelets&#65288;&#25105;&#20204;&#24314;&#35758;&#20351;&#29992;&#65289;&#65292;&#20320;&#24517;&#39035;&#22312;WAR&#30340; <tt class="literal">WEB-INF/lib</tt> &#30446;&#24405;&#19979;&#21253;&#21547; <tt class="literal">jsf-facelets.jar</tt>
            </p><p>
            &#22914;&#26524;&#20320;&#24819;&#20351;&#29992;Seam&#26631;&#31614;&#24211;&#65288;&#22823;&#22810;&#25968;Seam&#24212;&#29992;&#31243;&#24207;&#37117;&#36825;&#20040;&#20570;&#65289;&#65292;&#20320;&#23601;&#24517;&#39035;&#22312;WAR&#30340; <tt class="literal">WEB-INF/lib</tt> &#30446;&#24405;&#19979;&#21253;&#21547; <tt class="literal">jboss-seam-ui.jar</tt>&#12290;
            &#22914;&#26524;&#20320;&#24819;&#29992;PDF&#25110;&#32773;Email&#26631;&#31614;&#24211;&#65292;&#21017;&#38656;&#35201;&#22312; <tt class="literal">WEB-INF/lib</tt> &#30446;&#24405;&#19979;&#25918;&#32622; <tt class="literal">jboss-seam-pdf.jar</tt> &#25110; <tt class="literal">jboss-seam-mail.jar</tt>&#12290;
            </p><p>
            &#22914;&#26524;&#20320;&#24819;&#35201;&#20351;&#29992;Seam&#35843;&#35797;&#39029;&#38754;&#65288;&#21482;&#22312;&#20351;&#29992;Facelets&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#26377;&#25928;&#65289;&#65292;&#20320;&#24517;&#39035;&#22312;WAR&#30340; <tt class="literal">WEB-INF/lib</tt> &#30446;&#24405;&#19979;&#21253;&#21547;<tt class="literal">jboss-seam-debug.jar</tt>
            </p><p>
            Seam&#21457;&#34892;&#26102;&#21253;&#25324;&#20960;&#20010;&#31034;&#20363;&#31243;&#24207;&#65292;&#20182;&#20204;&#33021;&#22312;&#20219;&#20309;&#25903;&#25345;EJB 3.0&#30340;Java EE&#23481;&#22120;&#20013;&#37096;&#32626;&#12290;
            </p><p>
            &#25105;&#30495;&#30340;&#24076;&#26395;&#36825;&#23601;&#26159;&#37197;&#32622;&#19987;&#39064;&#25152;&#35201;&#35828;&#30340;&#20840;&#37096;&#20869;&#23481;&#65292;&#21487;&#24796;&#30340;&#26159;&#65292;&#25105;&#20204;&#21482;&#28041;&#21450;&#21040;&#20102;&#23427;&#30340;&#19977;&#20998;&#20043;&#19968;&#12290;
            &#22914;&#26524;&#20320;&#23454;&#22312;&#26080;&#27861;&#24525;&#21463;&#25152;&#26377;&#36825;&#20123;&#20851;&#20110;&#37197;&#32622;&#30340;&#24223;&#35805;&#65292;&#23613;&#31649;&#25918;&#24515;&#22320;&#36339;&#36807;&#26412;&#33410;&#21097;&#19979;&#30340;&#37096;&#20998;&#65292;&#20197;&#21518;&#20877;&#22238;&#26469;&#36825;&#37324;&#12290;
            </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14331"></a>25.3.&nbsp;&#22312;J2EE&#20013;&#37197;&#32622;Seam</h2></div></div><div></div></div><p>
        Seam&#24456;&#26377;&#29992;&#65292;&#21363;&#20351;&#20320;&#36824;&#27809;&#26377;&#20882;&#38505;&#23581;&#35797;EJB 3.0&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;Hibernate3&#25110;&#32773;JPA&#20195;&#26367;EJB 3.0&#25345;&#20037;&#21270;&#25216;&#26415;&#65292;&#24182;&#29992;&#31616;&#21333;&#30340;JavaBeans&#20195;&#26367;&#20250;&#35805;Bean&#12290;
        &#20320;&#21487;&#33021;&#20250;&#38169;&#36807;&#20250;&#35805;bean&#30340;&#26576;&#20123;&#24456;&#22909;&#30340;&#29305;&#24615;&#65292;&#20294;&#26159;&#24403;&#20320;&#20934;&#22791;&#22909;&#26102;&#65292;&#36825;&#23558;&#20250;&#24456;&#23481;&#26131;&#36801;&#31227;&#21040;EJB 3.0&#65292;&#21516;&#26102;&#65292;&#20320;&#23558;&#33021;&#21033;&#29992;Seam&#29420;&#29305;&#30340;&#22768;&#26126;&#24335;&#29366;&#24577;&#31649;&#29702;&#26550;&#26500;&#12290;
        </p><div class="mediaobject" align="center"><img src="images/hibernate-ee.png" align="middle"></div><p>
        Seam JavaBean&#32452;&#20214;&#19981;&#20250;&#20687;&#20250;&#35805;Bean&#37027;&#26679;&#25552;&#20379;&#22768;&#26126;&#24335;&#20107;&#21153;&#21010;&#20998;&#12290;&#20320; <span class="emphasis"><em>&#21487;&#20197;</em></span> &#20351;&#29992; JTA <tt class="literal">UserTransaction</tt> &#25163;&#21160;&#31649;&#29702;&#20320;&#30340;&#20107;&#21153;&#65292;&#25110;&#32773;&#20351;&#29992;Seam&#30340; <tt class="literal">@Transactional</tt> &#26631;&#27880;&#22768;&#26126;&#12290;
        &#20294;&#26159;&#24403;&#19982;JavaBean&#19968;&#36215;&#20351;&#29992;Hibernate&#26102;&#65292;&#22823;&#37096;&#20998;&#24212;&#29992;&#31243;&#24207;&#21482;&#20250;&#29992;&#21040;&#30001;Seam&#31649;&#29702;&#30340;&#20107;&#21153;&#12290;
        </p><p>
        Seam&#21457;&#34892;&#21253;&#37324;&#21253;&#25324;&#39044;&#35746;&#31034;&#20363;&#31243;&#24207;&#30340;&#19968;&#31181;&#20351;&#29992;Hibernate3&#21644;JavaBeans&#32780;&#19981;&#26159;EJB3&#30340;&#29256;&#26412;&#65292;&#20197;&#21450;&#21478;&#19968;&#31181;&#20351;&#29992;JPA&#21644;JavaBeans&#30340;&#29256;&#26412;&#12290;
        &#36825;&#20123;&#31034;&#20363;&#31243;&#24207;&#21487;&#20197;&#38543;&#26102;&#37096;&#32626;&#21040;&#20219;&#20309;J2EE&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#20013;&#12290;
        </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14354"></a>25.3.1.&nbsp;&#22312;Seam&#20013;&#24341;&#23548;Hibernate</h3></div></div><div></div></div><p>
            &#22914;&#26524;&#20320;&#35013;&#36733;&#20102;&#19968;&#20010;&#20869;&#24314;&#30340;&#32452;&#20214;&#65292;Seam&#23558;&#20250;&#20174;&#20320;&#30340; <tt class="literal">hibernate.cfg.xml</tt> &#25991;&#20214;&#20013;&#24341;&#23548;&#19968;&#20010; Hibernate <tt class="literal">SessionFactory</tt>&#65306;
            </p><pre class="programlisting">&lt;persistence:hibernate-session-factory name="hibernateSessionFactory"/&gt;</pre><p>
            &#22914;&#26524;&#20320;&#24819;&#35201;&#36890;&#36807;&#27880;&#20837;&#24471;&#21040;&#19968;&#20010;&#30001;Seam&#31649;&#29702;&#30340;Hibernate <tt class="literal">Session</tt>&#65292;&#36824;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010; <span class="emphasis"><em>managed session</em></span>&#12290;
            </p><pre class="programlisting">&lt;persistence:managed-hibernate-session name="hibernateSessionFactory"
                            session-factory="#{hibernateSessionFactory}"/&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14377"></a>25.3.2.&nbsp;&#22312;Seam&#20013;&#24341;&#23548;JPA</h3></div></div><div></div></div><p>
            &#22914;&#26524;&#20320;&#35013;&#36733;&#20102;&#19968;&#20010;&#20869;&#24314;&#30340;&#32452;&#20214;&#65292;Seam&#23558;&#20250;&#20174;&#20320;&#30340; <tt class="literal">persistence.xml</tt> &#25991;&#20214;&#20013;&#24341;&#23548;&#19968;&#20010; JPA <tt class="literal">EntityManagerFactory</tt>&#65306;
            </p><pre class="programlisting">&lt;persistence:entity-manager-factory name="entityManagerFactory"/&gt;</pre><p>
            &#22914;&#26524;&#20320;&#24819;&#35201;&#36890;&#36807;&#27880;&#20837;&#24471;&#21040;&#19968;&#20010;&#30001;Seam&#31649;&#29702;&#30340;JPA <tt class="literal">EntityManager</tt>&#65292;&#36824;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010; <span class="emphasis"><em>managed persistence context</em></span>&#12290;
            </p><pre class="programlisting">&lt;persistence:managed-persistence-context name="entityManager"
                            entity-manager-factory="#{entityManagerFactory}"/&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14400"></a>25.3.3.&nbsp;&#25171;&#21253;</h3></div></div><div></div></div><p>
            &#25105;&#20204;&#21487;&#20197;&#23558;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#25353;&#29031;&#20197;&#19979;&#32467;&#26500;&#25171;&#21253;&#25104;&#19968;&#20010;WAR&#25991;&#20214;&#65306;
            </p><pre class="programlisting">my-application.war/
    META-INF/
        MANIFEST.MF
    WEB-INF/
        web.xml
        components.xml
        faces-config.xml
        lib/
            jboss-seam.jar
            jboss-seam-ui.jar
            jboss-el.jar
            jsf-facelets.jar
            hibernate3.jar
            hibernate-annotations.jar
            hibernate-validator.jar
            ...
            my-application.jar/
                META-INF/
                   MANIFEST.MF
                seam.properties
                hibernate.cfg.xml
                org/
                    jboss/
                        myapplication/
                            User.class
                            Login.class
                            Register.class
                            ...
    login.jsp
    register.jsp
    ...</pre><p>
            &#22914;&#26524;&#25105;&#20204;&#24819;&#35201;&#23558;Hibernate&#37096;&#32626;&#22312;&#19968;&#20010;&#38750;EE&#30340;&#29615;&#22659;&#20013;&#65288;&#22914;Tomcat&#25110;TestNG&#65289;&#65292;&#25105;&#20204;&#38656;&#35201;&#22810;&#20570;&#19968;&#20123;&#24037;&#20316;&#12290;
            </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14409"></a>25.4.&nbsp;&#22312;Java SE&#20013;&#37197;&#32622;Seam&#65292;&#27809;&#26377;&#20869;&#23884;JBoss</h2></div></div><div></div></div><p>
        &#23436;&#20840;&#22312;&#19968;&#20010;EE&#29615;&#22659;&#20043;&#22806;&#20351;&#29992;Seam&#26159;&#26377;&#21487;&#33021;&#30340;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#38656;&#35201;&#21578;&#35785;Seam&#24590;&#26679;&#21435;&#31649;&#29702;&#20107;&#21153;&#65292;&#22240;&#20026;&#27809;&#26377;JTA&#21487;&#29992;&#12290;
        &#22914;&#26524;&#20320;&#22312;&#20351;&#29992;JPA&#65292;&#23601;&#21487;&#20197;&#21578;&#35785;Seam&#21435;&#20351;&#29992;JPA&#26412;&#22320;&#36164;&#28304;&#30340;&#20107;&#21153;&#65292;&#22914; <tt class="literal">EntityTransaction</tt>&#65292;&#20687;&#36825;&#26679;&#65306;
        </p><pre class="programlisting">&lt;transaction:entity-transaction entity-manager="#{entityManager}"/&gt;</pre><p>
        &#22914;&#26524;&#20320;&#22312;&#20351;&#29992;Hibernate&#65292;&#23601;&#21487;&#20197;&#21578;&#35785;Seam&#20687;&#19979;&#38754;&#36825;&#26679;&#20351;&#29992;Hibernate&#20107;&#21153;API&#65306;
        </p><pre class="programlisting">&lt;transaction:hibernate-transaction session="#{session}"/&gt;</pre><p>
        &#24403;&#28982;&#65292;&#20320;&#36824;&#38656;&#35201;&#21435;&#23450;&#20041;&#19968;&#20010;&#25968;&#25454;&#28304;&#12290;
        </p><p>
        &#19968;&#31181;&#26356;&#22909;&#30340;&#26367;&#20195;&#26041;&#26696;&#26159;&#20351;&#29992;&#23884;&#20837;&#24335;&#30340;JBoss&#21435;&#35775;&#38382;EE&#30340;API&#12290;
        </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14427"></a>25.5.&nbsp;&#29992;&#23884;&#20837;&#24335;&#30340;JBoss&#22312;Java SE&#20013;&#37197;&#32622;Seam</h2></div></div><div></div></div><p>
        &#23884;&#20837;&#24335;&#30340;JBoss&#35753;&#20320;&#21487;&#20197;&#22312;Java EE 5&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#30340;&#19978;&#19979;&#25991;&#30340;&#22806;&#38754;&#36816;&#34892;EJB3&#32452;&#20214;&#12290;&#36825;&#20010;&#19981;&#20294;&#23545;&#27979;&#35797;&#26377;&#29992;&#65292;&#32780;&#19988;&#26159;&#29305;&#21035;&#26377;&#29992;&#12290;
        </p><p>
        Seam&#30340;booking&#31034;&#20363;&#31243;&#24207;&#21253;&#25324;&#19968;&#20010;&#36890;&#36807; <tt class="literal">SeamTest</tt> &#22312;&#23884;&#20837;&#24335;&#30340;JBoss&#19978;&#36816;&#34892;&#30340;TestNG&#38598;&#25104;&#27979;&#35797;&#22871;&#20214;&#12290;
        </p><div class="mediaobject" align="center"><img src="images/testng.png" align="middle"></div><p>
        booking&#31034;&#20363;&#31243;&#24207;&#29978;&#33267;&#21487;&#20197;&#22312;Tomcat&#19978;&#37096;&#32626;&#12290;
        </p><div class="mediaobject" align="center"><img src="images/e-ejb3.png" align="middle"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="config.install.embedded"></a>25.5.1.&nbsp;&#23433;&#35013;&#23884;&#20837;&#24335;&#30340;JBoss</h3></div></div><div></div></div><p>
            &#20026;&#20102;&#35753;Seam&#24212;&#29992;&#31243;&#24207;&#22312;Tomcat&#19978;&#27491;&#30830;&#36816;&#34892;&#65292;&#24517;&#39035;&#23558;&#23884;&#20837;&#24335;JBoss&#35013;&#36733;&#21040;Tomcat&#20013;&#12290;
            &#23884;&#20837;&#24335;&#30340;JBoss&#21487;&#20197;&#22312; <a href="http://sourceforge.net/project/showfiles.php?group_id=22866&amp;package_id=228977" target="_top">&#36825;&#37324;</a> &#19979;&#36733;&#12290;&#23558;&#23884;&#20837;&#24335;&#30340;JBoss&#23433;&#35013;&#21040;Tomcat 6&#30340;&#36807;&#31243;&#38750;&#24120;&#31616;&#21333;&#12290;&#39318;&#20808;&#65292;&#20320;&#24517;&#39035;&#23558;&#23884;&#20837;&#24335;JBoss&#30340;JAR&#21644;&#37197;&#32622;&#25991;&#20214;&#37117;&#25335;&#36125;&#21040;Tomcat&#20013;&#12290;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                    &#23558;&#23884;&#20837;&#24335;JBoss&#30340; <tt class="literal">bootstrap</tt> &#21644; <tt class="literal">lib</tt> &#30446;&#24405;&#19979;&#30340;&#25152;&#26377;&#25991;&#20214;&#21644;&#30446;&#24405;&#65292;&#38500;&#20102; <tt class="literal">jndi.properties</tt> &#25991;&#20214;&#20043;&#22806;&#65292;&#37117;&#25335;&#36125;&#21040;Tomcat&#30340; <tt class="literal">lib</tt> &#30446;&#24405;&#19979;&#12290;
                    </p></li><li><p>
                    &#20174;Tomcat&#30340; <tt class="literal">lib</tt> &#30446;&#24405;&#20013;&#31227;&#38500; <tt class="literal">annotations-api.jar</tt> &#25991;&#20214;&#12290;
                    </p></li></ul></div><p>
            &#25509;&#19979;&#26469;&#65292;&#38656;&#35201;&#26356;&#26032;&#20004;&#20010;&#37197;&#32622;&#25991;&#20214;&#65292;&#29992;&#26469;&#22686;&#21152;&#23884;&#20837;&#24335;JBoss&#29305;&#26377;&#30340;&#21151;&#33021;&#12290;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                    &#23558;&#23884;&#20837;&#24335;JBoss listener&#22686;&#21152;&#21040; <tt class="literal">conf/server.xml</tt> &#20013;&#12290;&#23427;&#22312;&#25991;&#20214;&#20013;&#24212;&#35813;&#25490;&#21015;&#22312;&#25152;&#26377;&#20854;&#20182;listener&#30340;&#21518;&#38754;&#12290;
                    </p><pre class="programlisting">&lt;Listener className="org.jboss.embedded.tomcat.EmbeddedJBossBootstrapListener" /&gt;</pre></li><li><p>
                    &#24212;&#35813;&#36890;&#36807;&#22686;&#21152;&#19968;&#20010;listener&#21040; <tt class="literal">conf/context.xml</tt> &#25991;&#20214;&#20013;&#26469;&#21551;&#29992;WAR&#25991;&#20214;&#25195;&#25551;&#21151;&#33021;&#12290;
                    </p><pre class="programlisting">&lt;Listener className="org.jboss.embedded.tomcat.WebinfScanner" /&gt;</pre></li></ul></div><p>
            &#20851;&#20110;&#26356;&#22810;&#30340;&#37197;&#32622;&#36873;&#39033;&#65292;&#35831;&#21442;&#32771;Tomcat&#38598;&#25104;&#23884;&#20837;&#24335;JBoss <a href="http://wiki.jboss.org/wiki/Wiki.jsp?page=EmbeddedAndTomcat" target="_top">Wiki&#26465;&#30446;</a>&#12290;
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14506"></a>25.5.2.&nbsp;&#25171;&#21253;</h3></div></div><div></div></div><p>
            &#19968;&#20010;&#22312;Servlet&#24341;&#25806;&#65288;&#22914;Tomcat&#65289;&#20013;&#22522;&#20110;WAR&#37096;&#32626;&#30340;&#21387;&#32553;&#25991;&#26723;&#65292;&#23427;&#30340;&#32467;&#26500;&#26377;&#26102;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">my-application.war/
    META-INF/
        MANIFEST.MF
    WEB-INF/
        web.xml
        components.xml
        faces-config.xml
        lib/
            jboss-seam.jar
            jboss-seam-ui.jar
            jboss-el.jar
            jsf-facelets.jar
            jsf-api.jar
            jsf-impl.jar
            ...
            my-application.jar/
                META-INF/
                    MANIFEST.MF
                    persistence.xml
                seam.properties
                org/
                    jboss/
                        myapplication/
                            User.class
                            Login.class
                            LoginBean.class
                            Register.class
                            RegisterBean.class
                            ...
    login.jsp
    register.jsp
    ...</pre><p>
            &#32477;&#22823;&#37096;&#20998;Seam&#31034;&#20363;&#31243;&#24207;&#21487;&#20197;&#36890;&#36807;&#36816;&#34892; <tt class="literal">ant deploy.tomcat</tt> &#37096;&#32626;&#21040;Tomcat&#20013;&#12290;
            </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14518"></a>25.6.&nbsp;&#22312;Seam&#20013;&#37197;&#32622;jBPM</h2></div></div><div></div></div><p>
        Seam&#30340;jBPM&#38598;&#25104;&#27809;&#26377;&#34987;&#40664;&#35748;&#35013;&#36733;&#65292;&#22240;&#27492;&#20320;&#38656;&#35201;&#36890;&#36807;&#35013;&#36733;&#19968;&#20010;&#20869;&#24314;&#30340;&#32452;&#20214;&#26469;&#21551;&#29992;jBPM&#12290;&#20320;&#36824;&#38656;&#35201;&#26174;&#24335;&#22320;&#21015;&#20986;&#20320;&#30340;&#27969;&#31243;&#21644;&#39029;&#38754;&#27969;&#23450;&#20041;&#12290;
        &#22312; <tt class="literal">components.xml</tt> &#25991;&#20214;&#20013;&#65306;
        </p><pre class="programlisting">&lt;bpm:jbpm&gt;
    &lt;bpm:pageflow-definitions&gt;
        &lt;value&gt;createDocument.jpdl.xml&lt;/value&gt;
        &lt;value&gt;editDocument.jpdl.xml&lt;/value&gt;
        &lt;value&gt;approveDocument.jpdl.xml&lt;/value&gt;
    &lt;/bpm:pageflow-definitions&gt;
    &lt;bpm:process-definitions&gt;
        &lt;value&gt;documentLifecycle.jpdl.xml&lt;/value&gt;
    &lt;/bpm:process-definitions&gt;
&lt;/bpm:jbpm&gt;</pre><p>
        &#22914;&#26524;&#20320;&#21482;&#26377;&#39029;&#38754;&#27969;&#65292;&#23601;&#19981;&#38656;&#35201;&#26356;&#22810;&#29305;&#27530;&#30340;&#37197;&#32622;&#12290;&#22914;&#26524;&#20320;&#30340;&#30830;&#26377;&#19994;&#21153;&#27969;&#31243;&#23450;&#20041;&#65292;&#23601;&#38656;&#35201;&#20026;jBPM&#25552;&#20379;&#19968;&#20010;jBPM&#37197;&#32622;&#21644;&#19968;&#20010;Hibernate&#37197;&#32622;&#12290;
        Seam&#30340;DVD Store Demo&#21253;&#25324;&#20102;&#19982;Seam&#20849;&#21516;&#24037;&#20316;&#30340; <tt class="literal">jbpm.cfg.xml</tt> &#21644; <tt class="literal">hibernate.cfg.xml</tt> &#25991;&#20214;&#30340;&#20363;&#23376;&#65306;
        </p><pre class="programlisting">&lt;jbpm-configuration&gt;

  &lt;jbpm-context&gt;
    &lt;service name="persistence"&gt;
       &lt;factory&gt;
          &lt;bean class="org.jbpm.persistence.db.DbPersistenceServiceFactory"&gt;
             &lt;field name="isTransactionEnabled"&gt;&lt;false/&gt;&lt;/field&gt;
          &lt;/bean&gt;
       &lt;/factory&gt;
    &lt;/service&gt;
    &lt;service name="tx" factory="org.jbpm.tx.TxServiceFactory" /&gt;
    &lt;service name="message" factory="org.jbpm.msg.db.DbMessageServiceFactory" /&gt;
    &lt;service name="scheduler" factory="org.jbpm.scheduler.db.DbSchedulerServiceFactory" /&gt;
    &lt;service name="logging" factory="org.jbpm.logging.db.DbLoggingServiceFactory" /&gt;
    &lt;service name="authentication"
             factory="org.jbpm.security.authentication.DefaultAuthenticationServiceFactory" /&gt;
  &lt;/jbpm-context&gt;

&lt;/jbpm-configuration&gt;</pre><p>
        &#22312;&#36825;&#20799;&#38656;&#35201;&#27880;&#24847;&#30340;&#26368;&#37325;&#35201;&#20107;&#24773;&#26159;JBPM&#20107;&#21153;&#22788;&#29702;&#25511;&#21046;&#21151;&#33021;&#26159;&#31105;&#29992;&#30340;&#12290;Seam&#25110;EJB3&#24212;&#35813;&#25511;&#21046;JTA&#20107;&#21153;&#12290;
        </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14540"></a>25.6.1.&nbsp;&#25171;&#21253;</h3></div></div><div></div></div><p>
            &#23545;&#20110;jBPM&#37197;&#32622;&#21644;&#27969;&#31243;&#65295;&#39029;&#38754;&#27969;&#23450;&#20041;&#25991;&#20214;&#65292;&#36824;&#27809;&#26377;&#20219;&#20309;&#26126;&#30830;&#30340;&#25171;&#21253;&#26684;&#24335;&#12290;
            &#22312;Seam&#30340;&#31034;&#20363;&#31243;&#24207;&#20013;&#65292;&#25105;&#20204;&#20915;&#23450;&#31616;&#21333;&#22320;&#23558;&#25152;&#26377;&#36825;&#20123;&#25991;&#20214;&#25171;&#21253;&#21040;EAR&#30340;&#26681;&#30446;&#24405;&#19979;&#12290;&#22312;&#20197;&#21518;&#65292;&#25105;&#20204;&#21487;&#33021;&#35774;&#35745;&#20854;&#20182;&#19968;&#20123;&#26631;&#20934;&#30340;&#25171;&#21253;&#26684;&#24335;&#12290;
            &#22240;&#27492;EAR&#30475;&#36215;&#26469;&#26377;&#28857;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">my-application.ear/
    jboss-seam.jar
    lib/
       jboss-el.jar
       jbpm-3.1.jar
    META-INF/
        MANIFEST.MF
        application.xml
    my-application.war/
        META-INF/
            MANIFEST.MF
        WEB-INF/
            web.xml
            components.xml
            faces-config.xml
            lib/
                jsf-facelets.jar
                jboss-seam-ui.jar
        login.jsp
        register.jsp
        ...
    my-application.jar/
        META-INF/
            MANIFEST.MF
            persistence.xml
        seam.properties
        org/
            jboss/
                myapplication/
                    User.class
                    Login.class
                    LoginBean.class
                    Register.class
                    RegisterBean.class
                    ...
    jbpm.cfg.xml
    hibernate.cfg.xml
    createDocument.jpdl.xml
    editDocument.jpdl.xml
    approveDocument.jpdl.xml
    documentLifecycle.jpdl.xml</pre></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14547"></a>25.7.&nbsp;&#22312;Portal&#20013;&#37197;&#32622;Seam</h2></div></div><div></div></div><p>
        &#35201;&#23558;Seam&#31243;&#24207;&#20316;&#20026;&#19968;&#20010;portlet&#36816;&#34892;&#65292;&#20320;&#38656;&#35201;&#25552;&#20379;&#26576;&#20123;portlet&#20803;&#25968;&#25454;&#65288;<tt class="literal">portlet.xml</tt>&#65292;&#31561;&#65289;&#20316;&#20026;&#23545;&#36890;&#24120;Java EE&#20803;&#25968;&#25454;&#30340;&#34917;&#20805;&#12290;
        &#21442;&#32771; <tt class="literal">examples/portal</tt> &#30446;&#24405;&#65292;&#20316;&#20026;booking demo&#39044;&#37197;&#32622;&#20197;&#20415;&#22312;JBoss Portal&#19978;&#36816;&#34892;&#30340;&#19968;&#20010;&#20363;&#23376;&#12290;
			</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14558"></a>25.8.&nbsp;&#22312;JBoss AS&#20013;&#37197;&#32622;SFSB&#21644;&#20250;&#35805;&#36229;&#26102;</h2></div></div><div></div></div><p>
        &#23558;&#26377;&#29366;&#24577;&#20250;&#35805;Bean&#30340;&#36229;&#26102;&#20540;&#35774;&#32622;&#24471;&#27604;HTTP&#30340;&#36229;&#26102;&#20540;&#39640;&#19968;&#20123;&#26159;&#24456;&#37325;&#35201;&#30340;&#65292;&#21542;&#21017;SFSB&#21487;&#33021;&#22312;HTTP&#20250;&#35805;&#32467;&#26463;&#21069;&#24050;&#32463;&#36229;&#26102;&#12290;
        JBoss&#31243;&#24207;&#26381;&#21153;&#22120;&#26377;&#19968;&#20010;30&#20998;&#38047;&#30340;&#40664;&#35748;&#20250;&#35805;Bean&#36229;&#26102;&#20540;&#65292;&#23427;&#22312; <tt class="literal">server/default/conf/standardjboss.xml</tt>&#65288;&#29992;&#20320;&#33258;&#24049;&#30340;&#37197;&#32622;&#21462;&#20195; <span class="emphasis"><em>default</em></span>&#65289;&#20013;&#37197;&#32622;&#12290;
            </p><p>
        &#40664;&#35748;&#30340;SFSB&#36229;&#26102;&#20540;&#21487;&#20197;&#36890;&#36807;&#20462;&#25913; <tt class="literal">LRUStatefulContextCachePolicy</tt> &#32531;&#23384;&#37197;&#32622;&#20013; <tt class="literal">max-bean-life</tt> &#30340;&#20540;&#24471;&#21040;&#35843;&#25972;&#12290;
        </p><pre class="programlisting">&lt;container-cache-conf&gt;
    &lt;cache-policy&gt;org.jboss.ejb.plugins.LRUStatefulContextCachePolicy&lt;/cache-policy&gt;
    &lt;cache-policy-conf&gt;
        &lt;min-capacity&gt;50&lt;/min-capacity&gt;
        &lt;max-capacity&gt;1000000&lt;/max-capacity&gt;
        &lt;remover-period&gt;1800&lt;/remover-period&gt;

        &lt;!-- SFSB timeout in seconds; 1800 seconds == 30 minutes --&gt;
        &lt;max-bean-life&gt;1800&lt;/max-bean-life&gt;

        &lt;overager-period&gt;300&lt;/overager-period&gt;
        &lt;max-bean-age&gt;600&lt;/max-bean-age&gt;
        &lt;resizer-period&gt;400&lt;/resizer-period&gt;
        &lt;max-cache-miss-period&gt;60&lt;/max-cache-miss-period&gt;
        &lt;min-cache-miss-period&gt;1&lt;/min-cache-miss-period&gt;
        &lt;cache-load-factor&gt;0.75&lt;/cache-load-factor&gt;
    &lt;/cache-policy-conf&gt;
&lt;/container-cache-conf&gt;</pre><p>
        &#21487;&#20197;&#20026;JBoss 4.0.x&#22312; <tt class="literal">server/default/deploy/jbossweb-tomcat55.sar/conf/web.xml</tt> &#20013;&#20462;&#25913;&#65292;&#25110;&#32773;&#20026;JBoss 4.2.x&#22312; <tt class="literal">server/default/deploy/jboss-web.deployer/conf/web.xml</tt> &#20013;&#20462;&#25913;&#40664;&#35748;&#30340;HTTP&#20250;&#35805;&#36229;&#26102;&#20540;&#12290;
        &#36825;&#20010;&#25991;&#20214;&#20013;&#30340;&#20197;&#19979;&#39033;&#25511;&#21046;&#30528;&#25152;&#26377;Web&#24212;&#29992;&#31243;&#24207;&#30340;&#40664;&#35748;&#20250;&#35805;&#36229;&#26102;&#20540;&#65306;
        </p><pre class="programlisting">&lt;session-config&gt;
    &lt;!-- HTTP Session timeout, in minutes --&gt;
    &lt;session-timeout&gt;30&lt;/session-timeout&gt;
&lt;/session-config&gt;</pre><p>
        &#35201;&#20026;&#20320;&#33258;&#24049;&#30340;&#24212;&#29992;&#31243;&#24207;&#35206;&#30422;&#36825;&#20010;&#20540;&#65292;&#21482;&#38656;&#22312;&#20320;&#24212;&#29992;&#31243;&#24207;&#33258;&#24049;&#30340; <tt class="literal">web.xml</tt> &#25991;&#20214;&#20013;&#21253;&#21547;&#36825;&#20010;&#39033;&#12290;
        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="search.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="oc4j.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;24.&nbsp;Hibernate Search&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;26.&nbsp;Seam on OC4J</td></tr></table></div></body></html>