<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;1.&nbsp;Seam &#20837;&#38376;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="up" href="index.html" title="Seam - &#35821;&#22659;&#30456;&#20851;&#30340;&#32452;&#20214; [&#28385;&#27743;&#32418;20080327]"><link rel="previous" href="pr01.html" title="JBoss Seam&#31616;&#20171;"><link rel="next" href="gettingstarted.html" title="Chapter&nbsp;2.&nbsp;&#29992;Seam-gen&#36215;&#27493;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;1.&nbsp;Seam &#20837;&#38376;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pr01.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="gettingstarted.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="tutorial"></a>Chapter&nbsp;1.&nbsp;Seam &#20837;&#38376;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="try-examples"></a>1.1.&nbsp;&#35797;&#35797;&#30475;</h2></div></div><div></div></div><p>&#26412;&#25945;&#31243;&#20551;&#23450;&#20320;&#24050;&#19979;&#36733;JBoss AS 4.0.5&#24182;&#23433;&#35013;&#20102;EJB 3.0 profile&#65288;&#35831;&#20351;&#29992;JBoss AS&#23433;&#35013;&#22120;&#65289;&#12290;&#20320;&#20063;&#24471;&#19979;&#36733;&#19968;&#20221;Seam&#24182;&#35299;&#21387;&#21040;&#24037;&#20316;&#30446;&#24405;&#19978;&#12290;
    </p><p>&#21508;&#31034;&#20363;&#30340;&#30446;&#24405;&#32467;&#26500;&#20223;&#25928;&#20197;&#19979;&#24418;&#24335;&#65306;
    </p><div class="itemizedlist"><ul type="disc"><li><p>&#32593;&#39029;&#12289;&#22270;&#29255;&#21450;&#26679;&#24335;&#34920;&#21487;&#22312; <tt class="filename">examples/<i class="replaceable"><tt>registration</tt></i>/view</tt> &#30446;&#24405;&#20013;&#25214;&#21040;&#12290;</p></li><li><p>&#35832;&#22914;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#21450;&#25968;&#25454;&#23548;&#20837;&#33050;&#26412;&#20043;&#31867;&#30340;&#36164;&#28304;&#21487;&#22312;&#30446;&#24405; <tt class="filename">examples/<i class="replaceable"><tt>registration</tt></i>/resources</tt> &#20013;&#25214;&#21040;&#12290;</p></li><li><p>Java&#28304;&#20195;&#30721;&#20445;&#23384;&#22312; <tt class="filename">examples/<i class="replaceable"><tt>registration</tt></i>/src</tt> &#20013;&#12290;</p></li><li><p>Ant&#26500;&#24314;&#33050;&#26412;&#25918;&#22312; <tt class="filename">examples/<i class="replaceable"><tt>registration</tt></i>/build.xml</tt> &#25991;&#20214;&#20013;&#12290;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e714"></a>1.1.1.&nbsp;&#22312;JBoss AS&#19978;&#36816;&#34892;&#31034;&#20363;</h3></div></div><div></div></div><p>&#31532;&#19968;&#27493;&#65292;&#30830;&#20445;&#24050;&#23433;&#35013;Ant&#65292;&#24182;&#27491;&#30830;&#35774;&#23450;&#20102; <tt class="literal">$ANT_HOME</tt> &#21450; <tt class="literal">$JAVA_HOME</tt> &#30340;&#29615;&#22659;&#21464;&#37327;&#12290;&#25509;&#30528;&#22312;Seam&#30340;&#26681;&#30446;&#24405;&#19979;&#30340; <tt class="literal">build.properties</tt> &#25991;&#20214;&#20013;&#27491;&#30830;&#35774;&#23450;JBoss AS 4.0.5&#30340;&#23433;&#35013;&#36335;&#24452;&#12290;
			&#33509;&#19968;&#20999;&#23601;&#32490;&#65292;&#23601;&#21487;&#22312;JBoss&#30340;&#23433;&#35013;&#26681;&#30446;&#24405;&#19979;&#25970;&#20837; <tt class="literal">bin/run.sh</tt> &#25110; <tt class="literal">bin/run.bat</tt> &#21629;&#20196;&#26469;&#21551;&#21160;JBoss AS&#12290;&#65288;&#35793;&#27880;&#65306;&#27492;&#22806;&#65292;&#35831;&#23433;&#35013;JDK1.5&#20197;&#19978;&#20197;&#20415;&#33021;&#30452;&#25509;&#36816;&#34892;&#31034;&#20363;&#20195;&#30721;&#65289;
       </p><p>&#29616;&#22312;&#21482;&#35201;&#22312;Seam&#23433;&#35013;&#30446;&#24405; <tt class="filename">examples/<i class="replaceable"><tt>registration</tt></i></tt> &#19979;&#36755;&#20837; <tt class="literal">ant deploy</tt> &#23601;&#21487;&#26500;&#24314;&#21644;&#37096;&#32626;&#31034;&#20363;&#20102;&#12290;
        </p><p>&#35797;&#30528;&#22312;&#27983;&#35272;&#22120;&#20013;&#35775;&#38382;&#27492;&#38142;&#25509;&#65306;<a href="http://localhost:8080/seam-registration/" target="_top"><tt class="literal">http://localhost:8080/seam-registration/</tt></a>&#12290;
               </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e750"></a>1.1.2.&nbsp;&#22312;Tomcat&#26381;&#21153;&#22120;&#19978;&#36816;&#34892;&#31034;&#20363;</h3></div></div><div></div></div><p>&#39318;&#20808;&#65292;&#30830;&#20445;&#24050;&#23433;&#35013;Ant&#65292;&#24182;&#27491;&#30830;&#35774;&#23450;&#20102; <tt class="literal">$ANT_HOME</tt> &#21450; <tt class="literal">$JAVA_HOME</tt> &#30340;&#29615;&#22659;&#21464;&#37327;&#12290;&#25509;&#30528;&#22312;Seam&#30340;&#26681;&#30446;&#24405;&#19979;&#30340; <tt class="literal">build.properties</tt> &#25991;&#20214;&#20013;&#27491;&#30830;&#35774;&#23450;Tomcat 6.0&#30340;&#23433;&#35013;&#36335;&#24452;&#12290;&#20320;&#38656;&#35201;&#25353;&#29031;25.5.1&#31456;&#33410;&#8220;&#23433;&#35013;&#23884;&#20837;&#24335;&#30340;Jboss&#8221;&#20013;&#30340;&#25351;&#23548;&#37197;&#32622; (&#24403;&#28982;, SEAM&#20063;&#21487;&#20197;&#33073;&#31163;Jboss&#22312;TOMCAT&#19978;&#30452;&#25509;&#36816;&#34892;)&#12290;
       </p><p>&#33267;&#27492;&#65292;&#23601;&#21487;&#22312;Seam&#23433;&#35013;&#30446;&#24405; <tt class="filename">examples/<i class="replaceable"><tt>registration</tt></i></tt> &#20013;&#36755;&#20837; <tt class="literal">ant deploy.tomcat</tt> &#26500;&#24314;&#21644;&#37096;&#32626;&#31034;&#20363;&#20102;&#12290;
        </p><p>
            &#26368;&#21518;&#21551;&#21160;Tomcat&#12290;
        </p><p>&#35797;&#30528;&#22312;&#27983;&#35272;&#22120;&#20013;&#35775;&#38382;&#27492;&#38142;&#25509;&#65306;<a href="http://localhost:8080/jboss-seam-registration/" target="_top"><tt class="literal">http://localhost:8080/jboss-seam-registration/</tt></a>&#12290;
        </p><p>&#24403;&#20320;&#37096;&#32626;&#31034;&#20363;&#21040;Tomcat&#26102;&#65292;&#20219;&#20309;&#30340;EJB3&#32452;&#20214;&#23558;&#22312;JBoss&#30340;&#21487;&#23884;&#20837;&#24335;&#30340;&#23481;&#22120;&#65292;&#20063;&#23601;&#26159;&#23436;&#20840;&#29420;&#31435;&#30340;EJB3&#23481;&#22120;&#29615;&#22659;&#20013;&#36816;&#34892;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e784"></a>1.1.3.&nbsp;&#36816;&#34892;&#27979;&#35797;</h3></div></div><div></div></div><p>&#20960;&#20046;&#25152;&#26377;&#30340;&#31034;&#20363;&#37117;&#26377;&#30456;&#24212;&#30340;TestNG&#30340;&#38598;&#25104;&#27979;&#35797;&#20195;&#30721;&#12290;&#26368;&#31616;&#20415;&#30340;&#36816;&#34892;&#27979;&#35797;&#20195;&#30721;&#30340;&#26041;&#27861;&#26159;&#22312; <tt class="filename">examples/<i class="replaceable"><tt>registration</tt></i></tt>&#30446;&#24405;&#20013;&#36816;&#34892; <tt class="literal">ant testexample</tt>&#12290;&#24403;&#28982;&#20063;&#21487;&#22312;IDE&#24320;&#21457;&#24037;&#20855;&#20013;&#20351;&#29992;TestNG&#25554;&#20214;&#26469;&#36816;&#34892;&#27979;&#35797;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="registration-example"></a>1.2.&nbsp;&#31532;&#19968;&#20010;&#20363;&#23376;&#65306;&#27880;&#20876;&#31034;&#20363;</h2></div></div><div></div></div><p>&#27880;&#20876;&#31034;&#20363;&#26159;&#20010;&#26497;&#20854;&#26222;&#36890;&#30340;&#24212;&#29992;&#65292;&#23427;&#21487;&#35753;&#26032;&#29992;&#25143;&#22312;&#25968;&#25454;&#24211;&#20013;&#20445;&#23384;&#33258;&#24049;&#30340;&#29992;&#25143;&#21517;&#65292;&#30495;&#23454;&#30340;&#22995;&#21517;&#21450;&#23494;&#30721;&#12290;
		&#27492;&#31034;&#20363;&#24182;&#19981;&#24819;&#19968;&#19979;&#23376;&#23601;&#25226;Seam&#30340;&#25152;&#26377;&#30340;&#37239;&#21151;&#33021;&#20840;&#37096;&#31168;&#20986;&#12290;&#28982;&#32780;&#65292; &#23427;&#28436;&#31034;&#20102;EJB3 &#20250;&#35805;Bean&#20316;&#20026;JSF&#21160;&#20316;&#30417;&#21548;&#22120;&#21450;Seam&#30340;&#22522;&#26412;&#37197;&#32622;&#30340;&#20351;&#29992;&#26041;&#27861;&#12290;
    </p><p>&#25110;&#35768;&#20320;&#23545;EJB 3.0&#36824;&#19981;&#22826;&#29087;&#24713;&#65292;&#22240;&#27492;&#25105;&#20204;&#20250;&#23545;&#31034;&#20363;&#30340;&#24930;&#24930;&#28145;&#20837;&#35828;&#26126;&#12290;</p><p>&#27492;&#31034;&#20363;&#30340;&#39318;&#39029;&#26174;&#31034;&#20102;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;&#34920;&#21333;&#65292;&#23427;&#26377;&#19977;&#20010;&#36755;&#20837;&#23383;&#27573;&#12290;&#35797;&#30528;&#22312;&#34920;&#21333;&#19978;&#22635;&#20889;&#20869;&#23481;&#24182;&#25552;&#20132;&#65292;&#19968;&#26086;&#36755;&#20837;&#25968;&#25454;&#34987;&#25552;&#20132;&#21518;&#23601;&#20250;&#22312;&#25968;&#25454;&#24211;&#20013;&#20445;&#23384;&#19968;&#20010;user&#23545;&#35937;&#12290;</p><div class="mediaobject" align="center"><img src="images/registration.png" align="middle"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e811"></a>1.2.1.&nbsp;&#20102;&#35299;&#20195;&#30721;</h3></div></div><div></div></div><p>&#26412;&#31034;&#20363;&#30001;&#20004;&#20010;JSP&#39029;&#38754;&#65292;&#19968;&#20010;&#23454;&#20307;Bean&#21450;&#26080;&#29366;&#24577;&#30340;&#20250;&#35805;Bean&#26469;&#23454;&#29616;&#12290;
      </p><div class="mediaobject" align="center"><img src="images/register.png" align="middle"></div><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;&#20195;&#30721;&#65292;&#23601;&#20174;&#26368;&#8220;&#24213;&#23618;&#8221;&#30340;&#23454;&#20307;Bean&#24320;&#22987;&#21543;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e823"></a>1.2.1.1.&nbsp;&#23454;&#20307;Bean&#65306;<tt class="literal">User.java</tt></h4></div></div><div></div></div><p>&#25105;&#20204;&#38656;&#35201;EJB &#23454;&#20307;Bean&#26469;&#20445;&#23384;&#29992;&#25143;&#25968;&#25454;&#12290;&#36825;&#20010;&#31867;&#36890;&#36807;&#27880;&#35299;&#22768;&#26126;&#24615;&#22320;&#23450;&#20041;&#20102; <span class="emphasis"><em>persistence</em></span> &#21450; <span class="emphasis"><em>validation</em></span> &#23646;&#24615;&#12290;&#23427;&#20063;&#38656;&#35201;&#19968;&#20123;&#39069;&#22806;&#30340;&#27880;&#35299;&#26469;&#23558;&#36825;&#20010;&#31867;&#23450;&#20041;&#20026;Seam&#30340;&#32452;&#20214;&#12290; </p><div class="example"><a name="d0e836"></a><p class="title"><b>Example&nbsp;1.1.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Entity                                                                                  <span class="co">(1)</span>
@Name("user")                                                                            <span class="co">(2)</span>
@Scope(SESSION)                                                                          <span class="co">(3)</span>
@Table(name="users")                                                                     <span class="co">(4)</span>
public class User implements Serializable
{
   private static final long serialVersionUID = 1881413500711441951L;

   private String username;                                                              <span class="co">(5)</span>
   private String password;
   private String name;

   public User(String name, String password, String username)
   {
      this.name = name;
      this.password = password;
      this.username = username;
   }

   public User() {}                                                                      <span class="co">(6)</span>

   @NotNull @Length(min=5, max=15)                                                       <span class="co">(7)</span>
   public String getPassword()
   {
      return password;
   }

   public void setPassword(String password)
   {
      this.password = password;
   }

   @NotNull
   public String getName()
   {
      return name;
   }

   public void setName(String name)
   {
      this.name = name;
   }

   @Id @NotNull @Length(min=5, max=15)                                                   <span class="co">(8)</span>
   public String getUsername()
   {
      return username;
   }

   public void setUsername(String username)
   {
      this.username = username;
   }

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>EJB3&#26631;&#20934;&#27880;&#35299; <tt class="literal">@Entity</tt> &#34920;&#26126;&#20102; <tt class="literal">User</tt> &#31867;&#26159;&#20010;&#23454;&#20307;Bean.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>Seam&#32452;&#20214;&#38656;&#35201;&#19968;&#20010; <span class="emphasis"><em>&#32452;&#20214;&#21517;&#31216;</em></span>&#65292;&#27492;&#21517;&#31216;&#30001;&#27880;&#35299; <a href="annotations.html#name-annotation"><tt class="literal">@Name</tt></a>&#26469;&#25351;&#23450;&#12290;&#27492;&#21517;&#31216;&#24517;&#39035;&#22312;Seam&#24212;&#29992;&#20869;&#21807;&#19968;&#12290;&#24403;JSF&#29992;&#19968;&#20010;&#19982;&#32452;&#20214;&#21516;&#21517;&#30340;&#21517;&#31216;&#21435;&#35831;&#27714;Seam&#26469;&#35299;&#26512;&#19978;&#19979;&#25991;&#21464;&#37327;&#65292;
                        &#19988;&#35813;&#19978;&#19979;&#25991;&#21464;&#37327;&#23578;&#26410;&#23450;&#20041;&#65288;null&#65289;&#26102;&#65292;Seam&#23601;&#23558;&#23454;&#20363;&#21270;&#37027;&#20010;&#32452;&#20214;&#65292;&#24182;&#23558;&#26032;&#23454;&#20363;&#32465;&#23450;&#32473;&#19978;&#19979;&#25991;&#21464;&#37327;&#12290;
                        &#22312;&#27492;&#20363;&#20013;&#65292;Seam&#23558;&#22312;JSF&#31532;&#19968;&#27425;&#36935;&#21040;&#21517;&#20026; <tt class="literal">user</tt> &#30340;&#21464;&#37327;&#26102;&#23454;&#20363;&#21270; <tt class="literal">User</tt>&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>&#27599;&#24403;Seam&#23454;&#20363;&#21270;&#19968;&#20010;&#32452;&#20214;&#26102;&#65292;&#23427;&#23601;&#23558;&#22987;&#21270;&#21518;&#30340;&#23454;&#20363;&#32465;&#23450;&#32473;&#32452;&#20214;&#20013; <span class="emphasis"><em>&#40664;&#35748;&#19978;&#19979;&#25991;</em></span> &#30340;&#19978;&#19979;&#25991;&#21464;&#37327;&#12290;&#40664;&#35748;&#30340;&#19978;&#19979;&#25991;&#30001;
                            <a href="annotations.html#scope-annotation"><tt class="literal">@Scope</tt></a>&#27880;&#35299;&#25351;&#23450;&#12290;
                            <tt class="literal">User</tt> Bean&#26159;&#20010;&#20250;&#35805;&#20316;&#29992;&#22495;&#30340;&#32452;&#20214;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>EJB&#26631;&#20934;&#27880;&#35299;<tt class="literal">@Table</tt> &#34920;&#26126;&#20102;&#23558; <tt class="literal">User</tt> &#31867;&#26144;&#23556;&#21040; <tt class="literal">users</tt> &#34920;&#19978;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
									<tt class="literal">name</tt>&#12289; <tt class="literal">password</tt> &#21450; <tt class="literal">username</tt> &#37117;&#26159;&#23454;&#20307;Bean&#30340;&#25345;&#20037;&#21270;&#23646;&#24615;&#12290;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#23646;&#24615;&#37117;&#23450;&#20041;&#20102;&#35775;&#38382;&#26041;&#27861;&#12290;&#24403;JSF&#28210;&#26579;&#36755;&#20986;&#21450;&#26356;&#26032;&#27169;&#22411;&#20540;&#38454;&#27573;&#26102;&#38656;&#35201;&#35843;&#29992;&#35813;&#32452;&#20214;&#30340;&#36825;&#20123;&#26041;&#27861;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>EJB&#21644;Seam&#37117;&#35201;&#27714;&#26377;&#31354;&#30340;&#26500;&#36896;&#22120;&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
									<tt class="literal">@NotNull</tt> &#21644; <tt class="literal">@Length</tt> &#27880;&#35299;&#26159;Hibernate Validator&#26694;&#26550;&#30340;&#32452;&#25104;&#37096;&#20221;&#65292;
                        Seam&#38598;&#25104;&#20102;Hibernate Validator&#24182;&#35753;&#20320;&#29992;&#23427;&#26469;&#20316;&#20026;&#25968;&#25454;&#26657;&#39564;&#65288;&#23613;&#31649;&#20320;&#21487;&#33021;&#24182;&#19981;&#20351;&#29992;Hibernate&#20316;&#20026;&#25345;&#20037;&#21270;&#23618;&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>&#26631;&#20934;EJB&#27880;&#35299; <tt class="literal">@Id</tt> &#34920;&#26126;&#20102;&#23454;&#20307;Bean&#30340;&#20027;&#38190;&#23646;&#24615;&#12290;</p></td></tr></table></div></div><p>&#36825;&#20010;&#20363;&#23376;&#20013;&#26368;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159; <tt class="literal">@Name</tt> &#21644; <tt class="literal">@Scope</tt> &#27880;&#35299;&#65292;&#23427;&#20204;&#30830;&#31435;&#20102;&#36825;&#20010;&#31867;&#26159;Seam&#30340;&#32452;&#20214;&#12290;
            </p><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#23558;&#30475;&#21040; <tt class="literal">User</tt> &#31867;&#23383;&#27573;&#22312;&#26356;&#26032;&#27169;&#22411;&#20540;&#38454;&#27573;&#26102;&#30452;&#25509;&#34987;&#32465;&#23450;&#32473;JSF&#32452;&#20214;&#24182;&#30001;JSF&#25805;&#20316;&#65292;
            &#22312;&#27492;&#24182;&#19981;&#38656;&#35201;&#20887;&#20313;&#30340;&#33014;&#27700;&#20195;&#30721;&#26469;&#22312;JSP&#39029;&#38754;&#19982;&#23454;&#20307;Bean&#22495;&#27169;&#22411;&#38388;&#26469;&#22238;&#25335;&#36125;&#25968;&#25454;&#12290;
            </p><p>&#28982;&#32780;&#65292;&#23454;&#20307;Bean&#19981;&#24212;&#35813;&#36827;&#34892;&#20107;&#21153;&#31649;&#29702;&#25110;&#25968;&#25454;&#24211;&#35775;&#38382;&#12290;&#25925;&#27492;&#65292;&#25105;&#20204;&#26080;&#27861;&#23558;&#27492;&#32452;&#20214;&#20316;&#20026;JSF&#21160;&#20316;&#30417;&#21548;&#22120;&#65292;&#22240;&#32780;&#38656;&#35201;&#20250;&#35805;Bean&#12290;
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e945"></a>1.2.1.2.&nbsp;&#26080;&#29366;&#24577;&#20250;&#35805;Bean&#65306;<tt class="literal">RegisterAction.java</tt></h4></div></div><div></div></div><p>&#22312;Seam&#24212;&#29992;&#20013;&#22823;&#37117;&#37319;&#29992;&#20250;&#35805;Bean&#26469;&#20316;&#20026;JSF&#21160;&#20316;&#30417;&#21548;&#22120;&#65288;&#24403;&#28982;&#25105;&#20204;&#20063;&#21487;&#36873;&#25321;JavaBean&#65289;&#12290;
        </p><p>&#22312;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#30830;&#23454;&#23384;&#22312;&#19968;&#20010;JSF&#21160;&#20316;&#21644;&#19968;&#20010;&#20250;&#35805;Bean&#26041;&#27861;&#12290;&#22312;&#27492;&#31034;&#20363;&#20013;&#65292;&#21482;&#26377;&#19968;&#20010;JSF&#21160;&#20316;&#65292;&#24182;&#19988;&#25105;&#20204;&#20351;&#29992;&#20250;&#35805;Bean&#26041;&#27861;&#19982;&#20043;&#30456;&#20851;&#32852;&#24182;&#20351;&#29992;&#26080;&#29366;&#24577;Bean&#65292;&#36825;&#26159;&#30001;&#20110;&#25152;&#26377;&#19982;&#21160;&#20316;&#30456;&#20851;&#30340;&#29366;&#24577;&#37117;&#20445;&#23384;&#22312; <tt class="literal">User</tt> Bean&#20013;&#12290;
        </p><p>&#36825;&#26159;&#31034;&#20363;&#20013;&#27604;&#36739;&#26377;&#36259;&#30340;&#20195;&#30721;&#37096;&#20221;&#65306;
        </p><div class="example"><a name="d0e959"></a><p class="title"><b>Example&nbsp;1.2.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Stateless                                                                               <span class="co">(1)</span>
@Name("register")
public class RegisterAction implements Register
{

   @In                                                                                   <span class="co">(2)</span>
   private User user;

   @PersistenceContext                                                                   <span class="co">(3)</span>
   private EntityManager em;

   @Logger                                                                               <span class="co">(4)</span>
   private Log log;

   public String register()                                                              <span class="co">(5)</span>
   {
      List existing = em.createQuery(
         "select username from User where username=#{user.username}")                    <span class="co">(6)</span>
         .getResultList();

      if (existing.size()==0)
      {
         em.persist(user);
         log.info("Registered new user #{user.username}");                               <span class="co">(7)</span>
         return "/registered.jsp";                                                       <span class="co">(8)</span>
      }
      else
      {
         FacesMessages.instance().add("User #{user.username} already exists");           <span class="co">(9)</span>
         return null;
      }
   }

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>EJB&#26631;&#20934;&#27880;&#35299; <tt class="literal">@Stateless</tt> &#23558;&#36825;&#20010;&#31867;&#26631;&#35760;&#20026;&#26080;&#29366;&#24577;&#30340;&#20250;&#35805;Bean&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
								&#27880;&#35299; <a href="annotations.html#in-annotation"><tt class="literal">@In</tt></a>&#23558;Bean&#30340;&#19968;&#20010;&#23646;&#24615;&#26631;&#35760;&#20026;&#30001;Seam&#26469;&#27880;&#20837;&#12290;
								&#22312;&#27492;&#20363;&#20013;&#65292;&#27492;&#23646;&#24615;&#30001;&#21517;&#20026; <tt class="literal">user</tt> &#30340;&#19978;&#19979;&#25991;&#21464;&#37327;&#27880;&#20837;&#65288;&#23454;&#20363;&#30340;&#21464;&#37327;&#21517;&#65289;&#12290;
								</p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>EJB&#26631;&#20934;&#27880;&#35299; <tt class="literal">@PersistenceContext</tt> &#29992;&#26469;&#27880;&#20837;EJB&#23454;&#20307;&#31649;&#29702;&#22120;&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>Seam&#30340; <tt class="literal">@Logger</tt> &#27880;&#35299;&#29992;&#26469;&#27880;&#20837;&#32452;&#20214;&#30340; <tt class="literal">Log</tt> &#23454;&#20363;&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#20351;&#29992;&#26631;&#20934;&#30340;EJB3 <tt class="literal">EntityManager</tt> API&#26469;&#19982;&#25968;&#25454;&#24211;&#20132;&#20114;&#65292;&#24182;&#36820;&#22238;JSF&#30340;&#36755;&#20986;&#32467;&#26524;&#12290;
                          &#35831;&#27880;&#24847;&#65292;&#30001;&#20110;&#36825;&#26159;&#20010;&#20250;&#35805;Bean&#65292;&#22240;&#27492;&#24403; <tt class="literal">register()</tt> &#26041;&#27861;&#34987;&#35843;&#29992;&#26102;&#20107;&#21153;&#23601;&#20250;&#33258;&#21160;&#24320;&#22987;&#65292;&#24182;&#22312;&#32467;&#26463;&#26102;&#25552;&#20132;&#65288;commit&#65289;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>&#35831;&#27880;&#24847;Seam&#35753;&#20320;&#22312;EJB-QL&#20013;&#20351;&#29992;JSF EL&#34920;&#36798;&#24335;&#12290;&#22240;&#27492;&#21487;&#22312;&#26631;&#20934;JPA <tt class="literal">Query</tt> &#23545;&#35937;&#19978;&#35843;&#29992;&#26222;&#36890;&#30340;JPA <tt class="literal">setParameter()</tt> &#26041;&#27861;&#65292;&#36825;&#26679;&#23682;&#19981;&#22937;&#21705;&#65311;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p><tt class="literal">Log</tt> API&#20026;&#26174;&#31034;&#27169;&#26495;&#21270;&#30340;&#26085;&#24535;&#28040;&#24687;&#25552;&#20379;&#20102;&#20415;&#21033;&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>&#22810;&#20010;JSF&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#36820;&#22238;&#19968;&#20010;&#23383;&#31526;&#20018;&#20540;&#30340;&#36755;&#20986;&#65292;&#23427;&#20915;&#23450;&#20102;&#25509;&#19979;&#26469;&#24212;&#26174;&#31034;&#30340;&#39029;&#38754;&#20869;&#23481;&#12290;
								&#31354;&#36755;&#20986;&#65288;&#25110;&#36820;&#22238;&#20540;&#20026;&#31354;&#30340;&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#65289;&#37325;&#26032;&#26174;&#31034;&#19978;&#19968;&#39029;&#30340;&#20869;&#23481;&#12290;
								&#22312;&#26222;&#36890;&#30340;JSF&#20013;&#65292;&#29992;JSF&#30340;<span class="emphasis"><em>&#23548;&#33322;&#35268;&#21017;&#65288;navigation rule&#65289;</em></span> &#26469;&#20915;&#23450;&#36755;&#20986;&#32467;&#26524;&#30340;JSF&#35270;&#22270;id&#26159;&#24456;&#24120;&#29992;&#30340;&#12290;
								&#36825;&#31181;&#38388;&#25509;&#24615;&#23545;&#20110;&#22797;&#26434;&#30340;&#24212;&#29992;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#65292;&#20540;&#24471;&#21435;&#23454;&#36341;&#12290;&#20294;&#26159;&#65292;&#23545;&#20110;&#35937;&#31034;&#20363;&#36825;&#26679;&#31616;&#21333;&#30340;&#30340;&#24212;&#29992;&#65292;Seam&#35753;&#20320;&#20351;&#29992;JSF&#35270;&#22270;id&#20316;&#20026;&#36755;&#20986;&#32467;&#26524;&#65292;&#20197;&#20943;&#23569;&#23545;&#23548;&#33322;&#35268;&#21017;&#30340;&#38656;&#27714;&#12290;<span class="emphasis"><em>&#35831;&#27880;&#24847;&#65292;&#24403;&#20320;&#29992;&#35270;&#22270;id&#20316;&#20026;&#36755;&#20986;&#32467;&#26524;&#26102;&#65292;Seam&#24635;&#20250;&#25191;&#34892;&#19968;&#27425;&#27983;&#35272;&#22120;&#30340;&#37325;&#23450;&#21521;&#12290;</em></span>
								</p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>Seam&#25552;&#20379;&#20102;&#22823;&#37327;&#30340; <span class="emphasis"><em>&#20869;&#32622;&#32452;&#20214;&#65288;built-in components&#65289;</em></span> &#26469;&#21327;&#21161;&#35299;&#20915;&#37027;&#20123;&#32463;&#24120;&#36935;&#21040;&#30340;&#38382;&#39064;&#12290;
                        &#29992; <tt class="literal">FacesMessages</tt> &#32452;&#20214;&#23601;&#21487;&#24456;&#23481;&#26131;&#22320;&#26469;&#26174;&#31034;&#27169;&#26495;&#21270;&#30340;&#38169;&#35823;&#25110;&#25104;&#21151;&#30340;&#28040;&#24687;&#12290;
                        &#20869;&#32622;&#30340;Seam&#32452;&#20214;&#36824;&#21487;&#30001;&#27880;&#20837;&#25110;&#36890;&#36807;&#35843;&#29992; <tt class="literal">instance()</tt> &#26041;&#27861;&#26469;&#33719;&#21462;&#12290;
                       </p></td></tr></table></div></div><p>&#36825;&#27425;&#25105;&#20204;&#24182;&#27809;&#26377;&#26174;&#24335;&#25351;&#23450; <tt class="literal">@Scope</tt>&#65292;&#33509;&#27809;&#26377;&#26174;&#24335;&#25351;&#23450;&#26102;&#65292;&#27599;&#20010;Seam &#32452;&#20214;&#31867;&#22411;&#23601;&#20351;&#29992;&#20854;&#40664;&#35748;&#30340;&#20316;&#29992;&#22495;&#12290;&#23545;&#20110;&#26080;&#29366;&#24577;&#30340;&#20250;&#35805;Bean&#65292;
        &#20854;&#40664;&#35748;&#30340;&#20316;&#29992;&#22495;&#23601;&#26159;&#26080;&#29366;&#24577;&#30340;&#19978;&#19979;&#25991;&#12290;&#23454;&#38469;&#19978; <span class="emphasis"><em>&#25152;&#26377;&#30340;</em></span> &#26080;&#29366;&#24577;&#30340;&#20250;&#35805;Bean&#37117;&#23646;&#20110;&#26080;&#29366;&#24577;&#30340;&#19978;&#19979;&#25991;&#12290;
        </p><p>&#20250;&#35805;Bean&#30340;&#21160;&#20316;&#30417;&#21548;&#22120;&#22312;&#27492;&#23567;&#24212;&#29992;&#20013;&#23653;&#34892;&#20102;&#19994;&#21153;&#21644;&#25345;&#20037;&#21270;&#36923;&#36753;&#12290;&#22312;&#26356;&#22797;&#26434;&#30340;&#24212;&#29992;&#20013;&#65292;&#25105;&#20204;&#21487;&#33021;&#35201;&#23558;&#20195;&#30721;&#20998;&#23618;&#24182;&#37325;&#26500;&#25345;&#20037;&#21270;&#36923;&#36753;&#23618;&#25104;
        &#19987;&#29992;&#25968;&#25454;&#23384;&#21462;&#32452;&#20214;&#65292;&#36825;&#24456;&#23481;&#26131;&#20570;&#21040;&#12290;&#20294;&#35831;&#27880;&#24847;Sean&#24182;&#19981;&#24378;&#21046;&#20320;&#22312;&#24212;&#29992;&#20998;&#23618;&#26102;&#20351;&#29992;&#26576;&#31181;&#29305;&#23450;&#30340;&#20998;&#23618;&#31574;&#30053;&#12290;
        </p><p>&#27492;&#22806;&#65292;&#20063;&#35831;&#27880;&#24847;&#25105;&#20204;&#30340;SessionBean&#20250;&#21516;&#27493;&#35775;&#38382;&#19982;web&#35831;&#27714;&#30456;&#20851;&#32852;&#30340;&#19978;&#19979;&#25991;&#65288;&#27604;&#22914;&#22312; <tt class="literal">User</tt> &#23545;&#35937;&#20013;&#30340;&#34920;&#21333;&#30340;&#20540;&#65289;&#65292;&#29366;&#24577;&#20250;&#34987;&#20445;&#25345;&#22312;&#20107;&#21153;&#22411;&#30340;&#36164;&#28304;&#37324;&#65288;EntityManager &#23545;&#35937;&#65289;&#12290;
        &#36825;&#26159;&#23545;&#20256;&#32479;J2EE&#30340;&#20307;&#31995;&#32467;&#26500;&#30340;&#31361;&#30772;&#12290;&#20877;&#27425;&#35828;&#26126;&#65292;&#22914;&#26524;&#20320;&#20064;&#24815;&#20110;&#20256;&#32479;J2EE&#30340;&#20998;&#23618;&#65292;&#20063;&#21487;&#20197;&#22312;&#20320;&#30340;Seam&#24212;&#29992;&#23454;&#34892;&#12290;&#20294;&#26159;&#23545;&#20110;&#35768;&#22810;&#30340;&#24212;&#29992;&#65292;&#36825;&#26159;&#26126;&#26174;&#30340;&#27809;&#26377;&#24517;&#35201; &#12290;
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1064"></a>1.2.1.3.&nbsp;&#20250;&#35805;Bean&#30340;&#26412;&#22320;&#25509;&#21475;&#65306;<tt class="literal">Register.java</tt></h4></div></div><div></div></div><p>&#24456;&#33258;&#28982;&#65292;&#25105;&#20204;&#30340;&#20250;&#35805;Bean&#38656;&#35201;&#19968;&#20010;&#26412;&#22320;&#25509;&#21475;&#12290;</p><div class="example"><a name="d0e1071"></a><p class="title"><b>Example&nbsp;1.3.&nbsp;</b></p><pre class="programlisting">@Local
public interface Register
{
   public String register();
}</pre></div><p>&#25152;&#26377;&#30340;Java&#20195;&#30721;&#23601;&#36825;&#20123;&#20102;&#65292;&#29616;&#22312;&#21435;&#30475;&#19968;&#19979;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1076"></a>1.2.1.4.&nbsp;Seam&#32452;&#20214;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#65306;<tt class="literal">components.xml</tt></h4></div></div><div></div></div><p>
        &#22914;&#26524;&#20320;&#27492;&#21069;&#26366;&#25509;&#35302;&#36807;&#35768;&#22810;&#30340;Java&#26694;&#26550;&#65292;&#20320;&#23601;&#20250;&#20064;&#24815;&#20110;&#23558;&#25152;&#26377;&#30340;&#32452;&#20214;&#31867;&#25918;&#22312;&#26576;&#31181;XML&#25991;&#20214;&#20013;&#26469;&#22768;&#26126;&#65292;&#37027;&#20123;&#25991;&#20214;&#23601;&#20250;&#38543;&#30528;&#39033;&#30446;&#30340;&#19981;&#26029;&#25104;&#29087;&#32780;&#19981;&#26029;&#21152;&#22823;&#21040;&#26368;&#32456;&#21040;&#19981;&#21487;&#25910;&#25342;&#30340;&#22320;&#27493;&#12290;
        &#23545;&#20110;Seam&#24212;&#29992;&#65292;&#20320;&#23613;&#21487;&#25918;&#24515;&#65292;&#22240;&#20026;&#23427;&#24182;&#19981;&#35201;&#27714;&#24212;&#29992;&#32452;&#20214;&#37117;&#35201;&#26377;&#30456;&#24212;&#30340;XML&#12290;&#22823;&#37096;&#20221;&#30340;Seam&#24212;&#29992;&#35201;&#27714;&#38750;&#24120;&#23569;&#37327;&#30340;XML&#21363;&#21487;&#65292;&#19988;XML&#25991;&#20214;&#22823;&#23567;&#19981;&#20250;&#38543;&#30528;&#39033;&#30446;&#30340;&#22686;&#22823;&#32780;&#24555;&#36895;&#22686;&#38271;&#12290;
         </p><p>
            &#26080;&#35770;&#22914;&#20309;&#65292;&#33509;&#33021;&#20026; <span class="emphasis"><em>&#26576;&#20123;</em></span> &#32452;&#20214;&#65288;&#29305;&#21035;&#26159;Seam&#20869;&#32622;&#32452;&#20214;&#65289;&#25552;&#20379;<span class="emphasis"><em>&#26576;&#20123;</em></span> &#22806;&#37096;&#37197;&#32622;&#24448;&#24448;&#26159;&#26377;&#29992;&#30340;&#12290;&#36825;&#26679;&#19968;&#26469;&#65292;&#25105;&#20204;&#23601;&#26377;&#20960;&#20010;&#36873;&#25321;&#65292; &#20294;&#26368;&#28789;&#27963;&#30340;&#36873;&#25321;&#36824;&#26159;&#20351;&#29992;&#20301;&#20110; <tt class="literal">WEB-INF</tt> &#30446;&#24405;&#19979;&#30340; <tt class="literal">components.xml</tt> &#37197;&#32622;&#25991;&#20214;&#12290;
           &#25105;&#20204;&#23558;&#29992; <tt class="literal">components.xml</tt> &#25991;&#20214;&#26469;&#28436;&#31034;Seam&#24590;&#26679;&#22312;JNDI&#20013;&#25214;&#21040;EJB&#32452;&#20214;:
        </p><div class="example"><a name="d0e1100"></a><p class="title"><b>Example&nbsp;1.4.&nbsp;</b></p><pre class="programlisting">&lt;components xmlns="http://jboss.com/products/seam/components"
            xmlns:core="http://jboss.com/products/seam/core"&gt;
     &lt;core:init jndi-pattern="@jndiPattern@"/&gt;
&lt;/components&gt;</pre></div><p>&#27492;&#20195;&#30721;&#37197;&#32622;&#20102;Seam&#20869;&#32622;&#32452;&#20214; <tt class="literal">org.jboss.seam.core.init</tt> &#30340; <tt class="literal">jndiPattern</tt> &#23646;&#24615;&#12290;&#36825;&#37324;&#38656;&#35201;&#22855;&#24618;&#30340;@&#31526;&#21495;&#26159;&#22240;&#20026;ANT&#33050;&#26412;&#20250;&#22312;&#37096;&#32626;&#24212;&#29992;&#26102;&#23558;&#27491;&#30830;&#30340;JNDI&#35821;&#27861;&#22312;&#26631;&#35760;&#22788;&#33258;&#21160;&#22635;&#34917;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1111"></a>1.2.1.5.&nbsp;Web&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#65306;<tt class="literal">web.xml</tt></h4></div></div><div></div></div><p>&#25105;&#20204;&#23558;&#20197;WAR&#30340;&#24418;&#24335;&#26469;&#37096;&#32626;&#27492;&#23567;&#24212;&#29992;&#30340;&#34920;&#31034;&#23618;&#65292;&#22240;&#27492;&#38656;&#35201;web&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#12290;</p><div class="example"><a name="d0e1118"></a><p class="title"><b>Example&nbsp;1.5.&nbsp;</b></p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;

    &lt;!-- Seam --&gt;

    &lt;listener&gt;
        &lt;listener-class&gt;org.jboss.seam.servlet.SeamListener&lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;!-- MyFaces --&gt;

    &lt;listener&gt;
        &lt;listener-class&gt;
            org.apache.myfaces.webapp.StartupServletContextListener
        &lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;context-param&gt;
        &lt;param-name&gt;javax.faces.STATE_SAVING_METHOD&lt;/param-name&gt;
        &lt;param-value&gt;client&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

    &lt;!-- Faces Servlet Mapping --&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.seam&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;</pre></div><p>&#27492; <tt class="literal">web.xml</tt> &#25991;&#20214;&#37197;&#32622;&#20102;Seam&#21644;JSF&#12290;&#25152;&#26377;Seam&#24212;&#29992;&#20013;&#30340;&#37197;&#32622;&#19982;&#27492;&#22788;&#30340;&#37197;&#32622;&#22522;&#26412;&#30456;&#21516;&#12290;
         </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1126"></a>1.2.1.6.&nbsp;JSF&#37197;&#32622;&#65306;<tt class="literal">faces-config.xml</tt></h4></div></div><div></div></div><p>&#32477;&#22823;&#22810;&#25968;&#30340;Seam&#24212;&#29992;&#23558;JSF&#26469;&#20316;&#20026;&#34920;&#31034;&#23618;&#12290;&#22240;&#32780;&#25105;&#20204;&#36890;&#24120;&#38656;&#35201; <tt class="literal">faces-config.xml</tt>&#12290;SEAM&#23558;&#29992;Facelet&#23450;&#20041;&#35270;&#22270;&#34920;&#29616;&#23618;&#65292;&#25152;&#20197;&#25105;&#20204;&#38656;&#35201;&#21578;&#35785;JSF&#29992;Facelet&#20316;&#20026;&#23427;&#30340;&#27169;&#26495;&#24341;&#25806;&#12290;</p><div class="example"><a name="registration-faces-config-xml"></a><p class="title"><b>Example&nbsp;1.6.&nbsp;</b></p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE faces-config
PUBLIC "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN"
                            "http://java.sun.com/dtd/web-facesconfig_1_0.dtd"&gt;
&lt;faces-config&gt;

    &lt;!-- A phase listener is needed by all Seam applications --&gt;

    &lt;lifecycle&gt;
        &lt;phase-listener&gt;org.jboss.seam.jsf.SeamPhaseListener&lt;/phase-listener&gt;
    &lt;/lifecycle&gt;

&lt;/faces-config&gt;</pre></div><p>
&#27880;&#24847;&#25105;&#20204;&#19981;&#38656;&#35201;&#30003;&#26126;&#20219;&#20309;JSF managed Bean&#65281;&#22240;&#20026;&#25105;&#20204;&#25152;&#26377;&#30340;managed Bean&#37117;&#26159;&#36890;&#36807;&#32463;&#36807;&#27880;&#37322;&#30340;Seam&#32452;&#20214;&#12290;&#25152;&#20197;&#22312;Seam&#30340;&#24212;&#29992;&#20013;&#65292;faces-config.xml&#27604;&#21407;&#22987;&#30340;JSF&#26356;&#23569;&#29992;&#21040;&#12290;
        </p><p>&#23454;&#38469;&#19978;&#65292;&#19968;&#26086;&#20320;&#25226;&#25152;&#26377;&#30340;&#22522;&#26412;&#25551;&#36848;&#25991;&#20214;&#37197;&#32622;&#23436;&#27605;&#65292;&#20320;&#25152;&#38656;&#20889;&#30340; <span class="emphasis"><em>&#21807;&#19968;&#31867;&#22411;&#30340;</em></span> XML&#25991;&#20214;&#23601;&#26159;&#23548;&#33322;&#35268;&#21017;&#21450;&#21487;&#33021;&#30340;jBPM&#27969;&#31243;&#23450;&#20041;&#12290;&#23545;&#20110;Seam&#32780;&#35328;&#65292; <span class="emphasis"><em>&#27969;&#31243;&#65288;process flow&#65289;</em></span> &#21450; <span class="emphasis"><em>&#37197;&#32622;&#25968;&#25454;</em></span> &#26159;&#21807;&#19968;&#30495;&#27491;&#23646;&#20110;&#38656;&#35201;XML&#23450;&#20041;&#30340;&#12290;
        </p><p>&#22312;&#27492;&#31616;&#21333;&#30340;&#31034;&#20363;&#20013;&#65292;&#22240;&#20026;&#25105;&#20204;&#23558;&#35270;&#22270;&#39029;&#38754;&#30340;ID&#23884;&#20837;&#21040;Action&#20195;&#30721;&#20013;&#65292;&#25152;&#20197;&#25105;&#20204;&#29978;&#33267;&#37117;&#19981;&#38656;&#35201;&#23450;&#20041;&#23548;&#33322;&#35268;&#21017;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1154"></a>1.2.1.7.&nbsp;EJB&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#65306;<tt class="literal">ejb-jar.xml</tt>
				</h4></div></div><div></div></div><p><tt class="literal">ejb-jar.xml</tt> &#25991;&#20214;&#23558; <tt class="literal">SeamInterceptor</tt> &#32465;&#23450;&#21040;&#21387;&#32553;&#21253;&#20013;&#25152;&#26377;&#30340;&#20250;&#35805;Bean&#19978;&#65292;&#20197;&#27492;&#23454;&#29616;&#20102;Seam&#19982;EJB3&#30340;&#25972;&#21512;&#12290;
       </p><pre class="programlisting">&lt;ejb-jar xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"
         version="3.0"&gt;

   &lt;interceptors&gt;
     &lt;interceptor&gt;
       &lt;interceptor-class&gt;org.jboss.seam.ejb.SeamInterceptor&lt;/interceptor-class&gt;
     &lt;/interceptor&gt;
   &lt;/interceptors&gt;

   &lt;assembly-descriptor&gt;
      &lt;interceptor-binding&gt;
         &lt;ejb-name&gt;*&lt;/ejb-name&gt;
         &lt;interceptor-class&gt;org.jboss.seam.ejb.SeamInterceptor&lt;/interceptor-class&gt;
      &lt;/interceptor-binding&gt;
   &lt;/assembly-descriptor&gt;

&lt;/ejb-jar&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1169"></a>1.2.1.8.&nbsp;EJB&#25345;&#20037;&#21270;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#65306;<tt class="literal">persistence.xml</tt></h4></div></div><div></div></div><p>
					<tt class="literal">persistence.xml</tt> &#25991;&#20214;&#21578;&#35785;EJB&#30340;&#25345;&#20037;&#21270;&#23618;&#22312;&#21738;&#25214;&#21040;&#25968;&#25454;&#28304;&#65292;&#35813;&#25991;&#20214;&#20063;&#21547;&#26377;&#19968;&#20123;&#21378;&#21830;&#29305;&#23450;&#30340;&#35774;&#23450;&#12290;&#27492;&#20363;&#22312;&#31243;&#24207;&#21551;&#21160;&#26102;&#33258;&#21160;&#21019;&#24314;&#25968;&#25454;&#24211;Schema&#12290;
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
             version="1.0"&gt;
    &lt;persistence-unit name="userDatabase"&gt;
      &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
      &lt;jta-data-source&gt;java:/DefaultDS&lt;/jta-data-source&gt;
      &lt;properties&gt;
         &lt;property name="hibernate.hbm2ddl.auto" value="create-drop"/&gt;
      &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1181"></a>1.2.1.9.&nbsp;&#35270;&#22270;&#65306;<tt class="literal">register.xhtml</tt> &#21644; <tt class="literal">registered.xhtml</tt>
				</h4></div></div><div></div></div><p>&#23545;&#20110;Seam&#24212;&#29992;&#30340;&#35270;&#22270;&#21487;&#30001;&#20219;&#24847;&#25903;&#25345;JSF&#30340;&#25216;&#26415;&#26469;&#23454;&#29616;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992;&#20102;JSP&#65292;&#22240;&#20026;&#22823;&#22810;&#25968;&#30340;&#24320;&#21457;&#20154;&#21592;&#37117;&#24456;&#29087;&#24713;&#65292;
                &#19988;&#36825;&#37324;&#24182;&#27809;&#26377;&#20854;&#23427;&#22826;&#22810;&#30340;&#35201;&#27714;&#12290;&#65288;&#25105;&#20204;&#24314;&#35758;&#20320;&#22312;&#23454;&#38469;&#24320;&#21457;&#20013;&#20351;&#29992;Facelets&#65289;&#12290;
        </p><div class="example"><a name="registration-simpleform"></a><p class="title"><b>Example&nbsp;1.7.&nbsp;</b></p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %&gt;
&lt;%@ taglib uri="http://jboss.com/products/seam/taglib" prefix="s" %&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Register New User&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;f:view&gt;
   &lt;h:form&gt;
     &lt;table border="0"&gt;
       &lt;s:validateAll&gt;
         &lt;tr&gt;
           &lt;td&gt;Username&lt;/td&gt;
           &lt;td&gt;&lt;h:inputText value="#{user.username}"/&gt;&lt;/td&gt;
         &lt;/tr&gt;
         &lt;tr&gt;
           &lt;td&gt;Real Name&lt;/td&gt;
           &lt;td&gt;&lt;h:inputText value="#{user.name}"/&gt;&lt;/td&gt;
         &lt;/tr&gt;
         &lt;tr&gt;
           &lt;td&gt;Password&lt;/td&gt;
           &lt;td&gt;&lt;h:inputSecret value="#{user.password}"/&gt;&lt;/td&gt;
         &lt;/tr&gt;
       &lt;/s:validateAll&gt;
     &lt;/table&gt;
     &lt;h:messages/&gt;
     &lt;h:commandButton type="submit" value="Register" action="#{register.register}"/&gt;
   &lt;/h:form&gt;
  &lt;/f:view&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre></div><p>&#36825;&#37324;&#30340; <tt class="literal">&lt;s:validateAll&gt;</tt>&#26631;&#31614;&#26159;Seam&#29305;&#26377;&#30340;&#12290;
				&#35813;JSF&#32452;&#20214;&#21578;&#35785;JSF&#35753;&#23427;&#29992;&#23454;&#20307;Bean&#20013;&#25152;&#25351;&#23450;&#30340;Hibernat&#39564;&#35777;&#22120;&#27880;&#35299;&#26469;&#39564;&#35777;&#25152;&#26377;&#21253;&#21547;&#36755;&#20837;&#30340;&#23383;&#27573;&#12290;
        </p><div class="example"><a name="registration-simplepage"></a><p class="title"><b>Example&nbsp;1.8.&nbsp;</b></p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Successfully Registered New User&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;f:view&gt;
    Welcome, &lt;h:outputText value="#{user.name}"/&gt;,
    you are successfully registered as &lt;h:outputText value="#{user.username}"/&gt;.
  &lt;/f:view&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre></div><p>&#36825;&#26159;&#20010;&#26497;&#20854;&#26222;&#36890;&#30340;&#20351;&#29992;JSF&#32452;&#20214;&#30340;JSP&#39029;&#38754;&#65292;&#19982;Seam&#27627;&#26080;&#30456;&#24178;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1205"></a>1.2.1.10.&nbsp;EAR&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#65306;<tt class="literal">application.xml</tt>
				</h4></div></div><div></div></div><p>&#26368;&#21518;&#65292;&#22240;&#20026;&#25105;&#20204;&#30340;&#24212;&#29992;&#26159;&#35201;&#37096;&#32626;&#25104;EAR&#30340;&#65292;&#22240;&#27492;&#25105;&#20204;&#20063;&#38656;&#35201;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#12290;</p><div class="example"><a name="registration-application-xml"></a><p class="title"><b>Example&nbsp;1.9.&nbsp;</b></p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;application xmlns="http://java.sun.com/xml/ns/javaee"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd"
             version="5"&gt;

    &lt;display-name&gt;Seam Registration&lt;/display-name&gt;

    &lt;module&gt;
        &lt;web&gt;
            &lt;web-uri&gt;jboss-seam-registration.war&lt;/web-uri&gt;
            &lt;context-root&gt;/seam-registration&lt;/context-root&gt;
        &lt;/web&gt;
    &lt;/module&gt;
    &lt;module&gt;
        &lt;ejb&gt;jboss-seam-registration.jar&lt;/ejb&gt;
    &lt;/module&gt;
    &lt;module&gt;
        &lt;java&gt;jboss-seam.jar&lt;/java&gt;
    &lt;/module&gt;
    &lt;module&gt;
        &lt;java&gt;el-api.jar&lt;/java&gt;
    &lt;/module&gt;
    &lt;module&gt;
        &lt;java&gt;el-ri.jar&lt;/java&gt;
    &lt;/module&gt;

&lt;/application&gt;</pre></div><p>&#27492;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#32852;&#25509;&#20102;EAR&#20013;&#30340;&#25152;&#26377;&#27169;&#22359;&#65292;&#24182;&#25226;Web&#24212;&#29992;&#32465;&#23450;&#21040;&#27492;&#24212;&#29992;&#30340;&#39318;&#39029; <tt class="literal">/seam-registration</tt>&#12290;
        </p></div><p>&#33267;&#27492;&#65292;&#25105;&#20204;&#20102;&#35299;&#20102;&#25972;&#20010;&#24212;&#29992;&#20013; <span class="emphasis"><em>&#25152;&#26377;&#30340;</em></span> &#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#65281;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1226"></a>1.2.2.&nbsp;&#24037;&#20316;&#21407;&#29702;</h3></div></div><div></div></div><p>&#24403;&#25552;&#20132;&#34920;&#21333;&#26102;,JSF&#35831;&#27714;Seam&#26469;&#35299;&#26512;&#21517;&#20026; <tt class="literal">user</tt> &#30340;&#21464;&#37327;&#12290;&#30001;&#20110;&#36824;&#27809;&#26377;&#20540;&#32465;&#23450;&#21040; <tt class="literal">user</tt> &#19978;&#65288;&#22312;&#20219;&#24847;&#30340;Seam&#19978;&#19979;&#25991;&#20013;&#65289;&#65292;
      Seam&#23601;&#20250;&#23454;&#20363;&#21270; <tt class="literal">user</tt>&#32452;&#20214;&#65292;&#25509;&#30528;&#25226;&#23427;&#20445;&#23384;&#22312;Seam&#20250;&#35805;&#19978;&#19979;&#25991;&#21518;&#65292;&#28982;&#21518;&#23558; <tt class="literal">User</tt> &#23454;&#20307;Bean&#23454;&#20363;&#36820;&#22238;&#32473;JSF&#12290;
      </p><p>&#34920;&#21333;&#36755;&#20837;&#30340;&#20540;&#23558;&#30001;&#22312; <tt class="literal">User</tt> &#23454;&#20307;&#20013;&#25152;&#25351;&#23450;&#30340;Hibernate&#39564;&#35777;&#22120;&#26469;&#39564;&#35777;&#12290;
          &#33509;&#26377;&#38750;&#27861;&#36755;&#20837;&#65292;JSF&#23601;&#37325;&#26032;&#26174;&#31034;&#24403;&#21069;&#39029;&#38754;&#12290;&#21542;&#21017;&#65292;JSF&#23601;&#23558;&#36755;&#20837;&#20540;&#32465;&#23450;&#21040; <tt class="literal">User</tt> &#23454;&#20307;Bean&#30340;&#23383;&#27573;&#19978;&#12290;
      </p><p>&#25509;&#30528;&#65292;JSF&#35831;&#27714;Seam&#26469;&#35299;&#26512;&#21464;&#37327; <tt class="literal">register</tt>&#12290;
			Seam&#22312;&#26080;&#29366;&#24577;&#19978;&#19979;&#25991;&#20013;&#25214;&#21040; <tt class="literal">RegisterAction</tt> &#26080;&#29366;&#24577;&#30340;&#20250;&#35805;Bean&#24182;&#25226;&#23427;&#36820;&#22238;&#12290;JSF&#38543;&#20043;&#35843;&#29992; <tt class="literal">register()</tt> &#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#12290;</p><p>Seam&#25318;&#25130;&#26041;&#27861;&#35843;&#29992;&#24182;&#22312;&#32487;&#32493;&#35843;&#29992;&#20043;&#21069;&#20174;Seam&#20250;&#35805;&#19978;&#19979;&#25991;&#27880;&#20837; <tt class="literal">User</tt> &#23454;&#20307;&#12290;
      </p><p>
				<tt class="literal">register()</tt> &#26041;&#27861;&#26816;&#26597;&#25152;&#36755;&#20837;&#29992;&#25143;&#21517;&#30340;&#29992;&#25143;&#26159;&#21542;&#24050;&#23384;&#22312;&#12290;
				&#33509;&#23384;&#22312;&#35813;&#29992;&#25143;&#21517;&#65292;&#21017;&#38169;&#35823;&#28040;&#24687;&#36827;&#20837; <tt class="literal">facesmessages</tt> &#32452;&#20214;&#38431;&#21015;&#65292;&#36820;&#22238;&#26080;&#25928;&#32467;&#26524;&#24182;&#35302;&#21457;&#27983;&#35272;&#22120;&#37325;&#26174;&#39029;&#38754;&#12290;<tt class="literal">facesmessages</tt> &#32452;&#20214;&#23884;&#22312;&#28040;&#24687;&#23383;&#31526;&#20018;&#30340;JSF&#34920;&#36798;&#24335;&#65292;&#24182;&#23558;JSF <tt class="literal">facesmessage</tt> &#28155;&#21152;&#21040;&#35270;&#22270;&#20013;&#12290;
      </p><p>&#33509;&#36755;&#20837;&#30340;&#29992;&#25143;&#19981;&#23384;&#22312;&#65292;<tt class="literal">"/registered.jsp"</tt> &#36755;&#20986;&#23601;&#20250;&#23558;&#27983;&#35272;&#22120;&#37325;&#23450;&#21521;&#21040; <tt class="literal">registered.jsp</tt> &#39029;&#12290;
      &#24403;JSF&#26469;&#28210;&#26579;&#39029;&#38754;&#26102;&#65292;&#23427;&#35831;&#27714;Seam&#26469;&#35299;&#26512;&#21517;&#20026; <tt class="literal">user</tt> &#30340;&#21464;&#37327;&#65292;&#24182;&#20351;&#29992;&#20174;Seam&#20250;&#35805;&#20316;&#29992;&#22495;&#36820;&#22238;&#30340; <tt class="literal">User</tt> &#23454;&#20307;&#30340;&#23646;&#24615;&#20540;&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="messages"></a>1.3.&nbsp;Seam&#20013;&#30340;&#21487;&#28857;&#20987;&#21015;&#34920;&#65306;&#28040;&#24687;&#31034;&#20363;</h2></div></div><div></div></div><p>&#22312;&#20960;&#20046;&#25152;&#26377;&#30340;&#22312;&#32447;&#24212;&#29992;&#20013;&#37117;&#20813;&#19981;&#20102;&#23558;&#25628;&#32034;&#32467;&#26524;&#26174;&#31034;&#25104;&#21487;&#28857;&#20987;&#30340;&#21015;&#34920;&#12290;
		&#22240;&#27492;Sean&#22312;JSF&#23618;&#20043;&#19978;&#25552;&#20379;&#20102;&#29305;&#27530;&#30340;&#21151;&#33021;&#65292;&#20351;&#24471;&#25105;&#20204;&#24456;&#23481;&#26131;&#29992;EJB-QL&#25110;HQL&#26469;&#26597;&#35810;&#25968;&#25454;&#24182;&#29992;JSF <tt class="literal">&lt;h:dataTable&gt;</tt> &#23558;&#26597;&#35810;&#32467;&#26524;&#26174;&#31034;&#25104;&#21487;&#28857;&#20987;&#30340;&#21015;&#34920;&#12290;&#25105;&#20204;&#23558;&#22312;&#25509;&#19979;&#30340;&#20363;&#23376;&#20013;&#28436;&#31034;&#36825;&#19968;&#21151;&#33021;&#12290;
    </p><div class="mediaobject" align="center"><img src="images/messages.png" align="middle"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1308"></a>1.3.1.&nbsp;&#29702;&#35299;&#20195;&#30721;</h3></div></div><div></div></div><p>&#27492;&#28040;&#24687;&#31034;&#20363;&#20013;&#26377;&#19968;&#20010;&#23454;&#20307;Bean&#65292;<tt class="literal">Message</tt>&#65292;&#19968;&#20010;&#20250;&#35805;Bean <tt class="literal">MessageListBean</tt> &#21450;&#19968;&#20010;JSP&#39029;&#38754;&#12290;
       </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1319"></a>1.3.1.1.&nbsp;&#23454;&#20307;Bean&#65306;<tt class="literal">Message.java</tt>
				</h4></div></div><div></div></div><p>
					<tt class="literal">Message</tt> &#23454;&#20307;&#23450;&#20041;&#20102;&#28040;&#24687;&#30340;title&#65292;text&#65292;date&#21644;time&#20197;&#21450;&#35813;&#28040;&#24687;&#26159;&#21542;&#24050;&#35835;&#30340;&#26631;&#24535;&#65306;
       </p><div class="example"><a name="d0e1330"></a><p class="title"><b>Example&nbsp;1.10.&nbsp;</b></p><pre class="programlisting">@Entity
@Name("message")
@Scope(EVENT)
public class Message implements Serializable
{
   private Long id;
   private String title;
   private String text;
   private boolean read;
   private Date datetime;

   @Id @GeneratedValue
   public Long getId() {
      return id;
   }
   public void setId(Long id) {
      this.id = id;
   }

   @NotNull @Length(max=100)
   public String getTitle() {
      return title;
   }
   public void setTitle(String title) {
      this.title = title;
   }

   @NotNull @Lob
   public String getText() {
      return text;
   }
   public void setText(String text) {
      this.text = text;
   }

   @NotNull
   public boolean isRead() {
      return read;
   }
   public void setRead(boolean read) {
      this.read = read;
   }

   @NotNull
   @Basic @Temporal(TemporalType.TIMESTAMP)
   public Date getDatetime() {
      return datetime;
   }
   public void setDatetime(Date datetime) {
      this.datetime = datetime;
   }

}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1333"></a>1.3.1.2.&nbsp;&#26377;&#29366;&#24577;&#30340;&#20250;&#35805;Bean&#65306;<tt class="literal">MessageManagerBean.java</tt>
				</h4></div></div><div></div></div><p>&#22914;&#27492;&#21069;&#30340;&#20363;&#23376;&#65292;&#20250;&#35805;Bean <tt class="literal">MessageManagerBean</tt> &#29992;&#26469;&#32473;&#34920;&#21333;&#20013;&#30340;&#20004;&#20010;&#25353;&#38062;&#23450;&#20041;&#20010;&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#65292;
       &#20854;&#20013;&#30340;&#19968;&#20010;&#25353;&#38062;&#29992;&#26469;&#20174;&#21015;&#34920;&#20013;&#36873;&#25321;&#28040;&#24687;&#65292;&#24182;&#26174;&#31034;&#35813;&#28040;&#24687;&#12290;&#32780;&#21478;&#19968;&#20010;&#25353;&#38062;&#21017;&#29992;&#26469;&#21024;&#38500;&#19968;&#26465;&#28040;&#24687;&#65292;&#38500;&#27492;&#20043;&#22806;&#65292;&#23601;&#27809;&#20160;&#20040;&#29305;&#21035;&#20043;&#22788;&#20102;&#12290;
       </p><p>&#22312;&#29992;&#25143;&#31532;&#19968;&#27425;&#27983;&#35272;&#28040;&#24687;&#39029;&#38754;&#26102;&#65292;<tt class="literal">MessageManagerBean</tt> &#20250;&#35805;Bean&#20063;&#36127;&#36131;&#25235;&#21462;&#28040;&#24687;&#21015;&#34920;&#65292;&#32771;&#34385;&#21040;&#29992;&#25143;&#21487;&#33021;&#20197;&#22810;&#31181;&#26041;&#24335;&#26469;&#27983;&#35272;&#35813;&#39029;&#38754;&#65292;&#20182;&#20204;&#20063;&#26377;&#21487;&#33021;&#19981;&#26159;&#30001;JSF&#21160;&#20316;&#26469;&#23436;&#25104;&#65292;&#27604;&#22914;&#29992;&#25143;&#21487;&#33021;&#23558;&#35813;&#39029;&#21152;&#20837;&#25910;&#34255;&#22841;&#12290;
				&#22240;&#27492;&#25235;&#21462;&#28040;&#24687;&#21015;&#34920;&#21457;&#29983;&#22312;Seam&#30340;&#24037;&#21378;&#26041;&#27861;&#20013;&#65292;&#32780;&#19981;&#26159;&#22312;&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#20013;&#12290;
       </p><p>&#20043;&#25152;&#20197;&#23558;&#27492;&#20250;&#35805;Bean&#35774;&#20026;&#26377;&#29366;&#24577;&#30340;&#65292;&#26159;&#22240;&#20026;&#25105;&#20204;&#24819;&#22312;&#19981;&#21516;&#30340;&#26381;&#21153;&#22120;&#35831;&#27714;&#38388;&#32531;&#23384;&#27492;&#28040;&#24687;&#21015;&#34920;&#12290;</p><div class="example"><a name="d0e1351"></a><p class="title"><b>Example&nbsp;1.11.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Stateful
@Scope(SESSION)
@Name("messageManager")
public class MessageManagerBean implements Serializable, MessageManager
{

   @DataModel                                                                            <span class="co">(1)</span>
   private List&lt;Message&gt; messageList;

   @DataModelSelection                                                                   <span class="co">(2)</span>
   @Out(required=false)                                                                  <span class="co">(3)</span>
   private Message message;

   @PersistenceContext(type=EXTENDED)                                                    <span class="co">(4)</span>
   private EntityManager em;

   @Factory("messageList")                                                               <span class="co">(5)</span>
   public void findMessages()
   {
      messageList = em.createQuery("from Message msg order by msg.datetime desc").getResultList();
   }

   public void select()                                                                  <span class="co">(6)</span>
   {
      message.setRead(true);
   }

   public void delete()                                                                  <span class="co">(7)</span>
   {
      messageList.remove(message);
      em.remove(message);
      message=null;
   }

   @Remove @Destroy                                                                      <span class="co">(8)</span>
   public void destroy() {}

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>&#27880;&#35299; <tt class="literal">@DataModel</tt> &#26292;&#38706;&#20102; <tt class="literal">java.util.List</tt> &#31867;&#22411;&#30340;&#23646;&#24615;&#32473;JSF&#39029;&#38754;&#26469;&#20316;&#20026; <tt class="literal">javax.faces.model.DataModel</tt> &#30340;&#23454;&#20363;&#12290;
								&#36825;&#20801;&#35768;&#25105;&#20204;&#22312;JSF <tt class="literal">&lt;h:dataTable&gt;</tt>&#30340;&#27599;&#19968;&#34892;&#20013;&#33021;&#20351;&#29992;&#21487;&#28857;&#20987;&#21015;&#34920;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292;<tt class="literal">DataModel</tt> &#21487;&#22312;&#21464;&#37327;&#21517;&#20026; <tt class="literal">messageList</tt> &#30340;&#20250;&#35805;&#19978;&#19979;&#25991;&#20013;&#34987;&#20351;&#29992;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
									<tt class="literal">@DataModelSelection</tt> &#27880;&#35299;&#21578;&#35785;&#20102;Seam&#26469;&#27880;&#20837; <tt class="literal">List</tt> &#20803;&#32032;&#21040;&#30456;&#24212;&#30340;&#34987;&#28857;&#20987;&#38142;&#25509;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>&#27880;&#35299; <tt class="literal">@Out</tt> &#30452;&#25509;&#26292;&#38706;&#20102;&#34987;&#36873;&#20013;&#30340;&#20540;&#32473;&#39029;&#38754;&#12290;
								&#36825;&#26679;&#19968;&#26469;&#65292;&#27599;&#27425;&#21487;&#28857;&#20987;&#21015;&#34920;&#19968;&#26086;&#34987;&#36873;&#20013;&#65292;<tt class="literal">Message</tt> &#23601;&#34987;&#20250;&#27880;&#20837;&#32473;&#26377;&#29366;&#24577;Bean&#30340;&#23646;&#24615;&#65292;&#32039;&#25509;&#30528; <span class="emphasis"><em>&#21521;&#22806;&#27880;&#20837;&#65288;outjected&#65289;</em></span>&#32473;&#21464;&#37327;&#21517;&#20026; <tt class="literal">message</tt> &#30340;&#20107;&#20214;&#19978;&#19979;&#25991;&#30340;&#23646;&#24615;&#12290;
                       </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>&#27492;&#26377;&#29366;&#24577;Bean&#26377;&#20010;EJB3&#30340; <span class="emphasis"><em>&#25193;&#23637;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#65288;extended persistence context&#65289;</em></span>&#12290;&#21482;&#35201;Bean&#23384;&#22312;&#65292;&#26597;&#35810;&#20013;&#33719;&#21462;&#30340;&#28040;&#24687;&#23601;&#20250;&#20445;&#30041;&#22312;&#21463;&#31649;&#29702;&#30340;&#29366;&#24577;&#20013;&#12290;
                    &#36825;&#26679;&#19968;&#26469;&#65292;&#27492;&#21518;&#23545;&#26377;&#29366;&#24577;Bean&#30340;&#25152;&#26377;&#26041;&#27861;&#35843;&#29992;&#21247;&#38656;&#26174;&#24335;&#35843;&#29992; <tt class="literal">EntityManager</tt> &#23601;&#21487;&#26356;&#26032;&#36825;&#20123;&#28040;&#24687;&#20102;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>&#24403;&#25105;&#20204;&#31532;&#19968;&#27425;&#27983;&#35272;JSP&#39029;&#38754;&#26102;&#65292;<tt class="literal">messageList</tt> &#19978;&#19979;&#25991;&#21464;&#37327;&#23578;&#26410;&#34987;&#21021;&#22987;&#21270;&#65292;<tt class="literal">@Factory</tt> &#27880;&#35299;&#21578;&#35785;Seam&#26469;&#21019;&#24314; <tt class="literal">MessageManagerBean</tt> &#30340;&#23454;&#20363;&#24182;&#35843;&#29992; <tt class="literal">findMessages()</tt> &#26041;&#27861;&#26469;&#21021;&#22987;&#21270;&#19978;&#19979;&#25991;&#21464;&#37327;&#12290;
                       &#25105;&#20204;&#25226; <tt class="literal">findMessages()</tt> &#24403;&#20316; <tt class="literal">messages</tt> &#30340; <span class="emphasis"><em> &#24037;&#21378;&#26041;&#27861;</em></span>&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
									<tt class="literal">select()</tt> &#23558;&#36873;&#20013;&#30340; <tt class="literal">Message</tt> &#26631;&#20026;&#24050;&#35835;&#65292;&#24182;&#21516;&#26102;&#26356;&#26032;&#25968;&#25454;&#24211;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
									<tt class="literal">delete()</tt> &#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#23558;&#36873;&#20013;&#30340; <tt class="literal">Message</tt> &#20174;&#25968;&#25454;&#24211;&#20013;&#21024;&#38500;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>&#23545;&#20110;&#27599;&#20010;&#26377;&#29366;&#24577;&#30340;&#20250;&#35805;Bean&#65292;Seam&#32452;&#20214;&#30340;&#25152;&#26377;&#26041;&#27861;&#20013; <span class="emphasis"><em>&#24517;&#39035;</em></span> &#26377;&#19968;&#19981;&#24102;&#21442;&#25968;&#30340;&#26041;&#27861;&#34987;&#26631;&#20026; <tt class="literal">@Remove @Destroy</tt>
                    &#20197;&#30830;&#20445;&#22312;Seam&#30340;&#19978;&#19979;&#25991;&#32467;&#26463;&#26102;&#21024;&#38500;&#26377;&#29366;&#24577;Bean&#65292;&#24182;&#21516;&#26102;&#28165;&#38500;&#25152;&#26377;&#26381;&#21153;&#22120;&#31471;&#30340;&#29366;&#24577;&#12290;
                    </p></td></tr></table></div></div></div><p>&#35831;&#27880;&#24847;&#65292;&#36825;&#26159;&#20010;&#20250;&#35805;&#20316;&#29992;&#22495;&#30340;Seam&#32452;&#20214;&#12290;&#23427;&#19982;&#29992;&#25143;&#30331;&#20837;&#20250;&#35805;&#30456;&#20851;&#32852;&#65292;&#24182;&#19988;&#30331;&#20837;&#20250;&#35805;&#30340;&#25152;&#26377;&#35831;&#27714;&#20849;&#20139;&#21516;&#19968;&#20010;&#32452;&#20214;&#30340;&#23454;&#20363;&#12290;
				&#65288;&#22312;Seam&#30340;&#24212;&#29992;&#20013;&#65292;&#25105;&#20204;&#36890;&#24120;&#20351;&#29992;&#20250;&#35805;&#20316;&#29992;&#22495;&#30340;&#32452;&#20214;&#12290;&#65289;
       </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1472"></a>1.3.1.3.&nbsp;&#20250;&#35805;Bean&#30340;&#26412;&#22320;&#25509;&#21475;&#65306;<tt class="literal">MessageManager.java</tt>
				</h4></div></div><div></div></div><p>&#24403;&#28982;&#65292;&#27599;&#20010;&#20250;&#35805;Bean&#37117;&#26377;&#20010;&#19994;&#21153;&#25509;&#21475;&#12290;</p><pre class="programlisting">@Local
public interface MessageManager
{
   public void findMessages();
   public void select();
   public void delete();
   public void destroy();
}</pre><p>&#20174;&#29616;&#22312;&#36215;&#65292;&#25105;&#20204;&#22312;&#31034;&#20363;&#20195;&#30721;&#20013;&#23558;&#19981;&#20877;&#23545;&#26412;&#22320;&#25509;&#21475;&#20316;&#29305;&#21035;&#30340;&#35828;&#26126;&#12290;</p><p>&#30001;&#20110;XML&#25991;&#20214;&#19982;&#27492;&#21069;&#30340;&#31034;&#20363;&#20960;&#20046;&#37117;&#19968;&#26679;&#65292;&#22240;&#27492;&#25105;&#20204;&#30053;&#36807;&#20102; <tt class="literal">components.xml</tt>&#12289;<tt class="literal">persistence.xml</tt>&#12289;
           <tt class="literal">web.xml</tt>&#12289;<tt class="literal">ejb-jar.xml</tt>&#12289;<tt class="literal">faces-config.xml</tt> &#21450;<tt class="literal">application.xml</tt> &#30340;&#32454;&#33410;&#65292;&#30452;&#25509;&#26469;&#30475;&#19968;&#19979;JSP&#12290;
       </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1504"></a>1.3.1.4.&nbsp;&#35270;&#22270;&#65306;<tt class="literal">messages.jsp</tt></h4></div></div><div></div></div><p>JSP&#39029;&#38754;&#23601;&#26159;&#30452;&#25509;&#20351;&#29992;JSF <tt class="literal">&lt;h:dataTable&gt;</tt> &#30340;&#32452;&#20214;&#65292;&#24182;&#27809;&#26377;&#19982;Seam&#26377;&#20160;&#20040;&#20851;&#31995;&#12290;
       </p><div class="example"><a name="d0e1514"></a><p class="title"><b>Example&nbsp;1.12.&nbsp;</b></p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Messages&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;f:view&gt;
   &lt;h:form&gt;
     &lt;h2&gt;Message List&lt;/h2&gt;
     &lt;h:outputText value="No messages to display" rendered="#{messageList.rowCount==0}"/&gt;
     &lt;h:dataTable var="msg" value="#{messageList}" rendered="#{messageList.rowCount&gt;0}"&gt;
        &lt;h:column&gt;
           &lt;f:facet name="header"&gt;
              &lt;h:outputText value="Read"/&gt;
           &lt;/f:facet&gt;
           &lt;h:selectBooleanCheckbox value="#{msg.read}" disabled="true"/&gt;
        &lt;/h:column&gt;
        &lt;h:column&gt;
           &lt;f:facet name="header"&gt;
              &lt;h:outputText value="Title"/&gt;
           &lt;/f:facet&gt;
           &lt;h:commandLink value="#{msg.title}" action="#{messageManager.select}"/&gt;
        &lt;/h:column&gt;
        &lt;h:column&gt;
           &lt;f:facet name="header"&gt;
              &lt;h:outputText value="Date/Time"/&gt;
           &lt;/f:facet&gt;
           &lt;h:outputText value="#{msg.datetime}"&gt;
              &lt;f:convertDateTime type="both" dateStyle="medium" timeStyle="short"/&gt;
           &lt;/h:outputText&gt;
        &lt;/h:column&gt;
        &lt;h:column&gt;
           &lt;h:commandButton value="Delete" action="#{messageManager.delete}"/&gt;
        &lt;/h:column&gt;
     &lt;/h:dataTable&gt;
     &lt;h3&gt;&lt;h:outputText value="#{message.title}"/&gt;&lt;/h3&gt;
     &lt;div&gt;&lt;h:outputText value="#{message.text2}"/&gt;&lt;/div&gt;
   &lt;/h:form&gt;
  &lt;/f:view&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1517"></a>1.3.2.&nbsp;&#24037;&#20316;&#21407;&#29702;</h3></div></div><div></div></div><p>&#24403;&#25105;&#20204;&#39318;&#27425;&#27983;&#35272; <tt class="literal">messages.jsp</tt> &#39029;&#38754;&#26102;&#65292;&#26080;&#35770;&#26159;&#21542;&#30001;&#22238;&#20256;&#65288;postback&#65289;&#30340;JSF&#65288;&#39029;&#38754;&#35831;&#27714;&#65289;&#25110;&#27983;&#35272;&#22120;&#30452;&#25509;&#30340;GET&#35831;&#27714;&#65288;&#38750;&#39029;&#38754;&#35831;&#27714;&#65289;&#65292;&#27492;JSP&#39029;&#38754;&#23558;&#35774;&#27861;&#35299;&#26512; <tt class="literal">messagelist</tt> &#19978;&#19979;&#25991;&#21464;&#37327;&#12290;
			&#30001;&#20110;&#19978;&#19979;&#25991;&#21464;&#37327;&#23578;&#26410;&#34987;&#21021;&#22987;&#21270;&#65292;&#22240;&#27492;Seam&#23558;&#35843;&#29992;&#24037;&#21378;&#26041;&#27861; <tt class="literal">findmessages()</tt>&#65292;&#35813;&#26041;&#27861;&#25191;&#34892;&#20102;&#19968;&#27425;&#25968;&#25454;&#24211;&#26597;&#35810;&#24182;&#23548;&#33268; <tt class="literal">DataModel</tt> &#34987;&#21521;&#22806;&#27880;&#20837;&#12290;
            <tt class="literal">DataModel</tt> &#25552;&#20379;&#20102;&#28210;&#26579; <tt class="literal">&lt;h:dataTable&gt;</tt> &#25152;&#38656;&#30340;&#34892;&#25968;&#25454;&#12290;
         </p><p>&#24403;&#29992;&#25143;&#28857;&#20987; <tt class="literal">&lt;h:commandLink&gt;</tt> &#26102;&#65292;JSF&#23601;&#35843;&#29992; <tt class="literal">Select()</tt> &#21160;&#20316;&#30417;&#21548;&#22120;&#12290;
			Seam&#25318;&#25130;&#27492;&#35843;&#29992;&#24182;&#23558;&#25152;&#36873;&#34892;&#30340;&#25968;&#25454;&#27880;&#20837;&#32473; <tt class="literal">messageManager</tt> &#32452;&#20214;&#30340; <tt class="literal">message</tt> &#23646;&#24615;&#12290;
           &#32780;&#21160;&#20316;&#30417;&#21548;&#22120;&#23558;&#25152;&#36873;&#23450;&#30340; <tt class="literal">Message</tt> &#26631;&#20026;&#24050;&#35835;&#12290;&#22312;&#27492;&#35843;&#29992;&#32467;&#26463;&#26102;&#65292;Seam&#21521;&#22806;&#27880;&#20837;&#25152;&#36873;&#23450;&#30340; <tt class="literal">Message</tt> &#32473;&#21517;&#20026; <tt class="literal">message</tt> &#30340;&#21464;&#37327;&#12290;
           &#25509;&#30528;&#65292;EJB&#23481;&#22120;&#25552;&#20132;&#20107;&#21153;&#65292;&#23558; <tt class="literal">Message</tt> &#30340;&#24050;&#35835;&#26631;&#35760;&#20889;&#20837;&#25968;&#25454;&#24211;&#12290;
           &#26368;&#21518;&#65292;&#35813;&#32593;&#39029;&#37325;&#26032;&#28210;&#26579;&#65292;&#20877;&#27425;&#26174;&#31034;&#28040;&#24687;&#21015;&#34920;&#65292;&#24182;&#22312;&#21015;&#34920;&#19979;&#26041;&#26174;&#31034;&#25152;&#36873;&#28040;&#24687;&#30340;&#20869;&#23481;&#12290;
         </p><p>&#22914;&#26524;&#29992;&#25143;&#28857;&#20987;&#20102; <tt class="literal">&lt;h:commandButton&gt;</tt>&#65292;JSF&#23601;&#35843;&#29992; <tt class="literal">delete()</tt> &#21160;&#20316;&#30417;&#21548;&#22120;&#12290;
			Seam&#25318;&#25130;&#27492;&#35843;&#29992;&#24182;&#23558;&#25152;&#36873;&#34892;&#30340;&#25968;&#25454;&#27880;&#20837;&#32473; <tt class="literal">messageManager</tt> &#32452;&#20214;&#30340; <tt class="literal">message</tt> &#23646;&#24615;&#12290;
           &#35302;&#21457;&#21160;&#20316;&#30417;&#21548;&#22120;&#65292;&#23558;&#36873;&#23450;&#30340; <tt class="literal">Message</tt> &#20174;&#21015;&#34920;&#20013;&#21024;&#38500;&#24182;&#21516;&#26102;&#22312; <tt class="literal">EntityManager</tt> &#20013;&#35843;&#29992; <tt class="literal">remove()</tt> &#26041;&#27861;&#12290;&#22312;&#27492;&#35843;&#29992;&#30340;&#26368;&#21518;&#65292;Seam&#21047;&#26032; <tt class="literal">messageList</tt> &#19978;&#19979;&#25991;&#21464;&#37327;&#24182;&#28165;&#38500;&#21517;&#20026; <tt class="literal">message</tt> &#30340;&#19978;&#19979;&#25991;&#21464;&#37327;&#12290;
           &#25509;&#30528;&#65292;EJB&#23481;&#22120;&#25552;&#20132;&#20107;&#21153;&#65292;&#23558; <tt class="literal">Message</tt> &#20174;&#25968;&#25454;&#24211;&#20013;&#21024;&#38500;&#12290;&#26368;&#21518;,&#35813;&#32593;&#39029;&#37325;&#26032;&#28210;&#26579;&#65292;&#20877;&#27425;&#26174;&#31034;&#28040;&#24687;&#21015;&#34920;&#12290;
         </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="todo"></a>1.4.&nbsp;Seam&#21644;jBPM&#65306;&#24453;&#21150;&#20107;&#39033;&#21015;&#34920;&#65288;todo list&#65289;&#31034;&#20363;</h2></div></div><div></div></div><p>jBPM&#25552;&#20379;&#20102;&#20808;&#36827;&#30340;&#24037;&#20316;&#27969;&#31243;&#21644;&#20219;&#21153;&#31649;&#29702;&#30340;&#21151;&#33021;&#12290;&#20026;&#20102;&#20307;&#39564;&#19968;&#19979;jBPM&#26159;&#22914;&#20309;&#19982;Seam&#38598;&#25104;&#22312;&#19968;&#36215;&#24037;&#20316;&#30340;&#65292;&#22312;&#27492;&#23558;&#32473;&#20320;&#19968;&#20010;&#31616;&#21333;&#30340;&#31649;&#29702;&#8220;&#24453;&#21150;&#20107;&#39033;&#21015;&#34920;&#8221;&#30340;&#24212;&#29992;&#12290;&#30001;&#20110;&#31649;&#29702;&#20219;&#21153;&#21015;&#34920;&#31561;&#21151;&#33021;&#26159;jBPM&#30340;&#26680;&#24515;&#21151;&#33021;&#65292;&#25152;&#20197;&#22312;&#27492;&#20363;&#20013;&#21482;&#29992;&#20102;&#24456;&#23569;&#30340;Java&#20195;&#30721;&#12290;
    </p><div class="mediaobject" align="center"><img src="images/todo.png" align="middle"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1608"></a>1.4.1.&nbsp;&#29702;&#35299;&#20195;&#30721;</h3></div></div><div></div></div><p>&#36825;&#20010;&#20363;&#23376;&#30340;&#26680;&#24515;&#26159;jBPM&#30340;&#27969;&#31243;&#23450;&#20041;&#65288;process definition&#65289;&#12290;&#27492;&#22806;&#65292;&#36824;&#26377;&#20004;&#20010;JSP&#39029;&#38754;&#21644;&#20004;&#20010;&#31616;&#21333;&#30340;JavaBeans&#65288;&#30001;&#20110;&#20182;&#20204;&#19981;&#29992;&#35775;&#38382;&#25968;&#25454;&#24211;&#65292;&#25110;&#26377;&#20854;&#23427;&#20107;&#21153;&#30456;&#20851;&#30340;&#34892;&#20026;&#65292;&#22240;&#27492;&#24182;&#27809;&#26377;&#29992;&#20250;&#35805;Bean&#65289;&#12290;&#35753;&#25105;&#20204;&#20808;&#20174;&#27969;&#31243;&#23450;&#20041;&#24320;&#22987;&#65306;</p><div class="example"><a name="d0e1613"></a><p class="title"><b>Example&nbsp;1.13.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">&lt;process-definition name="todo"&gt;

   &lt;start-state name="start"&gt;                                                            <span class="co">(1)</span>
      &lt;transition to="todo"/&gt;
   &lt;/start-state&gt;

   &lt;task-node name="todo"&gt;                                                               <span class="co">(2)</span>
      &lt;task name="todo" description="#{todoList.description}"&gt;                           <span class="co">(3)</span>
         &lt;assignment actor-id="#{actor.id}"/&gt;                                            <span class="co">(4)</span>
      &lt;/task&gt;
      &lt;transition to="done"/&gt;
   &lt;/task-node&gt;

   &lt;end-state name="done"/&gt;                                                              <span class="co">(5)</span>

&lt;/process-definition&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>&#33410;&#28857; <tt class="literal">&lt;start-state&gt;</tt> &#20195;&#34920;&#27969;&#31243;&#30340;&#36923;&#36753;&#24320;&#22987;&#12290;&#19968;&#26086;&#27969;&#31243;&#24320;&#22987;&#26102;&#65292;&#23427;&#23601;&#31435;&#21363;&#36716;&#20837; <tt class="literal">todo</tt>&#33410;&#28857;&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
								<tt class="literal">&lt;task-node&gt;</tt> &#33410;&#28857;&#20195;&#34920; <span class="emphasis"><em>&#31561;&#24453;&#29366;&#24577;</em></span>&#65292;&#23601;&#26159;&#22312;&#25191;&#34892;&#19994;&#21153;&#27969;&#31243;&#26242;&#20572;&#26102;&#65292;&#31561;&#24453;&#19968;&#20010;&#25110;&#22810;&#20010;&#26410;&#23436;&#25104;&#30340;&#20219;&#21153;&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
								<tt class="literal">&lt;task&gt;</tt> &#20803;&#32032;&#23450;&#20041;&#20102;&#29992;&#25143;&#38656;&#35201;&#23436;&#25104;&#30340;&#20219;&#21153;&#12290;
							&#30001;&#20110;&#22312;&#36825;&#20010;&#33410;&#28857;&#21482;&#26377;&#23450;&#20041;&#20102;&#19968;&#20010;&#20219;&#21153;&#65292;&#24403;&#23427;&#23436;&#25104;&#65292;&#25110;&#24674;&#22797;&#25191;&#34892;&#26102;&#25105;&#20204;&#23601;&#36716;&#20837;&#32467;&#26463;&#29366;&#24577;&#12290;
							&#27492;&#20219;&#21153;&#20174;Seam&#20013;&#21517;&#20026; <tt class="literal">todolist</tt> &#30340;&#32452;&#20214;&#65288;JavaBeans&#20043;&#19968;&#65289;&#33719;&#24471;&#20219;&#21153;description&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>&#20219;&#21153;&#22312;&#21019;&#24314;&#26102;&#23601;&#20250;&#34987;&#20998;&#37197;&#32473;&#19968;&#20010;&#29992;&#25143;&#25110;&#19968;&#32452;&#29992;&#25143;&#26102;&#12290;&#22312;&#27492;&#31034;&#20363;&#20013;&#65292;&#20219;&#21153;&#26159;&#20998;&#37197;&#32473;&#24403;&#21069;&#29992;&#25143;&#65292;&#35813;&#29992;&#25143;&#20174;&#19968;&#20010;&#20869;&#32622;&#30340;&#21517;&#20026; <tt class="literal">actor</tt> &#30340;Seam&#32452;&#20214;&#20013;&#33719;&#24471;&#12290;&#20219;&#20309;Seam&#32452;&#20214;&#37117;&#21487;&#29992;&#26469;&#25191;&#34892;&#20219;&#21153;&#25351;&#27966;&#12290;
							</p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
								<tt class="literal">&lt;end-state&gt;</tt>&#33410;&#28857;&#23450;&#20041;&#19994;&#21153;&#27969;&#31243;&#30340;&#36923;&#36753;&#32467;&#26463;&#12290;&#24403;&#25191;&#34892;&#21040;&#36798;&#36825;&#20010;&#33410;&#28857;&#26102;&#65292;&#27969;&#31243;&#23454;&#20363;&#23601;&#35201;&#34987;&#38144;&#27585;&#12290;</p></td></tr></table></div></div></div><p>&#22914;&#26524;&#25105;&#20204;&#29992;jBossIDE&#25152;&#25552;&#20379;&#30340;&#27969;&#31243;&#23450;&#20041;&#32534;&#36753;&#22120;&#26469;&#26597;&#30475;&#27492;&#27969;&#31243;&#23450;&#20041;&#65292;&#37027;&#23427;&#23601;&#20250;&#26159;&#36825;&#26679;&#65306;</p><div class="mediaobject" align="center"><img src="images/todo-process.png" align="middle"></div><p>&#36825;&#20010;&#25991;&#26723;&#23558;&#25105;&#20204;&#30340; <span class="emphasis"><em>&#19994;&#21153;&#27969;&#31243;</em></span> &#23450;&#20041;&#25104;&#33410;&#28857;&#22270;&#12290;
&#36825;&#21487;&#33021;&#26159;&#26368;&#24120;&#35265;&#30340;&#19994;&#21153;&#27969;&#31243;&#65306;&#21482;&#26377;&#19968;&#20010; <span class="emphasis"><em>&#20219;&#21153;</em></span> &#34987;&#25191;&#34892;&#65292;&#24403;&#36825;&#39033;&#20219;&#21153;&#23436;&#25104;&#20043;&#21518;&#65292;&#19994;&#21153;&#27969;&#31243;&#23601;&#32467;&#26463;&#20102;&#12290;</p><p>&#31532;&#19968;&#20010;JavaBean&#22788;&#29702;&#30331;&#20837;&#30028;&#38754; <tt class="literal">login.jsp</tt>&#12290;
        &#23427;&#30340;&#24037;&#20316;&#23601;&#26159;&#29992; <tt class="literal">actor</tt> &#32452;&#20214;&#21021;&#22987;&#21270;jBPM&#29992;&#25143;id&#65288;&#22312;&#23454;&#38469;&#30340;&#24212;&#29992;&#20013;&#65292;&#23427;&#20063;&#38656;&#35201;&#39564;&#35777;&#29992;&#25143;&#12290;&#65289;</p><div class="example"><a name="d0e1686"></a><p class="title"><b>Example&nbsp;1.14.&nbsp;</b></p><pre class="programlisting">@Name("login")
public class Login {

   @In
   private Actor actor;

   private String user;

   public String getUser() {
      return user;
   }

   public void setUser(String user) {
      this.user = user;
   }

   public String login()
   {
      actor.setId(user);
      return "/todo.jsp";
   }
}</pre></div><p>&#22312;&#27492;&#25105;&#20204;&#20351;&#29992;&#20102; <tt class="literal">@In</tt> &#26469;&#23558;actor&#23646;&#24615;&#20540;&#27880;&#20837;&#21040;Seam&#20869;&#32622;&#30340; <tt class="literal">Actor</tt> &#32452;&#20214;&#12290;</p><p>JSP&#39029;&#38754;&#26412;&#36523;&#24182;&#27809;&#26377;&#20160;&#20040;&#29305;&#21035;&#20043;&#22788;&#65306;</p><div class="example"><a name="d0e1699"></a><p class="title"><b>Example&nbsp;1.15.&nbsp;</b></p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Login&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Login&lt;/h1&gt;
&lt;f:view&gt;
    &lt;h:form&gt;
      &lt;div&gt;
        &lt;h:inputText value="#{login.user}"/&gt;
        &lt;h:commandButton value="Login" action="#{login.login}"/&gt;
      &lt;/div&gt;
    &lt;/h:form&gt;
&lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>&#31532;&#20108;&#20010;JavaBean&#36127;&#36131;&#21551;&#21160;&#19994;&#21153;&#27969;&#31243;&#23454;&#20363;&#21450;&#32467;&#26463;&#20219;&#21153;&#12290;</p><div class="example"><a name="d0e1704"></a><p class="title"><b>Example&nbsp;1.16.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Name("todoList")
public class TodoList {

   private String description;

   public String getDescription()                                                        <span class="co">(1)</span>
   {
      return description;
   }

   public void setDescription(String description) {
      this.description = description;
   }

   @CreateProcess(definition="todo")                                                     <span class="co">(2)</span>
   public void createTodo() {}

   @StartTask @EndTask                                                                   <span class="co">(3)</span>
   public void done() {}

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>description&#23646;&#24615;&#20174;JSP&#39029;&#25509;&#21463;&#29992;&#25143;&#36755;&#20837;&#65292;&#24182;&#23558;&#23427;&#26292;&#38706;&#32473;&#27969;&#31243;&#23450;&#20041;&#65292;&#36825;&#26679;&#23601;&#21487;&#35753;Seam&#26469;&#35774;&#23450;&#20219;&#21153;&#30340;descrption&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>Seam&#30340; <tt class="literal">@CreateProcess</tt> &#27880;&#35299;&#20026;&#25351;&#23450;&#21517;&#31216;&#30340;&#27969;&#31243;&#23450;&#20041;&#21019;&#24314;&#20102;&#19968;&#20010;&#26032;&#30340;jBPM&#27969;&#31243;&#23454;&#20363;&#12290;</p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>Seam&#30340; <tt class="literal">@StartTask</tt> &#27880;&#35299;&#29992;&#26469;&#21551;&#21160;&#20219;&#21153;&#65292;<tt class="literal">@EndTask</tt> &#29992;&#26469;&#32467;&#26463;&#20219;&#21153;&#65292;&#24182;&#20801;&#35768;&#24674;&#22797;&#25191;&#34892;&#19994;&#21153;&#27969;&#31243;&#12290;
                    </p></td></tr></table></div></div></div><p>&#22312;&#23454;&#38469;&#30340;&#24212;&#29992;&#20013;&#65292;<tt class="literal">@StartTask</tt> &#21450; <tt class="literal">@EndTask</tt> &#19981;&#20250;&#20986;&#29616;&#22312;&#21516;&#19968;&#20010;&#26041;&#27861;&#20013;&#65292;&#22240;&#20026;&#20026;&#20102;&#23436;&#25104;&#20219;&#21153;&#65292;&#36890;&#24120;&#29992;&#24212;&#29992;&#20013;&#26377;&#35768;&#22810;&#24037;&#20316;&#35201;&#20570;&#12290;</p><p>&#26368;&#21518;&#65292;&#35813;&#24212;&#29992;&#30340;&#20027;&#35201;&#20869;&#23481;&#22312; <tt class="literal">todo.jsp</tt> &#20013;&#65306;</p><div class="example"><a name="d0e1744"></a><p class="title"><b>Example&nbsp;1.17.&nbsp;</b></p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %&gt;
&lt;%@ taglib uri="http://jboss.com/products/seam/taglib" prefix="s" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Todo List&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Todo List&lt;/h1&gt;
&lt;f:view&gt;
   &lt;h:form id="list"&gt;
      &lt;div&gt;
         &lt;h:outputText value="There are no todo items." rendered="#{empty taskInstanceList}"/&gt;
         &lt;h:dataTable value="#{taskInstanceList}" var="task" rendered="#{not empty taskInstanceList}"&gt;
            &lt;h:column&gt;
                &lt;f:facet name="header"&gt;
                    &lt;h:outputText value="Description"/&gt;
                &lt;/f:facet&gt;
                &lt;h:inputText value="#{task.description}"/&gt;
            &lt;/h:column&gt;
            &lt;h:column&gt;
                &lt;f:facet name="header"&gt;
                    &lt;h:outputText value="Created"/&gt;
                &lt;/f:facet&gt;
                &lt;h:outputText value="#{task.taskMgmtInstance.processInstance.start}"&gt;
                    &lt;f:convertDateTime type="date"/&gt;
                &lt;/h:outputText&gt;
            &lt;/h:column&gt;
            &lt;h:column&gt;
                &lt;f:facet name="header"&gt;
                    &lt;h:outputText value="Priority"/&gt;
                &lt;/f:facet&gt;
                &lt;h:inputText value="#{task.priority}" style="width: 30"/&gt;
            &lt;/h:column&gt;
            &lt;h:column&gt;
                &lt;f:facet name="header"&gt;
                    &lt;h:outputText value="Due Date"/&gt;
                &lt;/f:facet&gt;
                &lt;h:inputText value="#{task.dueDate}" style="width: 100"&gt;
                    &lt;f:convertDateTime type="date" dateStyle="short"/&gt;
                &lt;/h:inputText&gt;
            &lt;/h:column&gt;
            &lt;h:column&gt;
                &lt;s:button value="Done" action="#{todoList.done}" taskInstance="#{task}"/&gt;
            &lt;/h:column&gt;
         &lt;/h:dataTable&gt;
      &lt;/div&gt;
      &lt;div&gt;
      &lt;h:messages/&gt;
      &lt;/div&gt;
      &lt;div&gt;
         &lt;h:commandButton value="Update Items" action="update"/&gt;
      &lt;/div&gt;
   &lt;/h:form&gt;
   &lt;h:form id="new"&gt;
      &lt;div&gt;
         &lt;h:inputText value="#{todoList.description}"/&gt;
         &lt;h:commandButton value="Create New Item" action="#{todoList.createTodo}"/&gt;
      &lt;/div&gt;
   &lt;/h:form&gt;
&lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>&#35753;&#25105;&#20204;&#23545;&#27492;&#36880;&#19968;&#21152;&#20197;&#35828;&#26126;&#12290;</p><p>&#35813;JSP&#39029;&#38754;&#23558;&#20174;Seam&#20869;&#32622;&#32452;&#20214; <tt class="literal">taskInstanceList</tt> &#33719;&#24471;&#30340;&#20219;&#21153;&#28210;&#26579;&#25104;&#20219;&#21153;&#21015;&#34920;&#65292;&#27492;&#21015;&#34920;&#22312;JSF&#34920;&#21333;&#20869;&#34987;&#23450;&#20041;&#12290;</p><pre class="programlisting">&lt;h:form id="list"&gt;
   &lt;div&gt;
      &lt;h:outputText value="There are no todo items." rendered="#{empty taskInstanceList}"/&gt;
      &lt;h:dataTable value="#{taskInstanceList}" var="task" rendered="#{not empty taskInstanceList}"&gt;
         ...
      &lt;/h:dataTable&gt;
   &lt;/div&gt;
&lt;/h:form&gt;</pre><p>&#21015;&#34920;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#23601;&#26159;&#19968;&#20010;jBPM&#31867; <tt class="literal">taskinstance</tt> &#30340;&#23454;&#20363;&#12290;
			&#20197;&#19979;&#20195;&#30721;&#31616;&#21333;&#22320;&#23637;&#31034;&#20102;&#21015;&#34920;&#20013;&#27599;&#19968;&#20219;&#21153;&#30340;&#26377;&#36259;&#29305;&#24615;&#12290;&#20026;&#20102;&#35753;&#29992;&#25143;&#33021;&#26356;&#25913;description&#12289;priority&#21450;due date&#30340;&#20540;&#65292;&#25105;&#20204;&#20351;&#29992;&#20102;&#36755;&#20837;&#25511;&#20214;&#12290;
			</p><pre class="programlisting">&lt;h:column&gt;
    &lt;f:facet name="header"&gt;
       &lt;h:outputText value="Description"/&gt;
    &lt;/f:facet&gt;
    &lt;h:inputText value="#{task.description}"/&gt;
&lt;/h:column&gt;
&lt;h:column&gt;
    &lt;f:facet name="header"&gt;
        &lt;h:outputText value="Created"/&gt;
    &lt;/f:facet&gt;
    &lt;h:outputText value="#{task.taskMgmtInstance.processInstance.start}"&gt;
        &lt;f:convertDateTime type="date"/&gt;
    &lt;/h:outputText&gt;
&lt;/h:column&gt;
&lt;h:column&gt;
    &lt;f:facet name="header"&gt;
        &lt;h:outputText value="Priority"/&gt;
    &lt;/f:facet&gt;
    &lt;h:inputText value="#{task.priority}" style="width: 30"/&gt;
&lt;/h:column&gt;
&lt;h:column&gt;
    &lt;f:facet name="header"&gt;
        &lt;h:outputText value="Due Date"/&gt;
    &lt;/f:facet&gt;
    &lt;h:inputText value="#{task.dueDate}" style="width: 100"&gt;
        &lt;f:convertDateTime type="date" dateStyle="short"/&gt;
    &lt;/h:inputText&gt;
&lt;/h:column&gt;</pre><p>&#35813;&#25353;&#38062;&#36890;&#36807;&#35843;&#29992;&#34987;&#27880;&#35299;&#20026; <tt class="literal">@StartTask @EndTask</tt> &#30340;&#21160;&#20316;&#26041;&#27861;&#26469;&#32467;&#26463;&#20219;&#21153;&#12290;&#23427;&#25226;&#20219;&#21153;id&#20316;&#20026;&#35831;&#27714;&#21442;&#25968;&#20256;&#32473;Seam&#65306;</p><pre class="programlisting">&lt;h:column&gt;
    &lt;s:button value="Done" action="#{todoList.done}" taskInstance="#{task}"/&gt;
&lt;/h:column&gt;</pre><p>&#65288;&#35831;&#27880;&#24847;&#65292;&#36825;&#26159;&#22312;&#20351;&#29992;Seam <tt class="literal">seam-ui.jar</tt> &#21253;&#20013;&#30340;JSF <tt class="literal">&lt;s:button&gt;</tt> &#25511;&#20214;&#12290;&#65289;</p><p>&#36825;&#20010;&#25353;&#38062;&#26159;&#29992;&#26469;&#26356;&#26032;&#20219;&#21153;&#23646;&#24615;&#12290;&#24403;&#25552;&#20132;&#34920;&#21333;&#26102;&#65292;Seam&#21644;jBPM&#23558;&#30452;&#25509;&#26356;&#25913;&#20219;&#21153;&#30340;&#25345;&#20037;&#21270;&#65292;&#19981;&#38656;&#35201;&#20219;&#20309;&#30340;&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#65306;</p><pre class="programlisting">&lt;h:commandButton value="Update Items" action="update"/&gt;</pre><p>&#31532;&#20108;&#20010;&#34920;&#21333;&#36890;&#36807;&#35843;&#29992;&#27880;&#35299;&#20026; <tt class="literal">@CreateProcess</tt>&#30340;&#21160;&#20316;&#26041;&#27861;&#26469;&#21019;&#24314;&#26032;&#30340;&#39033;&#30446;&#65288;item&#65289;&#12290; </p><pre class="programlisting">&lt;h:form id="new"&gt;
    &lt;div&gt;
        &lt;h:inputText value="#{todoList.description}"/&gt;
        &lt;h:commandButton value="Create New Item" action="#{todoList.createTodo}"/&gt;
    &lt;/div&gt;
&lt;/h:form&gt;</pre><p>&#36825;&#20010;&#20363;&#23376;&#36824;&#38656;&#35201;&#21478;&#22806;&#20960;&#20010;&#25991;&#20214;&#65292;&#20294;&#23427;&#20204;&#21482;&#26159;&#26631;&#20934;&#30340;jBPM&#21644;Seam&#37197;&#32622;&#24182;&#19981;&#26159;&#24456;&#26377;&#36259;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1791"></a>1.4.2.&nbsp;&#24037;&#20316;&#21407;&#29702;</h3></div></div><div></div></div><p>&#24453;&#23436;&#25104;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="numberguess"></a>1.5.&nbsp;Seam&#39029;&#38754;&#27969;&#65306;&#29468;&#25968;&#23383;&#33539;&#20363;</h2></div></div><div></div></div><p>
          &#23545;&#26377;&#30456;&#23545;&#33258;&#30001;&#65288;&#29305;&#21035;&#65289;&#23548;&#33322;&#30340;Seam&#24212;&#29992;&#31243;&#24207;&#32780;&#35328;&#65292;JSF/Seam&#23548;&#33322;&#35268;&#21017;&#26159;&#23450;&#20041;&#39029;&#38754;&#27969;&#30340;&#19968;&#20010;&#23436;&#32654;&#30340;&#26041;&#27861;&#12290;
          &#32780;&#23545;&#20110;&#37027;&#20123;&#24102;&#26377;&#26356;&#22810;&#32422;&#26463;&#30340;&#23548;&#33322;&#65292;&#29305;&#21035;&#26159;&#24102;&#29366;&#24577;&#30340;&#29992;&#25143;&#30028;&#38754;&#32780;&#35328;&#65292;&#23548;&#33322;&#35268;&#21017;&#21453;&#32780;&#20351;&#24471;&#31995;&#32479;&#27969;&#31243;&#21464;&#24471;&#38590;&#20197;&#29702;&#35299;&#12290;
          &#35201;&#29702;&#35299;&#25972;&#20010;&#27969;&#31243;&#65292;&#20320;&#38656;&#35201;&#20174;&#35270;&#22270;&#39029;&#38754;&#12289;&#21160;&#20316;&#21644;&#23548;&#33322;&#35268;&#21017;&#37324;&#19968;&#28857;&#28857;&#25226;&#23427;&#25340;&#20986;&#26469;&#12290;
      </p><p>
          Seam&#20801;&#35768;&#20320;&#20351;&#29992;&#19968;&#20010;jPDL&#27969;&#31243;&#23450;&#20041;&#26469;&#23450;&#20041;&#39029;&#38754;&#27969;&#12290;&#19979;&#38754;&#36825;&#20010;&#31616;&#21333;&#30340;&#29468;&#25968;&#23383;&#33539;&#20363;&#23558;&#28436;&#31034;&#36825;&#19968;&#20999;&#26159;&#22914;&#20309;&#23454;&#29616;&#30340;&#12290;
      </p><div class="mediaobject" align="center"><img src="images/numberguess.png" align="middle"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1808"></a>1.5.1.&nbsp;&#29702;&#35299;&#20195;&#30721;</h3></div></div><div></div></div><p>
              &#36825;&#20010;&#20363;&#23376;&#30001;&#19968;&#20010;JavaBean&#12289;&#19977;&#20010;JSP&#39029;&#38754;&#21644;&#19968;&#20010;jPDL&#39029;&#38754;&#27969;&#23450;&#20041;&#32452;&#25104;&#12290;&#35753;&#25105;&#20204;&#20174;&#39029;&#38754;&#27969;&#24320;&#22987;&#65306;
          </p><div class="example"><a name="d0e1813"></a><p class="title"><b>Example&nbsp;1.18.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">&lt;pageflow-definition name="numberGuess"&gt;

   &lt;start-page name="displayGuess" view-id="/numberGuess.jsp"&gt;
      &lt;redirect/&gt;
      &lt;transition name="guess" to="evaluateGuess"&gt;
          &lt;action expression="#{numberGuess.guess}" /&gt;
      &lt;/transition&gt;                                                                      <span class="co">(1)</span>
   &lt;/start-page&gt;                                                                         <span class="co">(2)</span>
                                                                                         <span class="co">(3)</span>
   &lt;decision name="evaluateGuess" expression="#{numberGuess.correctGuess}"&gt;
      &lt;transition name="true" to="win"/&gt;
      &lt;transition name="false" to="evaluateRemainingGuesses"/&gt;
   &lt;/decision&gt;                                                                           <span class="co">(4)</span>

   &lt;decision name="evaluateRemainingGuesses" expression="#{numberGuess.lastGuess}"&gt;
      &lt;transition name="true" to="lose"/&gt;
      &lt;transition name="false" to="displayGuess"/&gt;
   &lt;/decision&gt;

   &lt;page name="win" view-id="/win.jsp"&gt;
      &lt;redirect/&gt;
      &lt;end-conversation /&gt;
   &lt;/page&gt;

   &lt;page name="lose" view-id="/lose.jsp"&gt;
      &lt;redirect/&gt;
      &lt;end-conversation /&gt;
   &lt;/page&gt;

&lt;/pageflow-definition&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
								<tt class="literal">&lt;page&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#20102;&#19968;&#20010;&#31561;&#24453;&#29366;&#24577;&#65292;&#22312;&#35813;&#29366;&#24577;&#20013;&#31995;&#32479;&#26174;&#31034;&#19968;&#20010;JSF&#35270;&#22270;&#31561;&#24453;&#29992;&#25143;&#36755;&#20837;&#12290;
                        <tt class="literal">view-id</tt>&#19982;&#31616;&#21333;JSF&#23548;&#33322;&#35268;&#21017;&#20013;&#30340;view id&#19968;&#26679;&#12290;
                        <tt class="literal">redirect</tt>&#23646;&#24615;&#21578;&#35785;Seam&#22312;&#23548;&#33322;&#21040;&#39029;&#38754;&#26102;&#20351;&#29992;post-then-redirect&#12290;(&#36825;&#20250;&#24102;&#26469;&#21451;&#22909;&#30340;&#27983;&#35272;&#22120;URL&#12290;)
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
								<tt class="literal">&lt;transition&gt;</tt> &#20803;&#32032;&#21629;&#21517;&#20102;&#19968;&#20010;JSF&#36755;&#20986;&#12290;&#24403;&#19968;&#20010;JSF&#21160;&#20316;&#23548;&#33268;&#37027;&#20010;&#36755;&#20986;&#26102;&#20250;&#35302;&#21457;&#36716;&#25442;&#12290;
                        &#22312;&#20219;&#20309;jBPM&#36716;&#25442;&#21160;&#20316;&#35843;&#29992;&#21518;&#65292;&#25191;&#34892;&#20250;&#36827;&#34892;&#21040;&#39029;&#38754;&#27969;&#31243;&#22270;&#30340;&#19979;&#19968;&#20010;&#33410;&#28857;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                        &#19968;&#20010;&#36716;&#25442;&#21160;&#20316; <tt class="literal">&lt;action&gt;</tt> &#23601;&#20687;JSF&#21160;&#20316;&#65292;&#19981;&#21516;&#30340;&#23601;&#26159;&#23427;&#21482;&#21457;&#29983;&#22312;&#19968;&#20010;jBPM&#36716;&#25442;&#21457;&#29983;&#26102;&#12290;
                        &#36716;&#25442;&#21160;&#20316;&#33021;&#35843;&#29992;&#20219;&#20309;Seam&#32452;&#20214;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
								<tt class="literal">&lt;decision&gt;</tt> &#33410;&#28857;&#29992;&#26469;&#21010;&#20998;&#39029;&#38754;&#27969;&#65292;&#36890;&#36807;&#35745;&#31639;JSF EL&#34920;&#36798;&#24335;&#20915;&#23450;&#35201;&#25191;&#34892;&#30340;&#19979;&#19968;&#20010;&#33410;&#28857;&#12290;
                    </p></td></tr></table></div></div></div><p>
              &#36825;&#20010;&#39029;&#38754;&#27969;&#22312;JBossIDE&#39029;&#38754;&#27969;&#32534;&#36753;&#22120;&#37324;&#30475;&#19978;&#21435;&#26159;&#36825;&#20010;&#26679;&#23376;&#30340;&#65306;
          </p><div class="mediaobject" align="center"><img src="images/numberguess-pageflow.png" align="middle"></div><p>
              &#30475;&#36807;&#20102;&#39029;&#38754;&#27969;&#65292;&#29616;&#22312;&#20877;&#26469;&#29702;&#35299;&#21097;&#19979;&#30340;&#31243;&#24207;&#23601;&#21464;&#24471;&#21313;&#20998;&#31616;&#21333;&#20102;!
          </p><p>
              &#36825;&#26159;&#24212;&#29992;&#31243;&#24207;&#30340;&#20027;&#39029;&#38754;<tt class="literal">numberGuess.jspx</tt>&#65306;
          </p><div class="example"><a name="d0e1867"></a><p class="title"><b>Example&nbsp;1.19.&nbsp;</b></p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Guess a number...&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Guess a number...&lt;/h1&gt;
&lt;f:view&gt;
    &lt;h:form&gt;
        &lt;h:outputText value="Higher!" rendered="#{numberGuess.randomNumber&gt;numberGuess.currentGuess}" /&gt;
        &lt;h:outputText value="Lower!" rendered="#{numberGuess.randomNumber&lt;numberGuess.currentGuess}" /&gt;
        &lt;br /&gt;
        I'm thinking of a number between &lt;h:outputText value="#{numberGuess.smallest}" /&gt; and
        &lt;h:outputText value="#{numberGuess.biggest}" /&gt;. You have
        &lt;h:outputText value="#{numberGuess.remainingGuesses}" /&gt; guesses.
        &lt;br /&gt;
        Your guess:
        &lt;h:inputText value="#{numberGuess.currentGuess}" id="guess" required="true"&gt;
            &lt;f:validateLongRange
                maximum="#{numberGuess.biggest}"
                minimum="#{numberGuess.smallest}"/&gt;
        &lt;/h:inputText&gt;
        &lt;h:commandButton type="submit" value="Guess" action="guess" /&gt;
        &lt;br/&gt;
        &lt;h:message for="guess" style="color: red"/&gt;
    &lt;/h:form&gt;
&lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>
              &#35831;&#27880;&#24847;&#21517;&#20026; <tt class="literal">guess</tt> &#30340;&#21629;&#20196;&#25353;&#38062;&#26159;&#22914;&#20309;&#36827;&#34892;&#36716;&#25442;&#32780;&#19981;&#26159;&#30452;&#25509;&#35843;&#29992;&#19968;&#20010;&#21160;&#20316;&#30340;&#12290;
          </p><p>
				<tt class="literal">win.jspx</tt> &#39029;&#38754;&#30340;&#20869;&#23481;&#26159;&#21487;&#24819;&#32780;&#30693;&#30340;&#65306;
          </p><div class="example"><a name="d0e1880"></a><p class="title"><b>Example&nbsp;1.20.&nbsp;</b></p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;You won!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;You won!&lt;/h1&gt;
&lt;f:view&gt;
    Yes, the answer was &lt;h:outputText value="#{numberGuess.currentGuess}" /&gt;.
    It took you &lt;h:outputText value="#{numberGuess.guessCount}" /&gt; guesses.
    Would you like to &lt;a href="numberGuess.seam"&gt;play again&lt;/a&gt;?
  &lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>
				<tt class="literal">lose.jsp</tt> &#20063;&#24046;&#19981;&#22810;&#65288;&#25105;&#23601;&#19981;&#37325;&#22797;&#22797;&#21046;/&#31896;&#36148;&#20102;&#65289;&#12290;&#26368;&#21518;&#65292;JavaBean Seam&#32452;&#20214;&#26159;&#36825;&#26679;&#30340;&#65306;
          </p><div class="example"><a name="d0e1888"></a><p class="title"><b>Example&nbsp;1.21.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Name("numberGuess")
@Scope(ScopeType.CONVERSATION)
public class NumberGuess {

   private int randomNumber;
   private Integer currentGuess;
   private int biggest;
   private int smallest;
   private int guessCount;
   private int maxGuesses;

   @Create                                                                               <span class="co">(1)</span>
   @Begin(pageflow="numberGuess")                                                        <span class="co">(2)</span>
   public void begin()
   {
      randomNumber = new Random().nextInt(100);
      guessCount = 0;
      biggest = 100;
      smallest = 1;
   }

   public void setCurrentGuess(Integer guess)
   {
      this.currentGuess = guess;
   }

   public Integer getCurrentGuess()
   {
      return currentGuess;
   }

   public void guess()
   {
      if (currentGuess&gt;randomNumber)
      {
         biggest = currentGuess - 1;
      }
      if (currentGuess&lt;randomNumber)
      {
         smallest = currentGuess + 1;
      }
      guessCount ++;
   }

   public boolean isCorrectGuess()
   {
      return currentGuess==randomNumber;
   }

   public int getBiggest()
   {
      return biggest;
   }

   public int getSmallest()
   {
      return smallest;
   }

   public int getGuessCount()
   {
      return guessCount;
   }

   public boolean isLastGuess()
   {
      return guessCount==maxGuesses;
   }

   public int getRemainingGuesses() {
      return maxGuesses-guessCount;
   }

   public void setMaxGuesses(int maxGuesses) {
      this.maxGuesses = maxGuesses;
   }

   public int getMaxGuesses() {
      return maxGuesses;
   }

   public int getRandomNumber() {
      return randomNumber;
   }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                        &#19968;&#24320;&#22987;&#65292;JSP&#39029;&#38754;&#35831;&#27714;&#19968;&#20010; <tt class="literal">numberGuess</tt> &#32452;&#20214;&#65292;Seam&#20250;&#20026;&#35813;&#32452;&#20214;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#23454;&#20363;&#65292;&#24182;&#35843;&#29992; <tt class="literal">@Create</tt> &#26041;&#27861;&#65292;&#20801;&#35768;&#32452;&#20214;&#21021;&#22987;&#21270;&#33258;&#24049;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
							<tt class="literal">@Begin</tt> &#27880;&#35299;&#21551;&#21160;&#20102;&#19968;&#20010;Seam <span class="emphasis"><em>&#19994;&#21153;&#20250;&#35805;(conversation)</em></span> &#65288;&#31245;&#21518;&#35814;&#32454;&#35828;&#26126;&#65289;&#65292;&#24182;&#25351;&#23450;&#19994;&#21153;&#20250;&#35805;&#39029;&#38754;&#27969;&#25152;&#35201;&#20351;&#29992;&#30340;&#39029;&#38754;&#27969;&#23450;&#20041;&#12290;
							</p></td></tr></table></div></div></div><p>
              &#22914;&#20320;&#25152;&#35265;&#65292;&#36825;&#20010;Seam&#32452;&#20214;&#26159;&#32431;&#19994;&#21153;&#36923;&#36753;&#30340;&#65281;&#23427;&#19981;&#38656;&#35201;&#30693;&#36947;&#20219;&#20309;&#20851;&#20110;&#29992;&#25143;&#20132;&#20114;&#30340;&#19996;&#35199;&#12290;&#36825;&#28857;&#20351;&#24471;&#32452;&#20214;&#26356;&#26131;&#34987;&#22797;&#29992;&#12290;
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1916"></a>1.5.2.&nbsp;&#24037;&#20316;&#21407;&#29702;</h3></div></div><div></div></div><p>TODO</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="booking"></a>1.6.&nbsp;&#19968;&#20010;&#23436;&#25972;&#30340;Seam&#24212;&#29992;&#31243;&#24207;&#65306;&#23486;&#39302;&#39044;&#35746;&#33539;&#20363;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1924"></a>1.6.1.&nbsp;&#20171;&#32461;</h3></div></div><div></div></div><p>&#35813;&#31995;&#32479;&#26159;&#19968;&#20010;&#23436;&#25972;&#30340;&#23486;&#39302;&#23458;&#25151;&#39044;&#35746;&#31995;&#32479;&#65292;&#23427;&#30001;&#19979;&#21015;&#21151;&#33021;&#32452;&#25104;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#29992;&#25143;&#27880;&#20876;</p></li><li><p>&#30331;&#24405;</p></li><li><p>&#27880;&#38144;</p></li><li><p>&#35774;&#32622;&#23494;&#30721;</p></li><li><p>&#25628;&#32034;&#23486;&#39302;</p></li><li><p>&#36873;&#25321;&#23486;&#39302;</p></li><li><p>&#23458;&#25151;&#39044;&#35746;</p></li><li><p>&#39044;&#35746;&#30830;&#35748;</p></li><li><p>&#24403;&#21069;&#39044;&#35746;&#21015;&#34920;</p></li></ul></div><div class="screenshot"><div class="mediaobject" align="center"><img src="images/booking.png" align="middle"></div></div><p>&#24212;&#29992;&#31243;&#24207;&#20013;&#20351;&#29992;&#20102;JSF&#12289;EJB 3.0&#21644;Seam&#65292;&#35270;&#22270;&#37096;&#20998;&#32467;&#21512;&#20102;Facelets&#12290;&#20063;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992;JSF&#12289;Facelets&#12289;Seam&#12289;JavaBeans&#21644;Hibernate3&#12290;</p><p>
          &#22312;&#20351;&#29992;&#36807;&#19968;&#27573;&#26102;&#38388;&#21518;&#20320;&#20250;&#21457;&#29616;&#35813;&#24212;&#29992;&#31243;&#24207;&#38750;&#24120; <span class="emphasis"><em>&#20581;&#22766;</em></span>&#12290;&#20320;&#33021;&#20351;&#29992;&#22238;&#36864;&#25353;&#38062;&#12289;&#21047;&#26032;&#27983;&#35272;&#22120;&#12289;&#25171;&#24320;&#22810;&#20010;&#31383;&#21475;&#65292;
          &#25110;&#32773;&#38190;&#20837;&#21508;&#31181;&#26080;&#24847;&#20041;&#30340;&#25968;&#25454;&#65292;&#20250;&#21457;&#29616;&#37117;&#24456;&#38590;&#35753;&#23427;&#23849;&#28291;&#12290;&#20320;&#20063;&#35768;&#20250;&#24819;&#25105;&#20204;&#33457;&#20102;&#20960;&#20010;&#26143;&#26399;&#27979;&#35797;&#20462;&#22797;&#35813;&#31995;&#32479;&#25165;&#36798;&#21040;&#20102;&#36825;&#20010;&#30446;&#26631;&#12290;
          &#20107;&#23454;&#21364;&#19981;&#26159;&#36825;&#26679;&#30340;&#65292;Seam&#30340;&#35774;&#35745;&#20351;&#20320;&#33021;&#22815;&#29992;&#23427;&#26041;&#20415;&#22320;&#26500;&#24314;&#20581;&#22766;&#30340;web&#24212;&#29992;&#31243;&#24207;&#65292;&#32780;&#19988;Seam&#36824;&#25552;&#20379;&#20102;&#24456;&#22810;&#20197;&#21069;&#38656;&#35201;&#36890;&#36807;&#32534;&#30721;&#25165;&#33021;&#23454;&#29616;&#30340;&#20581;&#22766;&#24615;&#12290;
      </p><p>
          &#22312;&#20320;&#27983;&#35272;&#33539;&#20363;&#31243;&#24207;&#20195;&#30721;&#30740;&#31350;&#23427;&#26159;&#22914;&#20309;&#36816;&#34892;&#26102;&#65292;&#27880;&#24847;&#35266;&#23519;&#22768;&#26126;&#24335;&#30340;&#29366;&#24577;&#31649;&#29702;&#21644;&#38598;&#25104;&#30340;&#39564;&#35777;&#26159;&#22914;&#20309;&#34987;&#29992;&#26469;&#23454;&#29616;&#36825;&#31181;&#20581;&#22766;&#24615;&#30340;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1974"></a>1.6.2.&nbsp;&#39044;&#35746;&#31995;&#32479;&#27010;&#20917;</h3></div></div><div></div></div><p>
          &#36825;&#20010;&#39033;&#30446;&#30340;&#32467;&#26500;&#21644;&#19978;&#19968;&#20010;&#19968;&#26679;&#65292;&#35201;&#23433;&#35013;&#37096;&#32626;&#35813;&#24212;&#29992;&#31243;&#24207;&#35831;&#21442;&#32771;<a href="tutorial.html#try-examples" title="1.1.&nbsp;&#35797;&#35797;&#30475;">Section&nbsp;1.1, &#8220;&#35797;&#35797;&#30475;&#8221;</a>&#12290;
          &#24403;&#24212;&#29992;&#31243;&#24207;&#21551;&#21160;&#21518;&#65292;&#21487;&#20197;&#36890;&#36807; <a href="http://localhost:8080/seam-booking/" target="_top"><tt class="literal">http://localhost:8080/seam-booking/</tt></a> &#36827;&#34892;&#35775;&#38382;&#12290;
      </p><p>
          &#21482;&#38656;&#35201;&#29992;9&#20010;&#31867;&#65288;&#21152;&#19978;6&#20010;Session Bean&#30340;&#26412;&#22320;&#25509;&#21475;&#65289;&#23601;&#33021;&#23454;&#29616;&#36825;&#20010;&#24212;&#29992;&#31243;&#24207;&#12290;6&#20010;Session Bean&#21160;&#20316;&#30417;&#21548;&#22120;&#21253;&#25324;&#20102;&#20197;&#19979;&#21151;&#33021;&#30340;&#25152;&#26377;&#19994;&#21153;&#36923;&#36753;&#12290;
      </p><div class="itemizedlist"><ul type="disc"><li><tt class="literal">BookingListAction</tt> &#33719;&#24471;&#24403;&#21069;&#30331;&#24405;&#29992;&#25143;&#30340;&#39044;&#35746;&#21015;&#34920;&#12290;
          </li><li><tt class="literal">ChangePasswordAction</tt> &#20462;&#25913;&#24403;&#21069;&#29992;&#25143;&#30340;&#23494;&#30721;&#12290;
          </li><li><tt class="literal">HotelBookingAction</tt> &#23454;&#29616;&#20102;&#24212;&#29992;&#31243;&#24207;&#30340;&#26680;&#24515;&#21151;&#33021;&#65306;&#23486;&#39302;&#23458;&#25151;&#25628;&#32034;&#12289;&#36873;&#25321;&#12289;&#39044;&#35746;&#21644;&#39044;&#35746;&#30830;&#35748;&#12290;
              &#36825;&#21151;&#33021;&#26159;&#20197; <span class="emphasis"><em>&#19994;&#21153;&#23545;&#35805;&#65288;conversation&#65289;</em></span> &#24418;&#24335;&#23454;&#29616;&#30340;&#65292;&#25152;&#20197;&#23427;&#26159;&#25972;&#20010;&#31243;&#24207;&#20013;&#26368;&#26377;&#24847;&#24605;&#30340;&#19968;&#20010;&#31867;&#12290;
          </li><li><tt class="literal">RegisterAction</tt> &#27880;&#20876;&#19968;&#20010;&#26032;&#29992;&#25143;&#12290;
          </li></ul></div><p>&#24212;&#29992;&#31243;&#24207;&#30340;&#25345;&#20037;&#21270;&#27169;&#22411;&#30001;&#19977;&#20010;&#23454;&#20307;bean&#23454;&#29616;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><tt class="literal">Hotel</tt> &#26159;&#34920;&#31034;&#19968;&#20010;&#23486;&#39302;&#30340;&#23454;&#20307;Bean
          </li><li><tt class="literal">Booking</tt> &#26159;&#34920;&#31034;&#19968;&#20010;&#39044;&#35746;&#30340;&#23454;&#20307;Bean
          </li><li><tt class="literal">User</tt> &#26159;&#34920;&#31034;&#19968;&#20010;&#33021;&#22815;&#36827;&#34892;&#23486;&#39302;&#39044;&#35746;&#30340;&#29992;&#25143;&#30340;&#23454;&#20307;Bean
          </li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2022"></a>1.6.3.&nbsp;&#29702;&#35299;Seam&#19994;&#21153;&#23545;&#35805;(Conversation)</h3></div></div><div></div></div><p>
            &#25105;&#20204;&#40723;&#21169;&#24744;&#38543;&#24847;&#27983;&#35272;&#28304;&#20195;&#30721;&#12290;&#22312;&#36825;&#20010;&#25945;&#31243;&#37324;&#25105;&#20204;&#23558;&#20851;&#27880;&#21151;&#33021;&#20013;&#30340;&#26576;&#19968;&#29305;&#23450;&#37096;&#20998;&#65306;&#23486;&#39302;&#25628;&#32034;&#12289;&#36873;&#25321;&#12289;&#39044;&#35746;&#21644;&#30830;&#35748;&#12290;
            &#20174;&#29992;&#25143;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#20174;&#36873;&#25321;&#23486;&#39302;&#21040;&#30830;&#35748;&#30340;&#27599;&#19968;&#27493;&#37117;&#26159;&#24037;&#20316;&#20013;&#30340;&#19968;&#20010;&#36830;&#32493;&#21333;&#20803;&#65292;&#23646;&#20110;&#19968;&#20010; <span class="emphasis"><em>&#19994;&#21153;&#23545;&#35805;</em></span>&#12290;
            &#28982;&#32780;&#25628;&#32034;&#21364; <span class="emphasis"><em>&#19981;</em></span> &#26159;&#35813;&#23545;&#35805;&#30340;&#19968;&#37096;&#20998;&#12290;&#29992;&#25143;&#33021;&#22312;&#19981;&#21516;&#27983;&#35272;&#22120;&#26631;&#31614;&#39029;&#20013;&#30340;&#30456;&#21516;&#25628;&#32034;&#32467;&#26524;&#39029;&#38754;&#20013;&#36873;&#25321;&#22810;&#20010;&#23486;&#39302;&#12290;
        </p><p>
            &#22823;&#22810;&#25968;Web&#24212;&#29992;&#31243;&#24207;&#26550;&#26500;&#27809;&#26377;&#25552;&#20379;&#34920;&#31034;&#19994;&#21153;&#23545;&#35805;&#30340;&#19968;&#32423;&#26500;&#20214;(first class construct)&#12290;&#36825;&#22312;&#31649;&#29702;&#19982;&#23545;&#35805;&#30456;&#20851;&#30340;&#29366;&#24577;&#26102;&#24102;&#26469;&#20102;&#24456;&#22810;&#40635;&#28902;&#12290;
            &#36890;&#24120;&#24773;&#20917;&#19979;&#65292;Java&#30340;Web&#24212;&#29992;&#31243;&#24207;&#32467;&#21512;&#20004;&#31181;&#25216;&#26415;&#26469;&#24212;&#23545;&#36825;&#19968;&#24773;&#20917;&#65306;&#19968;&#26159;&#23558;&#26576;&#20123;&#29366;&#24577;&#20002;&#20837; <tt class="literal">HttpSession</tt>&#65307;&#20108;&#26159;&#23558;&#21487;&#25345;&#20037;&#21270;&#30340;&#29366;&#24577;&#22312;&#27599;&#20010;&#35831;&#27714;&#65288;Request&#65289;&#21518;&#20889;&#20837;&#25968;&#25454;&#24211;&#65292;&#24182;&#22312;&#27599;&#20010;&#26032;&#35831;&#27714;&#30340;&#24320;&#22987;&#23558;&#20043;&#37325;&#24314;&#12290;
        </p><p>
            &#30001;&#20110;&#25968;&#25454;&#24211;&#26159;&#26368;&#19981;&#21487;&#25193;&#23637;&#30340;&#19968;&#23618;&#65292;&#22240;&#27492;&#36825;&#20040;&#20570;&#24448;&#24448;&#23548;&#33268;&#23436;&#20840;&#26080;&#27861;&#25509;&#21463;&#30340;&#25193;&#23637;&#24615;&#20302;&#19979;&#12290;&#22312;&#27599;&#27425;&#35831;&#27714;&#26102;&#35775;&#38382;&#25968;&#25454;&#24211;&#25152;&#36896;&#25104;&#30340;&#39069;&#22806;&#27969;&#37327;&#21644;&#31561;&#24453;&#26102;&#38388;&#20063;&#26159;&#19968;&#20010;&#38382;&#39064;&#12290;
            &#35201;&#38477;&#20302;&#20887;&#20313;&#27969;&#37327;&#65292;Java&#24212;&#29992;&#31243;&#24207;&#24120;&#24341;&#20837;&#19968;&#20010;(&#20108;&#32423;)&#25968;&#25454;&#32531;&#23384;&#26469;&#20445;&#23384;&#34987;&#32463;&#24120;&#35775;&#38382;&#30340;&#25968;&#25454;&#12290;
            &#28982;&#32780;&#36825;&#20010;&#32531;&#23384;&#26159;&#24456;&#20302;&#25928;&#30340;&#65292;&#22240;&#20026;&#23427;&#30340;&#22833;&#25928;&#31639;&#27861;&#26159;&#22522;&#20110;LRU&#65288;&#26368;&#36817;&#26368;&#23569;&#20351;&#29992;&#65289;&#31574;&#30053;&#65292;&#32780;&#19981;&#26159;&#22522;&#20110;&#29992;&#25143;&#20309;&#26102;&#32467;&#26463;&#19982;&#35813;&#25968;&#25454;&#30456;&#20851;&#30340;&#24037;&#20316;&#12290;
            &#27492;&#22806;&#65292;&#30001;&#20110;&#35813;&#32531;&#23384;&#34987;&#35768;&#22810;&#24182;&#21457;&#20107;&#21153;&#20849;&#20139;&#65292;&#35201;&#20445;&#25345;&#32531;&#23384;&#19982;&#25968;&#25454;&#24211;&#30340;&#29366;&#24577;&#19968;&#33268;&#65292;&#25105;&#20204;&#38656;&#35201;&#24341;&#20837;&#20102;&#19968;&#22871;&#23436;&#25972;&#30340;&#26426;&#21046;&#12290;
        </p><p>
            &#29616;&#22312;&#20877;&#35753;&#25105;&#20204;&#32771;&#34385;&#23558;&#29366;&#24577;&#20445;&#23384;&#22312; <tt class="literal">HttpSession</tt> &#37324;&#12290;&#36890;&#36807;&#31934;&#24515;&#35774;&#35745;&#30340;&#32534;&#31243;&#65292;&#25105;&#20204;&#20063;&#35768;&#33021;&#25511;&#21046;session&#25968;&#25454;&#30340;&#22823;&#23567;&#12290;
            &#20294;&#36825;&#36828;&#27604;&#21548;&#36215;&#26469;&#35201;&#40635;&#28902;&#30340;&#22810;&#65292;&#22240;&#20026;Web&#27983;&#35272;&#22120;&#20801;&#35768;&#29305;&#27530;&#30340;&#38750;&#32447;&#24615;&#23548;&#33322;&#12290;
            &#20294;&#20551;&#35774;&#25105;&#20204;&#22312;&#31995;&#32479;&#24320;&#21457;&#21040;&#19968;&#21322;&#30340;&#26102;&#20505;&#31361;&#28982;&#21457;&#29616;&#19968;&#20010;&#38656;&#27714;&#65292;&#23427;&#35201;&#27714;&#29992;&#25143;&#21487;&#20197;&#25317;&#26377; <span class="emphasis"><em>&#22810;&#24182;&#21457;&#19994;&#21153;&#23545;&#35805;</em></span>&#65288;&#25105;&#23601;&#30896;&#21040;&#36807;&#65289;&#12290;
            &#35201;&#24320;&#21457;&#19968;&#20123;&#26426;&#21046;&#65292;&#20197;&#20998;&#31163;&#19982;&#19981;&#21516;&#24182;&#21457;&#19994;&#21153;&#20250;&#35805;&#30456;&#20851;&#30340;session&#29366;&#24577;&#65292;&#24182;&#24341;&#20837;&#25925;&#38556;&#20445;&#25252;&#65292;&#22312;&#29992;&#25143;&#20851;&#38381;&#27983;&#35272;&#22120;&#31383;&#21475;&#25110;&#26631;&#31614;&#39029;&#26102;&#38144;&#27585;&#19994;&#21153;&#20250;&#35805;&#29366;&#24577;&#12290;
            &#36825;&#23545;&#26222;&#36890;&#20154;&#26469;&#35828;&#21487;&#19981;&#26159;&#19968;&#20214;&#36731;&#26494;&#30340;&#20107;&#24773;&#65288;&#25105;&#23601;&#23454;&#29616;&#36807;&#20004;&#27425;&#65292;&#19968;&#27425;&#26159;&#20026;&#19968;&#20010;&#23458;&#25143;&#24212;&#29992;&#31243;&#24207;&#65292;&#21478;&#19968;&#27425;&#26159;&#20026;Seam&#65292;&#24184;&#22909;&#25105;&#26159;&#20986;&#20102;&#21517;&#30340;&#30127;&#23376;&#65289;&#12290;
        </p><p>
            &#29616;&#22312;&#25552;&#20379;&#19968;&#20010;&#26356;&#22909;&#30340;&#26041;&#27861;&#12290;
        </p><p>
            Seam&#24341;&#20837;&#20102; <span class="emphasis"><em>&#23545;&#35805;&#19978;&#19979;&#25991;</em></span> &#26469;&#20316;&#20026;&#19968;&#32423;&#26500;&#20214;&#12290;&#20320;&#33021;&#22312;&#20854;&#20013;&#23433;&#20840;&#22320;&#20445;&#23384;&#19994;&#21153;&#23545;&#35805;&#29366;&#24577;&#65292;&#23427;&#20250;&#20445;&#35777;&#29366;&#24577;&#26377;&#19968;&#20010;&#23450;&#20041;&#33391;&#22909;&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;
            &#32780;&#19988;&#65292;&#20320;&#19981;&#29992;&#20877;&#19981;&#20572;&#22320;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#21644;&#25968;&#25454;&#24211;&#38388;&#20256;&#36882;&#25968;&#25454;&#65292;&#22240;&#20026;&#19994;&#21153;&#23545;&#35805;&#19978;&#19979;&#25991;&#23601;&#26159;&#19968;&#20010;&#22825;&#28982;&#30340;&#32531;&#23384;&#65292;&#29992;&#26469;&#32531;&#23384;&#29992;&#25143;&#30340;&#25968;&#25454;&#12290;
        </p><p>
            &#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#20445;&#23384;&#22312;&#19994;&#21153;&#23545;&#35805;&#19978;&#19979;&#25991;&#20013;&#30340;&#32452;&#20214;&#26159;&#26377;&#29366;&#24577;&#30340;Session Bean&#12290;&#65288;&#25105;&#20204;&#20063;&#22312;&#20854;&#20013;&#20445;&#23384;&#23454;&#20307;Bean&#21644;JavaBeans&#12290;&#65289;
            &#22312;Java&#31038;&#21306;&#20013;&#19968;&#30452;&#26377;&#19968;&#20010;&#35875;&#20256;&#65292;&#35748;&#20026;&#26377;&#29366;&#24577;&#30340;Session Bean&#26159;&#25193;&#23637;&#24615;&#30340;&#26432;&#25163;&#12290;&#22312;1998&#24180;WebFoobar 1.0&#21457;&#24067;&#26102;&#30340;&#30830;&#22914;&#27492;&#12290;
            &#20294;&#20170;&#22825;&#30340;&#24773;&#20917;&#24050;&#32463;&#21464;&#20102;&#12290;&#20687;JBoss 4.0&#36825;&#26679;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#37117;&#26377;&#24456;&#25104;&#29087;&#30340;&#26426;&#21046;&#22788;&#29702;&#26377;&#29366;&#24577;Session Bean&#30340;&#29366;&#24577;&#22797;&#21046;&#12290;
            &#65288;&#20363;&#22914;&#65292;JBoss EJB3&#23481;&#22120;&#21487;&#20197;&#25191;&#34892;&#24456;&#32454;&#33268;&#30340;&#22797;&#21046;&#65292;&#21482;&#22797;&#21046;&#37027;&#20123;&#23646;&#24615;&#20540;&#34987;&#25913;&#21464;&#36807;&#30340;bean&#12290;&#65289;
            &#35831;&#27880;&#24847;&#65292;&#25152;&#26377;&#37027;&#20123;&#20256;&#32479;&#25216;&#26415;&#20013;&#20851;&#20110;&#26377;&#29366;&#24577;Bean&#26159;&#20302;&#25928;&#30340;&#20105;&#35770;&#20063;&#21516;&#26679;&#21457;&#29983;&#22312; <tt class="literal">HttpSession</tt> &#19978;&#65292;&#25152;&#20197;&#35828;&#23558;&#29366;&#24577;&#20174;&#19994;&#21153;&#23618;&#30340;&#26377;&#29366;&#24577;Session Bean&#36801;&#31227;&#21040;Web Session&#20013;&#20197;&#25552;&#39640;&#24615;&#33021;&#30340;&#20570;&#27861;&#27627;&#26080;&#30097;&#38382;&#26159;&#34987;&#35823;&#23548;&#30340;&#12290;
            &#19981;&#27491;&#30830;&#22320;&#20351;&#29992;&#26377;&#29366;&#24577;&#30340;Bean&#65292;&#25110;&#32773;&#26159;&#23558;&#23427;&#20204;&#29992;&#22312;&#38169;&#35823;&#30340;&#22320;&#26041;&#19978;&#37117;&#20250;&#20351;&#24212;&#29992;&#31243;&#24207;&#21464;&#24471;&#26080;&#27861;&#25193;&#23637;&#12290;
            &#20294;&#36825;&#24182;&#19981;&#24847;&#21619;&#30528;&#20320;&#24212;&#35813; <span class="emphasis"><em>&#27704;&#36828;&#19981;&#35201;</em></span> &#20351;&#29992;&#23427;&#20204;&#12290;&#24635;&#20043;&#65292;Seam&#20250;&#21578;&#35785;&#20320;&#19968;&#20010;&#23433;&#20840;&#20351;&#29992;&#30340;&#27169;&#22411;&#12290;&#27426;&#36814;&#26469;&#21040;2005&#24180;&#12290;
        </p><p>
            OK&#65292;&#19981;&#20877;&#22810;&#35828;&#20102;&#65292;&#35805;&#39064;&#22238;&#21040;&#36825;&#20010;&#25351;&#21335;&#19978;&#21543;&#12290;
        </p><p>
            &#23486;&#39302;&#39044;&#35746;&#33539;&#20363;&#28436;&#31034;&#20102;&#19981;&#21516;&#20316;&#29992;&#22495;&#30340;&#26377;&#29366;&#24577;&#32452;&#20214;&#26159;&#22914;&#20309;&#21327;&#21516;&#24037;&#20316;&#23454;&#29616;&#22797;&#26434;&#30340;&#34892;&#20026;&#30340;&#12290;
            &#23427;&#30340;&#20027;&#39029;&#38754;&#20801;&#35768;&#29992;&#25143;&#25628;&#32034;&#23486;&#39302;&#12290;&#25628;&#32034;&#30340;&#32467;&#26524;&#34987;&#20445;&#23384;&#22312;Seam&#30340;session&#22495;&#20013;&#12290;
            &#24403;&#29992;&#25143;&#23548;&#33322;&#21040;&#20854;&#20013;&#19968;&#20010;&#23486;&#39302;&#26102;&#65292;&#19968;&#20010;&#19994;&#21153;&#20250;&#35805;&#20415;&#24320;&#22987;&#20102;&#65292;&#19968;&#20010;&#19994;&#21153;&#20250;&#35805;&#22495;&#32452;&#20214;&#22238;&#35843;session&#22495;&#32452;&#20214;&#20197;&#33719;&#24471;&#36873;&#20013;&#30340;&#23486;&#39302;&#12290;
        </p><p>
            &#23486;&#39302;&#39044;&#35746;&#33539;&#20363;&#36824;&#28436;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;Ajax4JSF&#22312;&#19981;&#29992;&#25163;&#24037;&#32534;&#20889;JavaScript&#30340;&#24773;&#20917;&#19979;&#23454;&#29616;&#23500;&#23458;&#25143;&#31471;&#65288;Rich Client&#65289;&#34892;&#20026;&#12290;
        </p><p>
            &#25628;&#32034;&#21151;&#33021;&#29992;&#20102;&#19968;&#20010;Session&#22495;&#30340;&#26377;&#29366;&#24577;Session Bean&#26469;&#23454;&#29616;&#65292;&#26377;&#28857;&#31867;&#20284;&#20110;&#25105;&#20204;&#22312;&#19978;&#38754;&#30340;&#28040;&#24687;&#21015;&#34920;&#33539;&#20363;&#37324;&#30475;&#21040;&#30340;&#37027;&#20010;Session Bean&#12290;
        </p><div class="example"><a name="d0e2071"></a><p class="title"><b>Example&nbsp;1.22.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Stateful                                                                                <span class="co">(1)</span>
@Name("hotelSearch")
@Scope(ScopeType.SESSION)
@Restrict("#{identity.loggedIn}")                                                        <span class="co">(2)</span>
public class HotelSearchingAction implements HotelSearching
{

   @PersistenceContext
   private EntityManager em;

   private String searchString;
   private int pageSize = 10;
   private int page;

   @DataModel
   private List&lt;Hotel&gt; hotels;                                                           <span class="co">(3)</span>

   public String find()
   {
      page = 0;
      queryHotels();
      return "main";
   }

   public String nextPage()
   {
      page++;
      queryHotels();
      return "main";
   }

   private void queryHotels()
   {
      String searchPattern = searchString==null ? "%" : '%' + searchString.toLowerCase().replace('*', '%') + '%';
      hotels = em.createQuery("select h from Hotel h where lower(h.name) like :search or lower(h.city) like :search or lower(h.zip) like :search or lower(h.address) like :search")
            .setParameter("search", searchPattern)
            .setMaxResults(pageSize)
            .setFirstResult( page * pageSize )
            .getResultList();
   }

   public boolean isNextPageAvailable()
   {
      return hotels!=null &amp;&amp; hotels.size()==pageSize;
   }

   public int getPageSize() {
      return pageSize;
   }

   public void setPageSize(int pageSize) {
      this.pageSize = pageSize;
   }

   public String getSearchString()
   {
      return searchString;
   }

   public void setSearchString(String searchString)
   {
      this.searchString = searchString;
   }

   @Destroy @Remove
   public void destroy() {}                                                              <span class="co">(4)</span>

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                        EJB&#26631;&#20934;&#20013;&#30340; <tt class="literal">@Stateful</tt> &#27880;&#35299;&#34920;&#26126;&#36825;&#20010;&#31867;&#26159;&#19968;&#20010;&#26377;&#29366;&#24577;&#30340;Session Bean&#12290;&#23427;&#20204;&#30340;&#40664;&#35748;&#20316;&#29992;&#22495;&#26159;&#19994;&#21153;&#23545;&#35805;&#19978;&#19979;&#25991;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
								<tt class="literal">@Restrict</tt>&#27880;&#35299;&#32473;&#32452;&#20214;&#21152;&#19978;&#20102;&#19968;&#20010;&#23433;&#20840;&#38480;&#21046;&#12290;&#21482;&#26377;&#30331;&#24405;&#36807;&#30340;&#29992;&#25143;&#25165;&#33021;&#35775;&#38382;&#35813;&#32452;&#20214;&#12290;&#23433;&#20840;&#31456;&#33410;&#20013;&#26356;&#35814;&#32454;&#22320;&#35752;&#35770;&#20102;Seam&#30340;&#23433;&#20840;&#38382;&#39064;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                        <a href="annotations.html#datamodel-annotation"><tt class="literal">@DataModel</tt></a> &#27880;&#35299;&#23558;&#19968;&#20010; <tt class="literal">List</tt> &#20316;&#20026;JSF <tt class="literal">ListDataModel</tt> &#26292;&#38706;&#20986;&#21435;&#12290;
                        &#36825;&#31616;&#21270;&#20102;&#25628;&#32034;&#30028;&#38754;&#30340;&#21487;&#21333;&#20987;&#21015;&#34920;&#30340;&#23454;&#29616;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#23486;&#39302;&#30340;&#21015;&#34920;&#26159;&#20197;&#21517;&#20026; <tt class="literal">hotels</tt> &#30340; <tt class="literal">ListDataModel</tt> &#19994;&#21153;&#23545;&#35805;&#21464;&#37327;&#26292;&#38706;&#32473;&#39029;&#38754;&#30340;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                        EJB&#26631;&#20934;&#20013;&#30340; <tt class="literal">@Remove</tt> &#27880;&#35299;&#25351;&#23450;&#20102;&#19968;&#20010;&#26377;&#29366;&#24577;&#30340;Session Bean&#24212;&#35813;&#22312;&#27880;&#35299;&#30340;&#26041;&#27861;&#34987;&#35843;&#29992;&#21518;&#34987;&#21024;&#38500;&#19988;&#20854;&#29366;&#24577;&#24212;&#35813;&#34987;&#38144;&#27585;&#12290;
                        &#22312;Seam&#37324;&#65292;&#25152;&#26377;&#26377;&#29366;&#24577;&#30340;Session Bean&#37117;&#24212;&#35813;&#23450;&#20041;&#19968;&#20010;&#26631;&#26377; <tt class="literal">@Destroy @Remove</tt> &#30340;&#26041;&#27861;&#12290;
                        &#36825;&#26159;Seam&#22312;&#38144;&#27585;Session&#19978;&#19979;&#25991;&#26102;&#35201;&#35843;&#29992;&#30340;EJB&#21024;&#38500;&#26041;&#27861;&#12290;&#23454;&#38469;&#19978; <a href="annotations.html#destroy-annotation"><tt class="literal">@Destroy</tt></a> &#27880;&#35299;&#26356;&#26377;&#29992;&#65292;&#22240;&#20026;&#23427;&#33021;&#22312;Seam&#19978;&#19979;&#25991;&#32467;&#26463;&#26102;&#34987;&#29992;&#26469;&#20570;&#21508;&#31181;&#21508;&#26679;&#30340;&#28165;&#29702;&#24037;&#20316;&#12290;&#22914;&#26524;&#27809;&#26377;&#19968;&#20010; <tt class="literal">@Destroy @Remove</tt> &#26041;&#27861;&#65292;&#37027;&#20040;&#29366;&#24577;&#20250;&#27844;&#38706;&#65292;&#20320;&#23601;&#20250;&#30896;&#21040;&#24615;&#33021;&#19978;&#30340;&#38382;&#39064;&#12290;
                    </p></td></tr></table></div></div></div><p>
            &#24212;&#29992;&#31243;&#24207;&#30340;&#20027;&#39029;&#38754;&#26159;&#19968;&#20010;Facelets&#39029;&#38754;&#12290;&#35753;&#25105;&#20204;&#26469;&#30475;&#19979;&#19982;&#23486;&#39302;&#25628;&#32034;&#30456;&#20851;&#30340;&#37096;&#20998;&#65306;
        </p><div class="example"><a name="d0e2130"></a><p class="title"><b>Example&nbsp;1.23.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">&lt;div class="section"&gt;
&lt;h:form&gt;

  &lt;span class="errors"&gt;
    &lt;h:messages globalOnly="true"/&gt;
  &lt;/span&gt;

  &lt;h1&gt;Search Hotels&lt;/h1&gt;
  &lt;fieldset&gt;
     &lt;h:inputText value="#{hotelSearch.searchString}" style="width: 165px;"&gt;
        &lt;a:support event="onkeyup" actionListener="#{hotelSearch.find}"                  <span class="co">(1)</span>
                   reRender="searchResults" /&gt;
     &lt;/h:inputText&gt;
     &amp;#160;
     &lt;a:commandButton value="Find Hotels" action="#{hotelSearch.find}"
                      styleClass="button" reRender="searchResults"/&gt;
     &amp;#160;
     &lt;a:status&gt;                                                                          <span class="co">(2)</span>
        &lt;f:facet name="start"&gt;
           &lt;h:graphicImage value="/img/spinner.gif"/&gt;
        &lt;/f:facet&gt;
     &lt;/a:status&gt;
     &lt;br/&gt;
     &lt;h:outputLabel for="pageSize"&gt;Maximum results:&lt;/h:outputLabel&gt;&amp;#160;
     &lt;h:selectOneMenu value="#{hotelSearch.pageSize}" id="pageSize"&gt;
        &lt;f:selectItem itemLabel="5" itemValue="5"/&gt;
        &lt;f:selectItem itemLabel="10" itemValue="10"/&gt;
        &lt;f:selectItem itemLabel="20" itemValue="20"/&gt;
     &lt;/h:selectOneMenu&gt;
  &lt;/fieldset&gt;

&lt;/h:form&gt;
&lt;/div&gt;

&lt;a:outputPanel id="searchResults"&gt;                                                       <span class="co">(3)</span>
  &lt;div class="section"&gt;
  &lt;h:outputText value="No Hotels Found"
                rendered="#{hotels != null and hotels.rowCount==0}"/&gt;
  &lt;h:dataTable value="#{hotels}" var="hot" rendered="#{hotels.rowCount&gt;0}"&gt;
    &lt;h:column&gt;
      &lt;f:facet name="header"&gt;Name&lt;/f:facet&gt;
      #{hot.name}
    &lt;/h:column&gt;
    &lt;h:column&gt;
      &lt;f:facet name="header"&gt;Address&lt;/f:facet&gt;
      #{hot.address}
    &lt;/h:column&gt;
    &lt;h:column&gt;
      &lt;f:facet name="header"&gt;City, State&lt;/f:facet&gt;
      #{hot.city}, #{hot.state}, #{hot.country}
    &lt;/h:column&gt;
    &lt;h:column&gt;
      &lt;f:facet name="header"&gt;Zip&lt;/f:facet&gt;
      #{hot.zip}
    &lt;/h:column&gt;
    &lt;h:column&gt;
      &lt;f:facet name="header"&gt;Action&lt;/f:facet&gt;
      &lt;s:link value="View Hotel" action="#{hotelBooking.selectHotel(hot)}"/&gt;             <span class="co">(4)</span>
    &lt;/h:column&gt;
  &lt;/h:dataTable&gt;
  &lt;s:link value="More results" action="#{hotelSearch.nextPage}"
          rendered="#{hotelSearch.nextPageAvailable}"/&gt;
  &lt;/div&gt;
&lt;/a:outputPanel&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                        Ajax4JSF&#30340; <tt class="literal">&lt;a:support&gt;</tt> &#26631;&#31614;&#20801;&#35768;&#19968;&#20010;JSF&#21160;&#20316;&#20107;&#20214;&#30417;&#21548;&#22120;&#22312;&#31867;&#20284; <tt class="literal">onkeyup</tt> &#36825;&#26679;&#30340;JavaScript&#20107;&#20214;&#21457;&#29983;&#26102;&#34987;&#24322;&#27493;&#30340; <tt class="literal">XMLHttpRequest</tt> &#35843;&#29992;&#12290;
                        &#26356;&#26834;&#30340;&#26159;&#65292;<tt class="literal">reRender</tt> &#23646;&#24615;&#35753;&#25105;&#20204;&#21487;&#20197;&#22312;&#25910;&#21040;&#24322;&#27493;&#21709;&#24212;&#26102;&#28210;&#26579;&#19968;&#20010;JSF&#39029;&#38754;&#30340;&#29255;&#27573;&#24182;&#25191;&#34892;&#19968;&#20010;&#39029;&#38754;&#30340;&#23616;&#37096;&#20462;&#25913;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>Ajax4JSF&#30340; <tt class="literal">&lt;a:status&gt;</tt> &#26631;&#31614;&#20351;&#25105;&#20204;&#33021;&#22312;&#31561;&#24453;&#24322;&#27493;&#35831;&#27714;&#36820;&#22238;&#26102;&#26174;&#31034;&#19968;&#20010;&#31616;&#21333;&#30340;&#21160;&#30011;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>Ajax4JSF&#30340; <tt class="literal">&lt;a:outputPanel&gt;</tt> &#26631;&#31614;&#23450;&#20041;&#20102;&#19968;&#22359;&#33021;&#34987;&#24322;&#27493;&#35831;&#27714;&#20462;&#25913;&#30340;&#39029;&#38754;&#21306;&#22495;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                        Seam&#30340;<tt class="literal">&lt;s:link&gt;</tt> &#26631;&#31614;&#20351;&#25105;&#20204;&#33021;&#23558;&#19968;&#20010;JSF&#21160;&#20316;&#30417;&#21548;&#22120;&#38468;&#21152;&#22312;&#19968;&#20010;&#26222;&#36890;&#30340;&#65288;&#38750;JavaScript&#65289;HTML&#38142;&#25509;&#19978;&#12290;
                        &#29992;&#23427;&#21462;&#20195;&#26631;&#20934;JSF&#30340; <tt class="literal">&lt;h:commandLink&gt;</tt> &#30340;&#22909;&#22788;&#23601;&#26159;&#23427;&#22312;&#8220;&#22312;&#26032;&#31383;&#21475;&#20013;&#25171;&#24320;&#8221;&#21644;&#8220;&#22312;&#26032;&#26631;&#31614;&#39029;&#20013;&#25171;&#24320;&#8221;&#26102;&#20173;&#28982;&#26377;&#25928;&#12290;
                        &#20540;&#24471;&#27880;&#24847;&#30340;&#21478;&#19968;&#28857;&#23601;&#26159;&#25105;&#20204;&#29992;&#20102;&#19968;&#20010;&#32465;&#23450;&#20102;&#21442;&#25968;&#30340;&#26041;&#27861;&#65306;<tt class="literal">#{hotelBooking.selectHotel(hot)}</tt>&#12290;
                        &#22312;&#26631;&#20934;&#30340;&#32479;&#19968;EL&#20013;&#36825;&#26159;&#19981;&#20801;&#35768;&#30340;&#65292;&#20294;Seam&#23545;EL&#30340;&#25193;&#23637;&#36827;&#34892;&#20102;&#25193;&#23637;&#65292;&#20351;&#34920;&#36798;&#24335;&#33021;&#22815;&#25903;&#25345;&#24102;&#21442;&#25968;&#30340;&#26041;&#27861;&#12290;
                    </p></td></tr></table></div></div></div><p>
            &#36825;&#20010;&#39029;&#38754;&#26681;&#25454;&#25105;&#20204;&#30340;&#38190;&#20837;&#21160;&#24577;&#22320;&#26174;&#31034;&#25628;&#32034;&#32467;&#26524;&#65292;&#35753;&#25105;&#20204;&#36873;&#25321;&#19968;&#23478;&#23486;&#39302;&#24182;&#23558;&#23427;&#20256;&#32473; <tt class="literal">HotelBookingAction</tt> &#30340; <tt class="literal">selectHotel()</tt> &#26041;&#27861;&#65292;&#36825;&#20010;&#23545;&#35937;&#25165;&#26159; <span class="emphasis"><em>&#30495;&#27491;</em></span> &#26377;&#36259;&#30340;&#22320;&#26041;&#12290;
        </p><p>
            &#29616;&#22312;&#35753;&#25105;&#20204;&#26469;&#30475;&#30475;&#23486;&#39302;&#39044;&#23450;&#33539;&#20363;&#31243;&#24207;&#26159;&#22914;&#20309;&#20351;&#29992;&#19968;&#20010;&#23545;&#35805;&#22495;&#30340;&#26377;&#29366;&#24577;&#30340;Session Bean&#30340;&#65292;&#36825;&#20010;Session Bean&#23454;&#29616;&#20102;&#19994;&#21153;&#20250;&#35805;&#30456;&#20851;&#25345;&#20037;&#21270;&#25968;&#25454;&#30340;&#22825;&#28982;&#32531;&#23384;&#12290;
            &#19979;&#38754;&#30340;&#20195;&#30721;&#24456;&#38271;&#12290;&#20294;&#22914;&#26524;&#20320;&#25226;&#23427;&#29702;&#35299;&#20026;&#23454;&#29616;&#19994;&#21153;&#20250;&#35805;&#30340;&#22810;&#20010;&#27493;&#39588;&#30340;&#19968;&#31995;&#21015;&#21160;&#20316;&#30340;&#35805;&#65292;&#23427;&#26159;&#19981;&#38590;&#29702;&#35299;&#30340;&#12290;&#25105;&#20204;&#25226;&#36825;&#20010;&#31867;&#24403;&#20316;&#25925;&#20107;&#19968;&#26679;&#20174;&#22836;&#24320;&#22987;&#38405;&#35835;&#12290;
        </p><div class="example"><a name="d0e2192"></a><p class="title"><b>Example&nbsp;1.24.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Stateful
@Name("hotelBooking")
@Restrict("#{identity.loggedIn}")
public class HotelBookingAction implements HotelBooking
{

   @PersistenceContext(type=EXTENDED)                                                    <span class="co">(1)</span>
   private EntityManager em;

   @In                                                                                   <span class="co">(2)</span>
   private User user;

   @In(required=false) @Out
   private Hotel hotel;

   @In(required=false)
   @Out(required=false)
   private Booking booking;

   @In
   private FacesMessages facesMessages;

   @In
   private Events events;

   @Logger
   private Log log;

   @Begin                                                                                <span class="co">(3)</span>
   public String selectHotel(Hotel selectedHotel)
   {
      hotel = em.merge(selectedHotel);
      return "hotel";
   }

   public String bookHotel()
   {
      booking = new Booking(hotel, user);
      Calendar calendar = Calendar.getInstance();
      booking.setCheckinDate( calendar.getTime() );
      calendar.add(Calendar.DAY_OF_MONTH, 1);
      booking.setCheckoutDate( calendar.getTime() );

      return "book";
   }

   public String setBookingDetails()
   {
      if (booking==null || hotel==null) return "main";
      if ( !booking.getCheckinDate().before( booking.getCheckoutDate() ) )
      {
         facesMessages.add("Check out date must be later than check in date");
         return null;
      }
      else
      {
         return "confirm";
      }
   }

   @End                                                                                  <span class="co">(4)</span>
   public String confirm()
   {
      if (booking==null || hotel==null) return "main";
      em.persist(booking);
      facesMessages.add("Thank you, #{user.name}, your confimation number for #{hotel.name} is #{booking.id}");
      log.info("New booking: #{booking.id} for #{user.username}");
      events.raiseEvent("bookingConfirmed");
      return "confirmed";
   }

   @End
   public String cancel()
   {
      return "main";
   }

   @Destroy @Remove                                                                      <span class="co">(5)</span>
   public void destroy() {}

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                        &#36825;&#20010;bean&#20351;&#29992;EJB3&#30340; <span class="emphasis"><em>&#25193;&#23637;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;</em></span>&#65292;&#25152;&#20197;&#20219;&#24847;&#23454;&#20307;&#23454;&#20363;&#22312;&#25972;&#20010;&#26377;&#29366;&#24577;Session Bean&#30340;&#29983;&#21629;&#21608;&#26399;&#20013;&#19968;&#30452;&#21463;&#21040;&#31649;&#29702;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                        <a href="annotations.html#out-annotation"><tt class="literal">@Out</tt></a> &#27880;&#35299;&#22768;&#26126;&#20102;&#19968;&#20010;&#23646;&#24615;&#20540;&#22312;&#26041;&#27861;&#35843;&#29992;&#21518;&#20250; <span class="emphasis"><em>&#21521;&#22806;&#27880;&#20837;</em></span> &#21040;&#19968;&#20010;&#19978;&#19979;&#25991;&#21464;&#37327;&#20013;&#30340;&#12290;
                        &#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#21517;&#20026; <tt class="literal">hotel</tt> &#30340;&#19978;&#19979;&#25991;&#21464;&#37327;&#20250;&#22312;&#27599;&#20010;&#21160;&#20316;&#30417;&#21548;&#22120;&#35843;&#29992;&#23436;&#25104;&#21518;&#34987;&#35774;&#32622;&#20026; <tt class="literal">hotel</tt> &#23454;&#20363;&#21464;&#37327;&#30340;&#20540;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                        <a href="annotations.html#begin-annotation"><tt class="literal">@Begin</tt></a> &#27880;&#35299;&#34920;&#26126;&#34987;&#27880;&#35299;&#30340;&#26041;&#27861;&#24320;&#22987;&#19968;&#20010; <span class="emphasis"><em>&#38271;&#26399;&#19994;&#21153;&#23545;&#35805;</em></span>&#65292;&#22240;&#27492;&#24403;&#21069;&#19994;&#21153;&#23545;&#35805;&#19978;&#19979;&#25991;&#22312;&#35831;&#27714;&#32467;&#26463;&#21518;&#19981;&#20250;&#34987;&#38144;&#27585;&#12290;&#30456;&#21453;&#65292;&#23427;&#20250;&#34987;&#20851;&#32852;&#32473;&#24403;&#21069;&#31383;&#21475;&#30340;&#27599;&#27425;&#35831;&#27714;&#65292;&#22312;&#19994;&#21153;&#23545;&#35805;&#36229;&#26102;&#26102;&#25110;&#32773;&#19968;&#20010; <tt class="literal">@End</tt> &#26041;&#27861;&#34987;&#35843;&#29992;&#21518;&#38144;&#27585;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                        <a href="annotations.html#end-annotation"><tt class="literal">@End</tt></a> &#27880;&#35299;&#34920;&#26126;&#34987;&#27880;&#35299;&#30340;&#26041;&#27861;&#34987;&#29992;&#26469;&#32467;&#26463;&#19968;&#20010;&#38271;&#26399;&#19994;&#21153;&#23545;&#35805;&#65292;&#25152;&#20197;&#24403;&#21069;&#19994;&#21153;&#23545;&#35805;&#19978;&#19979;&#25991;&#20250;&#22312;&#35831;&#27714;&#32467;&#26463;&#21518;&#34987;&#38144;&#27585;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                        &#36825;&#20010;EJB&#21024;&#38500;&#26041;&#27861;&#20250;&#22312;Seam&#38144;&#27585;&#19994;&#21153;&#23545;&#35805;&#19978;&#19979;&#25991;&#26102;&#34987;&#35843;&#29992;&#12290;&#19981;&#35201;&#24536;&#35760;&#23450;&#20041;&#35813;&#26041;&#27861;&#65281;
                    </p></td></tr></table></div></div></div><p>
				<tt class="literal">HotelBookingAction</tt> &#21253;&#21547;&#20102;&#23454;&#29616;&#36873;&#25321;&#12289;&#39044;&#35746;&#21644;&#39044;&#35746;&#30830;&#35748;&#30340;&#25152;&#26377;&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#65292;&#24182;&#22312;&#23427;&#30340;&#23454;&#20363;&#21464;&#37327;&#20013;&#20445;&#23384;&#19982;&#20043;&#30456;&#20851;&#30340;&#29366;&#24577;&#12290;
            &#25105;&#20204;&#35748;&#20026;&#20320;&#19968;&#23450;&#20250;&#21516;&#24847;&#36825;&#20010;&#20195;&#30721;&#27604;&#36215;&#33719;&#21462;&#21644;&#35774;&#32622; <tt class="literal">HttpSession</tt> &#30340;&#23646;&#24615;&#26469;&#35828;&#35201;&#31616;&#27905;&#30340;&#22810;&#12290;
        </p><p>
            &#32780;&#19988;&#65292;&#19968;&#20010;&#29992;&#25143;&#33021;&#22312;&#27599;&#20010;&#30331;&#24405;Session&#20013;&#25317;&#26377;&#22810;&#20010;&#29420;&#31435;&#30340;&#19994;&#21153;&#23545;&#35805;&#12290;&#35797;&#35797;&#21543;&#65281;&#30331;&#24405;&#31995;&#32479;&#65292;&#25191;&#34892;&#25628;&#32034;&#65292;&#22312;&#22810;&#20010;&#27983;&#35272;&#22120;&#26631;&#31614;&#39029;&#20013;&#23548;&#33322;&#21040;&#19981;&#21516;&#30340;&#23486;&#39302;&#39029;&#38754;&#12290;
            &#20320;&#33021;&#22312;&#21516;&#19968;&#26102;&#38388;&#24314;&#31435;&#20004;&#20010;&#19981;&#21516;&#30340;&#23486;&#39302;&#39044;&#32422;&#12290;&#22914;&#26524;&#26576;&#20010;&#19994;&#21153;&#23545;&#35805;&#34987;&#38386;&#32622;&#22826;&#38271;&#26102;&#38388;&#65292;Seam&#26368;&#32456;&#20250;&#21028;&#20854;&#36229;&#26102;&#24182;&#38144;&#27585;&#23427;&#30340;&#29366;&#24577;&#12290;&#22914;&#26524;&#22312;&#32467;&#26463;&#19994;&#21153;&#23545;&#35805;&#21518;&#65292;
            &#20320;&#25353;&#20102;&#36864;&#22238;&#25353;&#38062;&#22238;&#21040;&#37027;&#20010;&#20250;&#35805;&#30340;&#26576;&#19968;&#39029;&#65292;&#23581;&#35797;&#25191;&#34892;&#19968;&#20010;&#21160;&#20316;&#65292;Seam&#20250;&#26816;&#27979;&#21040;&#37027;&#20010;&#19994;&#21153;&#23545;&#35805;&#24050;&#32463;&#34987;&#32467;&#26463;&#20102;&#65292;&#24182;&#23558;&#20320;&#37325;&#23450;&#21521;&#21040;&#25628;&#32034;&#39029;&#38754;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2258"></a>1.6.4.&nbsp;Seam&#30340;UI&#25511;&#21046;&#24211;</h3></div></div><div></div></div><p>
            &#22914;&#26524;&#20320;&#26597;&#30475;&#19979;&#39044;&#35746;&#31995;&#32479;&#30340;WAR&#25991;&#20214;&#65292;&#20320;&#20250;&#22312; <tt class="literal">WEB-INF/lib</tt> &#30446;&#24405;&#20013;&#25214;&#21040; <tt class="literal">seam-ui.jar</tt>&#12290;
            &#36825;&#20010;&#21253;&#37324;&#26377;&#35768;&#22810;Seam&#30340;JSF&#33258;&#23450;&#20041;&#25511;&#20214;&#12290;&#26412;&#24212;&#29992;&#31243;&#24207;&#22312;&#20174;&#25628;&#32034;&#30028;&#38754;&#23548;&#33322;&#21040;&#23486;&#39302;&#39029;&#38754;&#26102;&#20351;&#29992;&#20102; <tt class="literal">&lt;s:link&gt;</tt> &#25511;&#20214;&#65306;
        </p><pre class="programlisting">&lt;s:link value="View Hotel" action="#{hotelBooking.selectHotel}"/&gt;</pre><p>
            &#36825;&#37324;&#30340; <tt class="literal">&lt;s:link&gt;</tt> &#20801;&#35768;&#25105;&#20204;&#22312;&#19981;&#25171;&#26029;&#27983;&#35272;&#22120;&#30340;&#8220;&#22312;&#26032;&#31383;&#21475;&#25171;&#24320;&#8221;&#21151;&#33021;&#30340;&#24773;&#20917;&#19979;&#32473;HTML&#38142;&#25509;&#38468;&#21152;&#19978;&#19968;&#20010;&#21160;&#20316;&#30417;&#21548;&#22120;&#12290;
            &#26631;&#20934;&#30340;JSF <tt class="literal">&lt;h:commandLink&gt;</tt> &#26080;&#27861;&#22312;&#8220;&#22312;&#26032;&#31383;&#21475;&#25171;&#24320;&#8221;&#30340;&#24773;&#20917;&#19979;&#27491;&#24120;&#24037;&#20316;&#12290;
            &#31245;&#21518;&#25105;&#20204;&#20250;&#30475;&#21040; <tt class="literal">&lt;s:link&gt;</tt> &#36824;&#33021;&#25552;&#20379;&#24456;&#22810;&#20854;&#20182;&#26377;&#29992;&#30340;&#29305;&#24615;&#65292;&#21253;&#25324;&#19994;&#21153;&#20250;&#35805;&#20256;&#25773;&#35268;&#21017;&#12290;
        </p><p>
            &#23486;&#39302;&#39044;&#35746;&#31995;&#32479;&#37324;&#36824;&#29992;&#20102;&#20123;&#21035;&#30340;Seam&#21644;Ajax4JSF&#25511;&#20214;&#65292;&#29305;&#21035;&#26159;&#22312; <tt class="literal">/book.xhtml</tt> &#39029;&#38754;&#37324;&#12290;&#25105;&#20204;&#22312;&#36825;&#37324;&#19981;&#28145;&#20837;&#35752;&#35770;&#36825;&#20123;&#25511;&#20214;&#65292;&#22914;&#26524;&#20320;&#24819;&#30475;&#25026;&#36825;&#20123;&#20195;&#30721;&#65292;&#35831;&#21442;&#32771;&#20171;&#32461;Seam&#30340;JSF&#34920;&#21333;&#39564;&#35777;&#21151;&#33021;&#30340;&#31456;&#33410;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2290"></a>1.6.5.&nbsp;Seam&#35843;&#35797;&#39029;&#38754;</h3></div></div><div></div></div><p>
            WAR&#25991;&#20214;&#36824;&#21253;&#25324;&#20102; <tt class="literal">seam-debug.jar</tt>&#12290;&#22914;&#26524;&#25226;&#36825;&#20010;jar&#37096;&#23646;&#22312; <tt class="literal">WEB-INF/lib</tt> &#19979;&#65292;&#32467;&#21512;Facelets&#65292;&#20320;&#33021;&#22312; <tt class="literal">web.xml</tt> &#25110;&#32773; <tt class="literal">seam.properties</tt> &#37324;&#35774;&#32622;&#22914;&#19979;&#30340;Seam&#23646;&#24615;&#65306;
        </p><pre class="programlisting">&lt;context-param&gt;
    &lt;param-name&gt;org.jboss.seam.core.init.debug&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;</pre><p>
            &#36825;&#26679;&#23601;&#33021;&#35775;&#38382;Seam&#35843;&#35797;&#39029;&#38754;&#20102;&#12290;&#36825;&#20010;&#39029;&#38754;&#21487;&#20197;&#35753;&#20320;&#27983;&#35272;&#24182;&#26816;&#26597;&#20219;&#24847;&#19982;&#20320;&#24403;&#21069;&#30331;&#24405;Session&#30456;&#20851;&#30340;Seam&#19978;&#19979;&#25991;&#20013;&#30340;Seam&#32452;&#20214;&#12290;
            &#21482;&#38656;&#27983;&#35272; <a href="http://localhost:8080/seam-booking/debug.seam" target="_top"><tt class="literal">http://localhost:8080/seam-booking/debug.seam</tt></a> &#21363;&#21487;&#12290;
        </p><div class="mediaobject" align="center"><img src="images/debug.png" align="middle"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dvdstore"></a>1.7.&nbsp;&#19968;&#20010;&#20351;&#29992;Seam&#21644;jBPM&#30340;&#23436;&#25972;&#33539;&#20363;&#65306;DVD&#21830;&#24215;</h2></div></div><div></div></div><p>
          DVD&#21830;&#24215;&#31243;&#24207;&#28436;&#31034;&#20102;&#22914;&#20309;&#22312;&#20219;&#21153;&#31649;&#29702;&#21644;&#39029;&#38754;&#27969;&#20013;&#20351;&#29992;jBPM&#12290;
      </p><p>
          &#29992;&#25143;&#30028;&#38754;&#24212;&#29992;jPDL&#39029;&#38754;&#27969;&#23454;&#29616;&#20102;&#25628;&#32034;&#21644;&#36141;&#29289;&#36710;&#21151;&#33021;&#12290;
      </p><div class="screenshot"><div class="mediaobject" align="center"><img src="images/dvdsearch.png" align="middle"></div></div><p>
          &#31649;&#29702;&#21592;&#30028;&#38754;&#20351;&#29992;jBPM&#26469;&#31649;&#29702;&#35746;&#21333;&#30340;&#23457;&#25209;&#21644;&#36865;&#36135;&#21608;&#26399;&#12290;&#19994;&#21153;&#27969;&#31243;&#21487;&#20197;&#36890;&#36807;&#36873;&#25321;&#19981;&#21516;&#30340;&#27969;&#31243;&#23450;&#20041;&#23454;&#29616;&#21160;&#24577;&#25913;&#21464;&#12290;
      </p><div class="screenshot"><div class="mediaobject" align="center"><img src="images/dvdtasks.png" align="middle"></div></div><p>TODO</p><p>&#35265;<tt class="literal">dvdstore</tt>&#30446;&#24405;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hibernate"></a>1.8.&nbsp;&#32467;&#21512;Seam&#21644;Hibernate&#30340;&#33539;&#20363;&#65306;Hibernate&#39044;&#35746;&#31995;&#32479;</h2></div></div><div></div></div><p>
          Hibernate&#39044;&#35746;&#31995;&#32479;&#26159;&#20043;&#21069;&#23458;&#25151;&#39044;&#35746;&#31995;&#32479;&#30340;&#21478;&#19968;&#20010;&#29256;&#26412;&#65292;&#23427;&#20351;&#29992;Hibernate&#21644;JavaBeans&#20195;&#26367;&#20102;&#20250;&#35805;Bean&#23454;&#29616;&#25345;&#20037;&#21270;&#12290;
      </p><p>TODO</p><p>&#35265;<tt class="literal">hibernate</tt>&#30446;&#24405;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="blog"></a>1.9.&nbsp;&#19968;&#20010;RESTful&#30340;Seam&#24212;&#29992;&#31243;&#24207;&#65306;Blog&#33539;&#20363;</h2></div></div><div></div></div><p>
          Seam&#21487;&#20197;&#24456;&#26041;&#20415;&#22320;&#23454;&#29616;&#22312;&#26381;&#21153;&#22120;&#31471;&#20445;&#23384;&#29366;&#24577;&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;
          &#28982;&#32780;&#65292;&#26381;&#21153;&#22120;&#31471;&#29366;&#24577;&#22312;&#26377;&#20123;&#24773;&#20917;&#19979;&#24182;&#19981;&#21512;&#36866;&#65292;&#29305;&#21035;&#26159;&#23545;&#37027;&#20123;&#29992;&#26469;&#25552;&#20379;<span class="emphasis"><em>&#20869;&#23481;</em></span>&#30340;&#21151;&#33021;&#12290;
          &#38024;&#23545;&#36825;&#31867;&#38382;&#39064;&#65292;&#25105;&#20204;&#24120;&#38656;&#35201;&#35753;&#29992;&#25143;&#33021;&#22815;&#25910;&#34255;&#39029;&#38754;&#65292;&#26377;&#19968;&#20010;&#30456;&#23545;&#26080;&#29366;&#24577;&#30340;&#26381;&#21153;&#22120;&#65292;&#36825;&#26679;&#19968;&#26469;&#33021;&#22815;&#22312;&#20219;&#20309;&#26102;&#38388;&#36890;&#36807;&#20070;&#31614;&#26469;&#35775;&#38382;&#37027;&#20123;&#34987;&#25910;&#34255;&#30340;&#39029;&#38754;&#12290;
          Blog&#33539;&#20363;&#28436;&#31034;&#20102;&#22914;&#20309;&#29992;Seam&#26469;&#23454;&#29616;&#19968;&#20010;RESTful&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#27599;&#20010;&#39029;&#38754;&#37117;&#33021;&#34987;&#25910;&#34255;&#65292;&#21253;&#25324;&#25628;&#32034;&#32467;&#26524;&#39029;&#38754;&#12290;
      </p><div class="screenshot"><div class="mediaobject" align="center"><img src="images/blog.png" align="middle"></div></div><p>
          Blog&#33539;&#20363;&#28436;&#31034;&#20102;&#8220;&#25289;&#8221;&#39118;&#26684;&#65288;"pull"-style&#65289;&#30340;MVC&#65292;&#23427;&#19981;&#20351;&#29992;&#21160;&#20316;&#30417;&#21548;&#22120;&#26041;&#27861;&#26469;&#33719;&#21462;&#25968;&#25454;&#21644;&#20026;&#35270;&#22270;&#20934;&#22791;&#25968;&#25454;&#65292;&#32780;&#26159;&#35270;&#22270;&#22312;&#34987;&#26174;&#31034;&#26102;&#20174;&#32452;&#20214;&#20013;&#25289;&#25968;&#25454;&#12290;
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2383"></a>1.9.1.&nbsp;&#20351;&#29992;&#8220;&#25289;&#8221;&#39118;&#26684;&#30340;MVC</h3></div></div><div></div></div><p>
          &#20174; <tt class="literal">index.xhtml</tt> Facelets&#39029;&#38754;&#20013;&#21462;&#20986;&#30340;&#29255;&#26029;&#26174;&#31034;&#20102;blog&#30340;&#26368;&#36817;&#25991;&#31456;&#21015;&#34920;&#65306;
      </p><div class="example"><a name="d0e2391"></a><p class="title"><b>Example&nbsp;1.25.&nbsp;</b></p><pre class="programlisting">&lt;h:dataTable value="#{blog.recentBlogEntries}" var="blogEntry" rows="3"&gt;
   &lt;h:column&gt;
      &lt;div class="blogEntry"&gt;
         &lt;h3&gt;#{blogEntry.title}&lt;/h3&gt;
         &lt;div&gt;
            &lt;h:outputText escape="false"
                  value="#{blogEntry.excerpt==null ? blogEntry.body : blogEntry.excerpt}"/&gt;
         &lt;/div&gt;
         &lt;p&gt;
            &lt;h:outputLink value="entry.seam" rendered="#{blogEntry.excerpt!=null}"&gt;
               &lt;f:param name="blogEntryId" value="#{blogEntry.id}"/&gt;
               Read more...
            &lt;/h:outputLink&gt;
         &lt;/p&gt;
         &lt;p&gt;
            [Posted on
            &lt;h:outputText value="#{blogEntry.date}"&gt;
               &lt;f:convertDateTime timeZone="#{blog.timeZone}" locale="#{blog.locale}" type="both"/&gt;
            &lt;/h:outputText&gt;]
            &amp;#160;
            &lt;h:outputLink value="entry.seam"&gt;[Link]
               &lt;f:param name="blogEntryId" value="#{blogEntry.id}"/&gt;
            &lt;/h:outputLink&gt;
         &lt;/p&gt;
      &lt;/div&gt;
   &lt;/h:column&gt;
&lt;/h:dataTable&gt;</pre></div><p>
          &#22914;&#26524;&#25105;&#20204;&#36890;&#36807;&#25910;&#34255;&#22841;&#35775;&#38382;&#36825;&#20010;&#39029;&#38754;&#65292;&#37027;&#20040; <tt class="literal">&lt;h:dataTable&gt;</tt> &#30340;&#25968;&#25454;&#26159;&#24590;&#20040;&#34987;&#21021;&#22987;&#21270;&#30340;&#21602;&#65311;
          &#20107;&#23454;&#19978;&#65292;<tt class="literal">Blog</tt> &#26159;&#24310;&#36831;&#21152;&#36733;&#30340;&#65292;&#21363;&#22312;&#38656;&#35201;&#26102;&#25165;&#34987;&#21517;&#20026; <tt class="literal">blog</tt> &#30340;Seam&#32452;&#20214;&#8220;&#25289;&#8221;&#20986;&#26469;&#12290;
          &#36825;&#19982;&#20256;&#32479;&#30340;&#22522;&#20110;&#21160;&#20316;&#30340;web&#26694;&#26550;&#65288;&#20363;&#22914;Struts&#65289;&#30340;&#25511;&#21046;&#27969;&#31243;&#27491;&#22909;&#30456;&#21453;&#12290;
      </p><div class="example"><a name="d0e2405"></a><p class="title"><b>Example&nbsp;1.26.&nbsp;</b></p><div class="programlistingco"><pre class="programlisting">@Name("blog")
@Scope(ScopeType.STATELESS)
public class BlogService
{

   @In                                                                                   <span class="co">(1)</span>
   private EntityManager entityManager;

   @Unwrap                                                                               <span class="co">(2)</span>
   public Blog getBlog()
   {
      return (Blog) entityManager.createQuery("from Blog b left join fetch b.blogEntries")
            .setHint("org.hibernate.cacheable", true)
            .getSingleResult();
   }

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                        &#36825;&#20010;&#32452;&#20214;&#20351;&#29992;&#20102;&#19968;&#20010; <span class="emphasis"><em>&#21463;Seam&#31649;&#29702;&#30340;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#65288;seam-managed persistence context&#65289;</em></span>&#12290;
                        &#19982;&#25105;&#20204;&#30475;&#36807;&#30340;&#20854;&#20182;&#20363;&#23376;&#19981;&#21516;&#65292;&#36825;&#20010;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#26159;&#30001;Seam&#31649;&#29702;&#30340;&#65292;&#32780;&#19981;&#26159;EJB3&#23481;&#22120;&#12290;
                        &#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#36143;&#31359;&#20110;&#25972;&#20010;Web&#35831;&#27714;&#20013;&#65292;&#36825;&#20351;&#24471;&#22312;&#35270;&#22270;&#37324;&#35775;&#38382;&#26410;&#25235;&#21462;&#30340;&#20851;&#32852;&#25968;&#25454;&#26102;&#21487;&#20197;&#36991;&#20813;&#21457;&#29983;&#20219;&#20309;&#24322;&#24120;&#12290;
                  </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
								<tt class="literal">@Unwrap</tt> &#27880;&#35299;&#21578;&#35785;Seam&#23558; <tt class="literal">Blog</tt> &#32780;&#19981;&#26159; <tt class="literal">BlogService</tt> &#32452;&#20214;&#20316;&#20026;&#26041;&#27861;&#30340;&#36820;&#22238;&#20540;&#25552;&#20379;&#32473;&#23458;&#25143;&#31471;&#12290;
                        &#36825;&#26159;Seam&#30340; <span class="emphasis"><em>&#31649;&#29702;&#21592;&#32452;&#20214;&#27169;&#24335;&#65288;manager component pattern&#65289;</em></span>
							</p></td></tr></table></div></div></div><p>
          &#36825;&#20123;&#30475;&#36215;&#26469;&#24050;&#32463;&#24456;&#19981;&#38169;&#20102;&#65292;&#37027;&#22914;&#20309;&#26469;&#25910;&#34255;&#35832;&#22914;&#25628;&#32034;&#32467;&#26524;&#39029;&#36825;&#26679;&#30340;&#34920;&#21333;&#25552;&#20132;&#32467;&#26524;&#39029;&#38754;&#21602;&#65311;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2436"></a>1.9.2.&nbsp;&#21487;&#25910;&#34255;&#30340;&#25628;&#32034;&#32467;&#26524;&#39029;&#38754;</h3></div></div><div></div></div><p>
          Blog&#33539;&#20363;&#22312;&#27599;&#20010;&#39029;&#38754;&#30340;&#21491;&#19978;&#26041;&#37117;&#26377;&#19968;&#20010;&#24456;&#23567;&#30340;&#34920;&#21333;&#65292;&#36825;&#20010;&#34920;&#21333;&#20801;&#35768;&#29992;&#25143;&#25628;&#32034;&#25991;&#31456;&#12290;
          &#36825;&#26159;&#23450;&#20041;&#22312;&#19968;&#20010;&#21517;&#20026; <tt class="literal">menu.xhtml</tt> &#30340;&#25991;&#20214;&#37324;&#30340;&#65292;&#23427;&#34987;Facelets&#27169;&#26495; <tt class="literal">template.xhtml</tt> &#25152;&#24341;&#29992;&#65306;
      </p><div class="example"><a name="d0e2447"></a><p class="title"><b>Example&nbsp;1.27.&nbsp;</b></p><pre class="programlisting">&lt;div id="search"&gt;
   &lt;h:form&gt;
      &lt;h:inputText value="#{searchAction.searchPattern}"/&gt;
      &lt;h:commandButton value="Search" action="/search.xhtml"/&gt;
   &lt;/h:form&gt;
&lt;/div&gt;</pre></div><p>
          &#35201;&#23454;&#29616;&#19968;&#20010;&#21487;&#25910;&#34255;&#30340;&#25628;&#32034;&#32467;&#26524;&#39029;&#38754;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;&#22788;&#29702;&#25628;&#32034;&#34920;&#21333;&#25552;&#20132;&#21518;&#25191;&#34892;&#19968;&#20010;&#27983;&#35272;&#22120;&#37325;&#23450;&#21521;&#12290;
          &#22240;&#20026;&#25105;&#20204;&#29992;JSF&#35270;&#22270;id&#20316;&#20026;&#21160;&#20316;&#36755;&#20986;&#65292;&#25152;&#20197;Seam&#20250;&#22312;&#34920;&#21333;&#25552;&#20132;&#21518;&#33258;&#21160;&#37325;&#23450;&#21521;&#21040;&#35813;&#34920;&#21333;id&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;&#25105;&#20204;&#20063;&#33021;&#20687;&#36825;&#26679;&#26469;&#23450;&#20041;&#19968;&#20010;&#23548;&#33322;&#35268;&#21017;&#65306;
      </p><div class="example"><a name="d0e2452"></a><p class="title"><b>Example&nbsp;1.28.&nbsp;</b></p><pre class="programlisting">&lt;navigation-rule&gt;
   &lt;navigation-case&gt;
      &lt;from-outcome&gt;searchResults&lt;/from-outcome&gt;
      &lt;to-view-id&gt;/search.xhtml&lt;/to-view-id&gt;
      &lt;redirect/&gt;
   &lt;/navigation-case&gt;
&lt;/navigation-rule&gt;</pre></div><p>
          &#28982;&#21518;&#34920;&#21333;&#30475;&#36215;&#26469;&#20250;&#26159;&#36825;&#20010;&#26679;&#23376;&#30340;&#65306;
      </p><div class="example"><a name="d0e2457"></a><p class="title"><b>Example&nbsp;1.29.&nbsp;</b></p><pre class="programlisting">&lt;div id="search"&gt;
   &lt;h:form&gt;
      &lt;h:inputText value="#{searchAction.searchPattern}"/&gt;
      &lt;h:commandButton value="Search" action="searchResults"/&gt;
   &lt;/h:form&gt;
&lt;/div&gt;</pre></div><p>
          &#22312;&#37325;&#23450;&#21521;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#23558;&#34920;&#21333;&#30340;&#20540;&#20316;&#20026;&#35831;&#27714;&#21442;&#25968;&#21253;&#25324;&#36827;&#26469;&#65292;&#24471;&#21040;&#30340;&#20070;&#31614;URL&#20250;&#26159;&#36825;&#20010;&#26679;&#23376;&#65306;
          <tt class="literal">http://localhost:8080/seam-blog/search.seam?searchPattern=seam</tt>&#12290;
          JSF&#27809;&#26377;&#20026;&#27492;&#25552;&#20379;&#19968;&#20010;&#31616;&#21333;&#30340;&#36884;&#24452;&#65292;&#20294;Seam&#21364;&#26377;&#12290;&#25105;&#20204;&#33021;&#22312; <tt class="literal">WEB-INF/pages.xml</tt> &#20013;&#23450;&#20041;&#19968;&#20010; <span class="emphasis"><em>&#39029;&#38754;&#21442;&#25968;</em></span>&#65306;
      </p><div class="example"><a name="d0e2471"></a><p class="title"><b>Example&nbsp;1.30.&nbsp;</b></p><pre class="programlisting">&lt;pages&gt;
   &lt;page view-id="/search.xhtml"&gt;
      &lt;param name="searchPattern" value="#{searchService.searchPattern}"/&gt;
   &lt;/page&gt;
   ...
&lt;/pages&gt;</pre></div><p>
          &#36825;&#21578;&#35785;Seam&#22312;&#37325;&#23450;&#21521;&#26102;&#23558; <tt class="literal">#{searchService.searchPattern}</tt> &#30340;&#20540;&#20316;&#20026;&#21517;&#23383;&#26159; <tt class="literal">searchPattern</tt> &#30340;&#35831;&#27714;&#21442;&#25968;&#21253;&#25324;&#36827;&#21435;&#65292;&#24182;&#22312;&#26174;&#31034;&#39029;&#38754;&#21069;&#37325;&#26032;&#23558;&#36825;&#20010;&#20540;&#36171;&#19978;&#12290;
      </p><p>
          &#37325;&#23450;&#21521;&#20250;&#25226;&#25105;&#20204;&#24102;&#21040; <tt class="literal">search.xhtml</tt> &#39029;&#38754;&#65306;
      </p><div class="example"><a name="d0e2487"></a><p class="title"><b>Example&nbsp;1.31.&nbsp;</b></p><pre class="programlisting">&lt;h:dataTable value="#{searchResults}" var="blogEntry"&gt;
   &lt;h:column&gt;
      &lt;div&gt;
         &lt;h:outputLink value="entry.seam"&gt;
            &lt;f:param name="blogEntryId" value="#{blogEntry.id}"/&gt;
            #{blogEntry.title}
         &lt;/h:outputLink&gt;
         posted on
         &lt;h:outputText value="#{blogEntry.date}"&gt;
            &lt;f:convertDateTime timeZone="#{blog.timeZone}" locale="#{blog.locale}" type="both"/&gt;
         &lt;/h:outputText&gt;
      &lt;/div&gt;
   &lt;/h:column&gt;
&lt;/h:dataTable&gt;</pre></div><p>
          &#27492;&#22788;&#21516;&#26679;&#20351;&#29992;&#8220;&#25289;&#8221;&#39118;&#26684;&#30340;MVC&#26469;&#33719;&#24471;&#23454;&#38469;&#25628;&#32034;&#32467;&#26524;&#65306;
      </p><div class="example"><a name="d0e2492"></a><p class="title"><b>Example&nbsp;1.32.&nbsp;</b></p><pre class="programlisting">@Name("searchService")
public class SearchService
{

   @In
   private EntityManager entityManager;

   private String searchPattern;

   @Factory("searchResults")
   public List&lt;BlogEntry&gt; getSearchResults()
   {
      if (searchPattern==null)
      {
         return null;
      }
      else
      {
         return entityManager.createQuery("select be from BlogEntry be where lower(be.title) like :searchPattern or lower(be.body) like :searchPattern order by be.date desc")
               .setParameter( "searchPattern", getSqlSearchPattern() )
               .setMaxResults(100)
               .getResultList();
      }
   }

   private String getSqlSearchPattern()
   {
      return searchPattern==null ? "" : '%' + searchPattern.toLowerCase().replace('*', '%').replace('?', '_') + '%';
   }

   public String getSearchPattern()
   {
      return searchPattern;
   }

   public void setSearchPattern(String searchPattern)
   {
      this.searchPattern = searchPattern;
   }

}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2495"></a>1.9.3.&nbsp;&#22312;RESTful&#24212;&#29992;&#31243;&#24207;&#20013;&#20351;&#29992;&#8220;&#25512;&#8221;&#39118;&#26684;&#65288;"push"-style&#65289;&#30340;MVC</h3></div></div><div></div></div><p>
          &#26377;&#20123;&#26102;&#20505;&#65292;&#29992;&#8220;&#25512;&#8221;&#39118;&#26684;&#30340;MVC&#26469;&#22788;&#29702;RESTful&#39029;&#38754;&#26356;&#26377;&#24847;&#20041;&#65292;&#20026;&#27492;Seam&#25552;&#20379;&#20102; <span class="emphasis"><em>&#39029;&#38754;&#21160;&#20316;</em></span>&#12290;
          Blog&#33539;&#20363;&#22312;&#25991;&#31456;&#39029;&#38754; <tt class="literal">entry.xhtml</tt> &#37324;&#20351;&#29992;&#20102;&#39029;&#38754;&#21160;&#20316;&#12290;&#35831;&#27880;&#24847;&#36825;&#37324;&#26159;&#25925;&#24847;&#36825;&#20040;&#20570;&#30340;&#65292;&#22240;&#20026;&#27492;&#22788;&#20351;&#29992;&#8220;&#25289;&#8221;&#39118;&#26684;&#30340;MVC&#20250;&#26356;&#23481;&#26131;&#12290;
      </p><p>
				<tt class="literal">entryAction</tt> &#32452;&#20214;&#24037;&#20316;&#36215;&#26469;&#38750;&#24120;&#20687;&#20256;&#32479;&#8220;&#25512;&#8221;&#39118;&#26684;MVC&#30340;&#38754;&#21521;&#21160;&#20316;&#26694;&#26550;&#20363;&#22914;Struts&#37324;&#30340;&#21160;&#20316;&#31867;&#65288;action class&#65289;&#65306;
      </p><div class="example"><a name="d0e2511"></a><p class="title"><b>Example&nbsp;1.33.&nbsp;</b></p><pre class="programlisting">@Name("entryAction")
@Scope(STATELESS)
public class EntryAction
{
   @In(create=true)
   private Blog blog;

   @Out
   private BlogEntry blogEntry;

   public void loadBlogEntry(String id) throws EntryNotFoundException
   {
      blogEntry = blog.getBlogEntry(id);
      if (blogEntry==null) throw new EntryNotFoundException(id);
   }

}</pre></div><p>
          &#22312; <tt class="literal">pages.xml</tt> &#37324;&#20063;&#23450;&#20041;&#20102;&#39029;&#38754;&#21160;&#20316;&#65306;
      </p><div class="example"><a name="d0e2519"></a><p class="title"><b>Example&nbsp;1.34.&nbsp;</b></p><pre class="programlisting">&lt;pages&gt;
   ...

   &lt;page view-id="/entry.xhtml" action="#{entryAction.loadBlogEntry(blogEntry.id)}"&gt;
      &lt;param name="blogEntryId" value="#{blogEntry.id}"/&gt;
   &lt;/page&gt;

   &lt;page view-id="/post.xhtml" action="#{loginAction.challenge}"/&gt;

   &lt;page view-id="*" action="#{blog.hitCount.hit}"/&gt;

&lt;/pages&gt;</pre></div><p>
          &#33539;&#20363;&#20013;&#36824;&#23558;&#39029;&#38754;&#21160;&#20316;&#36816;&#29992;&#20110;&#19968;&#20123;&#20854;&#20182;&#30340;&#21151;&#33021;&#19978; &#8212; &#30331;&#24405;&#21644;&#39029;&#38754;&#35775;&#38382;&#35760;&#25968;&#22120;&#12290;&#21478;&#22806;&#19968;&#28857;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#22312;&#39029;&#38754;&#21160;&#20316;&#32465;&#23450;&#20013;&#20351;&#29992;&#20102;&#19968;&#20010;&#21442;&#25968;&#12290;
          &#36825;&#19981;&#26159;&#26631;&#20934;&#30340;JSF EL&#65292;&#26159;Seam&#20026;&#20320;&#25552;&#20379;&#30340;&#65292;&#20320;&#19981;&#20165;&#33021;&#22312;&#39029;&#38754;&#21160;&#20316;&#20013;&#20351;&#29992;&#23427;&#65292;&#36824;&#21487;&#20197;&#23558;&#23427;&#20351;&#29992;&#22312;JSF&#26041;&#27861;&#32465;&#23450;&#20013;&#12290;
      </p><p>
          &#24403; <tt class="literal">entry.xhtml</tt> &#39029;&#38754;&#34987;&#35831;&#27714;&#26102;&#65292;Seam&#20808;&#20026;&#27169;&#22411;&#32465;&#23450;&#19978;&#39029;&#38754;&#21442;&#25968; <tt class="literal">blogEntryId</tt>&#65292;&#28982;&#21518;&#36816;&#34892;&#39029;&#38754;&#21160;&#20316;&#65292;&#35813;&#21160;&#20316;&#33719;&#21462;&#25152;&#38656;&#30340;&#25968;&#25454; &#8212; <tt class="literal">blogEntry</tt> &#8212; &#24182;&#23558;&#23427;&#25918;&#22312;Seam&#20107;&#20214;&#19978;&#19979;&#25991;&#20013;&#12290;&#26368;&#21518;&#26174;&#31034;&#20197;&#19979;&#20869;&#23481;&#65306;
      </p><div class="example"><a name="d0e2535"></a><p class="title"><b>Example&nbsp;1.35.&nbsp;</b></p><pre class="programlisting">&lt;div class="blogEntry"&gt;
   &lt;h3&gt;#{blogEntry.title}&lt;/h3&gt;
   &lt;div&gt;
      &lt;h:outputText escape="false" value="#{blogEntry.body}"/&gt;
   &lt;/div&gt;
   &lt;p&gt;
      [Posted on&amp;#160;
      &lt;h:outputText value="#{blogEntry.date}"&gt;
         &lt;f:convertDateTime timezone="#{blog.timeZone}" locale="#{blog.locale}" type="both"/&gt;
      &lt;/h:outputText&gt;]
   &lt;/p&gt;
&lt;/div&gt;</pre></div><p>
          &#22914;&#26524;&#22312;&#25968;&#25454;&#24211;&#20013;&#27809;&#26377;&#25214;&#21040;blog entry&#65292;&#23601;&#20250;&#25243;&#20986; <tt class="literal">EntryNotFoundException</tt> &#24322;&#24120;&#12290;
          &#25105;&#20204;&#24819;&#35753;&#35813;&#24322;&#24120;&#24341;&#36215;&#19968;&#20010;404&#38169;&#35823;&#65292;&#32780;&#38750;505&#65292;&#25152;&#20197;&#20026;&#36825;&#20010;&#24322;&#24120;&#31867;&#28155;&#21152;&#20010;&#27880;&#35299;&#65306;
      </p><div class="example"><a name="d0e2543"></a><p class="title"><b>Example&nbsp;1.36.&nbsp;</b></p><pre class="programlisting">@ApplicationException(rollback=true)
@HttpError(errorCode=HttpServletResponse.SC_NOT_FOUND)
public class EntryNotFoundException extends Exception
{
   EntryNotFoundException(String id)
   {
      super("entry not found: " + id);
   }
}</pre></div><p>
          &#35813;&#33539;&#20363;&#30340;&#21478;&#19968;&#20010;&#23454;&#29616;&#22312;&#26041;&#27861;&#32465;&#23450;&#20013;&#27809;&#26377;&#20351;&#29992;&#21442;&#25968;&#65306;
      </p><div class="example"><a name="d0e2548"></a><p class="title"><b>Example&nbsp;1.37.&nbsp;</b></p><pre class="programlisting">@Name("entryAction")
@Scope(STATELESS)
public class EntryAction
{
   @In(create=true)
   private Blog blog;

   @In @Out
   private BlogEntry blogEntry;

   public void loadBlogEntry() throws EntryNotFoundException
   {
      blogEntry = blog.getBlogEntry( blogEntry.getId() );
      if (blogEntry==null) throw new EntryNotFoundException(id);
   }

}</pre><pre class="programlisting">&lt;pages&gt;
   ...

   &lt;page view-id="/entry.xhtml" action="#{entryAction.loadBlogEntry}"&gt;
      &lt;param name="blogEntryId" value="#{blogEntry.id}"/&gt;
   &lt;/page&gt;

   ...
&lt;/pages&gt;</pre></div><p>
          &#20320;&#21487;&#20197;&#26681;&#25454;&#33258;&#24049;&#30340;&#21916;&#22909;&#26469;&#36873;&#25321;&#23454;&#29616;&#12290;
      </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pr01.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="gettingstarted.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">JBoss Seam&#31616;&#20171;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;2.&nbsp;&#29992;Seam-gen&#36215;&#27493;</td></tr></table></div></body></html>